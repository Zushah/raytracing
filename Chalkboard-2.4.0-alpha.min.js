"use strict";var t,r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)},e=this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var n,i=0,o=r.length;i<o;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return t.concat(n||Array.prototype.slice.call(r))};!function(t){t.APPLY=function(r,e){var n;if(r&&"number"==typeof r.a&&"number"==typeof r.b&&void 0===r.c){var i=r;return t.comp.init(e(i.a),e(i.b))}if(r&&"number"==typeof r.a&&"number"==typeof r.b&&"number"==typeof r.c&&"number"==typeof r.d){var o=r;return t.quat.init(e(o.a),e(o.b),e(o.c),e(o.d))}if(r&&"number"==typeof r.x&&"number"==typeof r.y){var a=r;return"number"==typeof a.w&&"number"==typeof a.z?t.vect.init(e(a.x),e(a.y),e(a.z),e(a.w)):"number"==typeof a.z?t.vect.init(e(a.x),e(a.y),e(a.z)):t.vect.init(e(a.x),e(a.y))}if(Array.isArray(r)){for(var u=!0,s=0;s<r.length;s++)if(!Array.isArray(r[s])||r[s].length>0&&"number"!=typeof r[s][0]){u=!1;break}if(u){var c=r,f=t.matr.rows(c),l=t.matr.cols(c),m=t.matr.fill(0,f,l);for(s=0;s<f;s++)for(var d=0;d<l;d++)m[s][d]=e(c[s][d]);return m}for(m=[],s=0;s<r.length;s++)m.push(t.APPLY(r[s],e));return m}if("number"==typeof r)return e(r);if(r&&"function"==typeof r.contains&&void 0===r.set){var p=r;if(Array.isArray(p.elements)){for(m=[],s=0;s<p.elements.length;s++)m.push(e(p.elements[s]));return m}throw new TypeError('Chalkboard.APPLY cannot operate on an infinite "ChalkboardSet".')}if(r&&"function"==typeof(null===(n=r.set)||void 0===n?void 0:n.contains)){var h=r;if(Array.isArray(h.set.elements)){for(m=[],s=0;s<h.set.elements.length;s++)m.push(e(h.set.elements[s]));return m}throw new TypeError('Chalkboard.APPLY cannot operate on an infinite "ChalkboardStructure".')}throw new TypeError('Chalkboard.APPLY can only operate on a "ChalkboardComplex", "ChalkboardMatrix", "ChalkboardQuaternion", "ChalkboardTensor", "ChalkboardVector", "ChalkboardSet", or "ChalkboardStructure".')},t.CONTEXT="undefined"!=typeof window?"ctx":"0",t.E=function(t){return void 0===t&&(t=1),Math.pow(Math.pow(10,1/Math.log(10)),t)},t.I=function(r){return void 0===r&&(r=1),r%4==0?t.comp.init(1,0):r%4==1?t.comp.init(0,1):r%4==2?t.comp.init(-1,0):r%4==3?t.comp.init(0,-1):t.comp.init(0,0)},t.LOGO=function(r,e,n,i){void 0===r&&(r=t.real.parse(t.CONTEXT).canvas.width/2),void 0===e&&(e=t.real.parse(t.CONTEXT).canvas.height/2),void 0===n&&(n=1),void 0===i&&(i=t.real.parse(t.CONTEXT)),i.save(),i.translate(r,e),i.scale(n,n),i.fillStyle="rgb(25, 25, 25)",i.beginPath(),i.ellipse(0,0,50,50,0,0,t.PI(2)),i.fill(),i.fillStyle="rgb(50, 125, 200)",i.textAlign="center",i.textBaseline="middle",i.font="75px Times New Roman",i.fillText("C",-25,6),i.fillText("B",25,6),i.strokeStyle="rgb(50, 125, 200)",i.lineWidth=6,i.lineCap="butt",i.beginPath(),i.moveTo(-30,25),i.lineTo(-30,-22.5),i.stroke(),i.beginPath(),i.moveTo(22,25),i.lineTo(22,-22.5),i.stroke(),i.restore()},t.PARSEPREFIX="","undefined"!=typeof window&&(t.PARSEPREFIX+="const ctx = document.querySelector('canvas').getContext('2d');"),t.PI=function(t){return void 0===t&&(t=1),4*t*(4*Math.atan(.2)-Math.atan(1/239))},t.README=function(){console.log("The Chalkboard Library\nVersion "+t.VERSION+" "+t.VERSIONALIAS+" released 04/14/2025\nAuthored by Zushah ===> https://www.github.com/Zushah\nAvailable under the MIT License ===> https://www.opensource.org/license/mit/\n\nThe Chalkboard library is a JavaScript namespace that provides a plethora of both practical and abstract mathematical functionalities for its user.\n\nRepository ===> https://www.github.com/Zushah/Chalkboard\nWebsite ===> https://zushah.github.io/Chalkboard")},t.VERSION="2.3.0",t.VERSIONALIAS="Boole"}(t||(t={})),"undefined"==typeof window?module.exports=t:window.Chalkboard=t,function(t){!function(n){var i=JSON.stringify;n.A=function(r){if(!Number.isInteger(r)||r<=0)throw new Error('The parameter "n" must be a positive integer.');var e=(t.abal.S(r).elements||[]).filter((function(t){for(var r=0,e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)t[e]>t[n]&&r++;return r%2==0}));return{contains:function(t){return e.some((function(r){return i(r)===i(t)}))},elements:e,id:"A".concat(r)}},n.automorphism=function(r,e){var n=t.abal.homomorphism(r,r,e);if(!t.abal.isHomomorphism(n))throw new Error("The mapping is not a homomorphism, so it cannot be an automorphism.");if(!t.abal.isBijective(n))throw new Error("The mapping is not bijective, so it cannot be an automorphism.");return n},n.C=function(r){if(void 0===r)return{contains:function(t){return"number"==typeof t.a&&"number"==typeof t.b},id:"C"};if(!Number.isInteger(r)||r<=0)throw new Error('The parameter "n" must be a positive integer.');for(var e=[],n=0;n<r;n++){var i=2*Math.PI*n/r;e.push(t.comp.init(t.numb.roundTo(Math.cos(i),1e-4),t.numb.roundTo(Math.sin(i),1e-4)))}return{contains:function(t){return e.some((function(r){return r.a===t.a&&r.b===t.b}))},elements:e,id:"C".concat(r)}},n.cardinality=function(t){var r="set"in t&&t.set?t.set.id:"id"in t?t.id:void 0;if((null==r?void 0:r.startsWith("M("))||(null==r?void 0:r.startsWith("GL"))||["Z","Q","R","C","P"].includes(r||""))return 1/0;if("elements"in t&&t.elements)return t.elements.length;if("set"in t&&t.set.elements)return t.set.elements.length;throw new Error("The inputted structure does not have a finite cardinality or is missing elements.")},n.Cartesian=function(r,e){for(var n=[],i=0,o=r.elements||[];i<o.length;i++)for(var a=o[i],u=0,s=e.elements||[];u<s.length;u++){var c=s[u];n.push([a,c])}return t.abal.set(n)},n.Cayley=function(r,e){if(void 0===e&&(e="add"),!r.set.elements)throw new Error("The structure must have a finite set of elements.");var n=r.set.elements;if("operation"in r&&r.operation){if("add"===e){for(var i=t.matr.fill(0,n.length),o=0;o<n.length;o++)for(var a=0;a<n.length;a++)i[o][a]=r.operation(n[o],n[a]);return i}throw new Error('The "type" parameter for groups should remain as the default "add" since there is no distinction between their additive and multiplicative Cayley tables.')}if("add"in r&&r.add&&"mul"in r&&r.mul){if("add"===e){var u=t.matr.fill(0,n.length);for(o=0;o<n.length;o++)for(a=0;a<n.length;a++)u[o][a]=r.add(n[o],n[a]);return u}for(i=t.matr.fill(0,n.length),o=0;o<n.length;o++)for(a=0;a<n.length;a++)i[o][a]=r.mul(n[o],n[a]);return i}throw new Error("Invalid algebraic structure for Cayley table.")},n.center=function(r){var e=r.set,n=r.operation;if(!e.elements||!n)return t.abal.set([]);var i=e.elements.filter((function(t){var r;return(null!==(r=e.elements)&&void 0!==r?r:[]).every((function(r){return n(t,r)===n(r,t)}))}));return t.abal.set(i)},n.complement=function(r,e){return t.abal.set((e.elements||[]).filter((function(t){return!r.contains(t)})))},n.compose=function(r,e){if(!t.abal.isHomomorphism(r)||!t.abal.isHomomorphism(e))throw new Error("Both morphisms of the morphism composition must be homomorphisms.");if(!t.abal.isEqual(r.struc2,e.struc1))throw new Error("The codomain of the first morphism and the domain of the second morphism must be equal to calculate the composition morphism.");return t.abal.homomorphism(r.struc1,e.struc2,(function(t){return e.mapping(r.mapping(t))}))},n.copy=function(n){var i;if((i=n)&&"function"==typeof i.contains&&!i.set&&!i.struc1&&!i.base)return o=r(r({contains:n.contains},n.id&&{id:n.id}),n.elements&&{elements:e([],n.elements,!0)});if(function(t){return t&&t.set&&(t.operation||t.add||t.mul)}(n)){var o=t.abal.copy(n.set);return r(r(r(r(r(r(r(r(r({set:o},n.operation&&{operation:n.operation}),void 0!==n.identity&&{identity:n.identity}),n.inverter&&{inverter:n.inverter}),n.add&&{add:n.add}),n.mul&&{mul:n.mul}),void 0!==n.addIdentity&&{addIdentity:n.addIdentity}),void 0!==n.mulIdentity&&{mulIdentity:n.mulIdentity}),n.addInverter&&{addInverter:n.addInverter}),n.mulInverter&&{mulInverter:n.mulInverter})}if(function(t){return t&&t.base&&t.extension&&"number"==typeof t.degree}(n))return{base:t.abal.copy(n.base),extension:t.abal.copy(n.extension),degree:n.degree,basis:n.basis?e([],n.basis,!0):[],isFinite:n.isFinite,isSimple:n.isSimple,isAlgebraic:n.isAlgebraic};if(function(t){return t&&t.struc1&&t.struc2&&"function"==typeof t.mapping}(n))return{struc1:t.abal.copy(n.struc1),struc2:t.abal.copy(n.struc2),mapping:n.mapping};throw new Error('The "struc" must be a set, structure, structure extension, or morphism.')},n.coset=function(r,n){if("operation"in r&&!t.abal.isSubgroup(r,n.set))throw new Error('The "substruc" must be a subgroup of the "struc".');if("add"in r&&!t.abal.isIdeal(r,n.set))throw new Error('The "substruc" must be an ideal of the "struc".');var o=t.abal.toArray(r.set),a=t.abal.toArray(n.set),u=new Map;return o.forEach((function(n){var o=a.map((function(t){return"operation"in r?r.operation(n,t):r.add(n,t)})),s=e([],o,!0).sort((function(t,r){return"number"==typeof t&&"number"==typeof r?t-r:i(t).localeCompare(i(r))})),c=i(s);if(!u.has(c)){var f=t.abal.set(o);u.set(c,f)}})),t.abal.set(Array.from(u.values()))},n.cyclicSubgroup=function(r,e){if(r.set.id&&["Z","Q","R","C"].includes(r.set.id))throw new Error('The "group" must be finite.');var n=[],i=e;if(!r.operation)return t.abal.set([]);do{n.push(i),i=r.operation(i,e)}while(!n.includes(i));return t.abal.set(n)},n.D=function(t){if(!Number.isInteger(t)||t<=0)throw new Error('The parameter "n" must be a positive integer.');for(var r=[],e=0;e<t;e++)r.push("r".concat(e));for(e=0;e<t;e++)r.push("s".concat(e));return{contains:function(t){return r.includes(t)},elements:r,id:"D".concat(t)}},n.difference=function(r,e){var n=(r.elements||[]).filter((function(t){return!e.contains(t)}));return t.abal.set(n)},n.direct=function(r,e,n){void 0===n&&(n="product");var i=t.abal.Cartesian(r.set,e.set),o=function(t,n){return[r.add(t[0],n[0]),e.add(t[1],n[1])]},a=function(t,n){return[r.mul(t[0],n[0]),e.mul(t[1],n[1])]},u=[r.addIdentity,e.addIdentity],s=[r.mulIdentity,e.mulIdentity],c=function(t){return[r.addInverter(t[0]),e.addInverter(t[1])]};if("operation"in r&&"operation"in e){var f=[r.identity,e.identity];if(!("sum"!==n||r.set.elements&&e.set.elements))throw new Error("Direct sum is only defined for finite groups.");return t.abal.group(i,(function(t,n){return[r.operation(t[0],n[0]),e.operation(t[1],n[1])]}),f,(function(t){return[r.inverter(t[0]),e.inverter(t[1])]}))}if("add"in r&&"add"in e&&"mul"in r&&"mul"in e){if(!("sum"!==n||r.set.elements&&e.set.elements))throw new Error("Direct sum is only defined for finite rings.");return t.abal.ring(i,o,a,u,s,c)}if("add"in r&&"add"in e&&"mul"in r&&"mul"in e&&"mulInverter"in r&&"mulInverter"in e){if(!("sum"!==n||r.set.elements&&e.set.elements))throw new Error("Direct sum is only defined for finite fields.");return t.abal.field(i,o,a,u,s,c,(function(t){return[r.mulInverter(t[0]),e.mulInverter(t[1])]}))}throw new Error("Invalid algebraic structures for direct product or sum.")},n.endomorphism=function(r,e){var n=t.abal.homomorphism(r,r,e);if(!t.abal.isHomomorphism(n))throw new Error("The mapping is not a homomorphism, so it cannot be an endomorphism.");return n},n.field=function(r,e,n,i,o,a,u){var s,c,f={addition:{Z:function(t,r){return t+r},Q:function(t,r){return t+r},R:function(t,r){return t+r},C:t.comp.add,M:t.matr.add},multiplication:{Z:function(t,r){return t*r},Q:function(t,r){return t*r},R:function(t,r){return t*r},C:t.comp.mul,M:t.matr.mul}},l="string"==typeof r&&"function"==typeof t.abal[r]?t.abal[r]():r,m="string"==typeof e?f[e].addition||f[e][null!==(s=l.id)&&void 0!==s?s:""]:e,d="string"==typeof n?f[n].multiplication||f[n][null!==(c=l.id)&&void 0!==c?c:""]:n;if(!m||!d)throw new Error('Preset operations "'.concat(e,'" or "').concat(n,'" are not defined for set "').concat(l.id,'".'));var p=void 0===i||void 0===o||void 0===a||void 0===u?function(){if(!l.id)throw new Error('The "set" must have a valid "id" property, or you must input "addIdentity", "mulIdentity", "addInverter", and "mulInverter" explicitly.');if("Q"===l.id||"R"===l.id)return{addIdentity:0,mulIdentity:1,addInverter:function(t){return-t},mulInverter:function(t){return 1/t}};if("C"===l.id)return{addIdentity:t.comp.init(0,0),mulIdentity:t.comp.init(1,0),addInverter:function(r){return t.comp.negate(r)},mulInverter:function(r){return t.comp.invert(r)}};throw new Error('Automatic configuration of the "addIdentity", "mulIdentity", "addInverter", and "mulInverter" properties is not available for the inputted "set".')}():{addIdentity:i,mulIdentity:o,addInverter:a,mulInverter:u},h={set:l,add:m,mul:d,addIdentity:p.addIdentity,mulIdentity:p.mulIdentity,addInverter:p.addInverter,mulInverter:p.mulInverter};if(!t.abal.isField(h))throw new Error('The inputted "set", "add", "mul", "addIdentity", "mulIdentity", "addInverter", and "mulInverter" do not form a field.');return h},n.fieldExtension=function(r,e,n,i,o,a,u){if(!t.abal.isSubfield(r,e.set))throw new Error('The "base" must be a subfield of the "extension".');var s=void 0===n||void 0===i||void 0===o||void 0===a||void 0===u?function(){if(!r.set.id)throw new Error('The "set" property of the "base" must have a valid "id" property, or you must input "degree", "basis", "isFinite", "isSimple", and "isAlgebraic" explicitly.');if("Q"===r.set.id&&"R"===e.set.id)return{degree:1/0,basis:[],isFinite:!1,isSimple:!1,isAlgebraic:!1};if("R"===r.set.id&&"C"===e.set.id)return{degree:2,basis:[t.vect.init(1,0),t.vect.init(0,1)],isFinite:!0,isSimple:!0,isAlgebraic:!0};throw new Error('Automatic configuration of the "degree", "basis", "isFinite", "isSimple", and "isAlgebraic" properties is not available for the inputted "base".')}():{degree:n,basis:i,isFinite:o,isSimple:a,isAlgebraic:u};return{base:r,extension:e,degree:s.degree,basis:s.basis,isFinite:s.isFinite,isSimple:s.isSimple,isAlgebraic:s.isAlgebraic}},n.GL=function(r){return{contains:function(e){return Array.isArray(e)&&t.matr.isSizeOf(e,r)&&t.matr.isInvertible(e)},id:"GL".concat(r)}},n.group=function(r,e,n,i){var o={addition:{Z:function(t,r){return t+r},Q:function(t,r){return t+r},R:function(t,r){return t+r},C:t.comp.add,M:t.matr.add},multiplication:{Z:function(t,r){return t*r},Q:function(t,r){return t*r},R:function(t,r){return t*r},C:t.comp.mul,M:t.matr.mul}},a="string"==typeof r&&"function"==typeof t.abal[r]?t.abal[r]():r,u="string"==typeof e&&a.id?o[e][a.id]:e;if(!u)throw new Error('Preset operation "'.concat(e,'" is not defined for set "').concat(a.id,'".'));if(!u)throw new Error('Preset operation "'.concat(e,'" is not defined for set "').concat(a.id,'".'));var s=void 0===n||void 0===i?function(){if(!a.id)throw new Error('The "set" must have a valid "id" property, or you must input "identity" and "inverter" explicitly.');if("Z"===a.id||"Q"===a.id||"R"===a.id)return{identity:0,inverter:function(t){return-t}};if("C"===a.id)return{identity:t.comp.init(0,0),inverter:function(r){return t.comp.negate(r)}};if(a.id.startsWith("Z")&&a.id.length>1){var r=parseInt(a.id.slice(1),10);return{identity:0,inverter:function(t){return(r-t%r)%r}}}if(a.id.startsWith("C")&&a.id.length>1)return{identity:t.comp.init(1,0),inverter:function(r){return t.comp.conjugate(r)}};if(a.id.startsWith("M(")){var e=a.rows,n=a.cols;return{identity:t.matr.fill(0,e,n),inverter:function(r){return t.matr.negate(r)}}}if(a.id.startsWith("GL")){var i=parseInt(a.id.slice(2),10);return{identity:t.matr.identity(i),inverter:function(r){return t.matr.invert(r)}}}if(a.id.match(/^[SA]\d+$/)){i=parseInt(a.id.slice(1),10);return{identity:Array.from({length:i},(function(t,r){return r})),inverter:function(t){for(var r=t,e=new Array(r.length),n=0;n<r.length;n++)e[r[n]]=n;return e}}}throw new Error('Automatic configuration of the "identity" and "inverter" properties is not available for the inputted "set".')}():{identity:n,inverter:i},c={set:a,operation:u,identity:s.identity,inverter:s.inverter};if(!t.abal.isGroup(c))throw new Error('The inputted "set", "operation", "identity", and "inverter" do not form a group.');return c},n.homomorphism=function(r,e,n){var i={struc1:r,struc2:e,mapping:n};if(!t.abal.isHomomorphism(i))throw new Error('The inputted "struc1", "struc2", and "mapping" do not form a homomorphism.');return i},n.idmorphism=function(r){return t.abal.automorphism(r,(function(t){return t}))},n.image=function(r,e){var n=r.struc1,o=r.mapping;if(!n.set.elements)throw new Error('The domain of the "morph" must have a finite set of elements to calculate the image.');var a=e||n.set;if(!a.elements)throw new Error('The domain of the "morph" or the subset of it must have a finite set of elements to calculate the image.');var u=a.elements.map(o),s=Array.from(new Set(u.map((function(t){return i(t)})))).map((function(t){return JSON.parse(t)}));return t.abal.set(s)},n.intersection=function(r,e){var n=(r.elements||[]).filter((function(t){return e.contains(t)}));return t.abal.set(n)},n.invmorphism=function(r){if(r.struc1.set.id&&["Z","Q","R","C"].includes(r.struc1.set.id))throw new Error("Inverse morphisms cannot be defined for morphisms with infinite domains.");if(!t.abal.isIsomorphism(r))throw new Error("The morphism is not an isomorphism, so it does not have an inverse.");return t.abal.homomorphism(r.struc2,r.struc1,(function(t){for(var e=0,n=r.struc1.set.elements||[];e<n.length;e++){var o=n[e];if(i(r.mapping(o))===i(t))return o}throw new Error('The inverse morphism failed to be defined because no element in the domain maps to the element "'.concat(i(t),'" in the codomain.'))}))},n.isAutomorphism=function(r){return t.abal.isHomomorphism(r)&&t.abal.isEndomorphism(r)&&t.abal.isIsomorphism(r)},n.isBijective=function(r){return["Z","Q","R","C"].includes(r.struc1.set.id||"")||["Z","Q","R","C"].includes(r.struc2.set.id||"")?r.struc1.set.id===r.struc2.set.id:t.abal.isInjective(r)&&t.abal.isSurjective(r)},n.isClosed=function(r,e){var n;if("string"!=typeof r&&r.id&&["Z","Q","R","C"].includes(r.id))return"addition"===e||"multiplication"===e;var i={addition:{Z:function(t,r){return t+r},Q:function(t,r){return t+r},R:function(t,r){return t+r},C:t.comp.add,M:t.matr.add},multiplication:{Z:function(t,r){return t*r},Q:function(t,r){return t*r},R:function(t,r){return t*r},C:t.comp.mul,M:t.matr.mul}},o="string"==typeof r&&r in t.abal&&"function"==typeof t.abal[r]?Object.prototype.hasOwnProperty.call(t.abal,r)&&"function"==typeof t.abal[r]?t.abal[r]():void 0:r;if(!o||"object"!=typeof o)throw new Error('The "set" must have a valid "id" property or be resolvable from a string.');var a="string"==typeof e&&"string"!=typeof o&&o.id&&e in i&&o.id in i[e]?i[e][o.id]:e;if(!a)throw new Error('Preset operation "'.concat(e,'" is not defined for set "').concat(o.id,'".'));if("Z"===o.id||"Q"===o.id||"R"===o.id)return a===i.addition[o.id]||a===i.multiplication[o.id];if("C"===o.id)return a===t.comp.add||a===t.comp.mul;if(null===(n=o.id)||void 0===n?void 0:n.startsWith("M(")){var u=o.rows,s=o.cols;return a===t.matr.add||a===t.matr.mul&&u===s}if("object"==typeof o&&"elements"in o&&o.elements)for(var c=0,f=o.elements;c<f.length;c++)for(var l=f[c],m=0,d=o.elements;m<d.length;m++){var p=d[m];if("function"==typeof a){var h=a(l,p);if(o.contains(h))continue;return!1}return!1}return!0},n.isCommutative=function(t){var r=t.set;if(r.id&&["Z","Q","R","C"].includes(r.id))return!0;if(!r.elements)return!1;if("operation"in t&&t.operation){for(var e=t.operation,n=0,o=r.elements;n<o.length;n++)for(var a=o[n],u=0,s=r.elements;u<s.length;u++){var c=s[u];if(i(e(a,c))!==i(e(c,a)))return!1}return!0}if("add"in t&&"mul"in t&&t.add&&t.mul){for(var f=t.add,l=t.mul,m=0,d=r.elements;m<d.length;m++){a=d[m];for(var p=0,h=r.elements;p<h.length;p++){c=h[p];if(i(f(a,c))!==i(f(c,a)))return!1}}if("mulIdentity"in t)for(var v=0,y=r.elements;v<y.length;v++){a=y[v];for(var b=0,g=r.elements;b<g.length;b++){c=g[b];if(i(l(a,c))!==i(l(c,a)))return!1}}return!0}return!1},n.isCyclicSubgroup=function(r,e){if(!t.abal.isSubgroup(r,e)||!r.operation)return!1;for(var n=r.operation,i=0,o=e.elements||[];i<o.length;i++){var a=o[i],u=[],s=a;do{u.push(s),s=n(s,a)}while(!u.includes(s));var c=t.abal.set(u);if(t.abal.isSubset(e,c))return!0}return!1},n.isEmpty=function(t){var r="set"in t&&t.set?t.set.id:"id"in t?t.id:void 0;return"Z"!==r&&"Q"!==r&&"R"!==r&&"C"!==r&&!(null==r?void 0:r.startsWith("M("))&&("elements"in t&&t.elements?0===t.elements.length:!("set"in t)||!t.set.elements||0===t.set.elements.length)},n.isEndomorphism=function(r){return t.abal.isHomomorphism(r)&&t.abal.isEqual(r.struc1,r.struc2)},n.isEqual=function(r,e){if(r.constructor!==e.constructor)return!1;if("elements"in r&&"elements"in e){if("id"in r&&"id"in e&&r.id===e.id)return!0;var n=r.elements||[],i=e.elements||[];return n.length===i.length&&(n.every((function(t){return e.contains(t)}))&&i.every((function(t){return r.contains(t)})))}if("operation"in r&&"operation"in e){var o=r,a=e;return t.abal.isEqual(o.set,a.set)&&o.identity===a.identity&&(o.operation===a.operation||o.operation.toString()===a.operation.toString())&&(o.inverter===a.inverter||o.inverter.toString()===a.inverter.toString())}if("add"in r&&"add"in e&&"mul"in r&&"mul"in e){var u=r,s=e;return t.abal.isEqual(u.set,s.set)&&u.addIdentity===s.addIdentity&&u.mulIdentity===s.mulIdentity&&(u.add===s.add||u.add.toString()===s.add.toString())&&(u.mul===s.mul||u.mul.toString()===s.mul.toString())&&(u.addInverter===s.addInverter||u.addInverter.toString()===s.addInverter.toString())}if("mulInverter"in r&&"mulInverter"in e){var c=r,f=e;return t.abal.isEqual(c.set,f.set)&&c.addIdentity===f.addIdentity&&c.mulIdentity===f.mulIdentity&&(c.add===f.add||c.add.toString()===f.add.toString())&&(c.mul===f.mul||c.mul.toString()===f.mul.toString())&&(c.addInverter===f.addInverter||c.addInverter.toString()===f.addInverter.toString())&&(c.mulInverter===f.mulInverter||c.mulInverter.toString()===f.mulInverter.toString())}if("mapping"in r&&"mapping"in e){var l=r,m=e;return t.abal.isEqual(l.struc1,m.struc1)&&t.abal.isEqual(l.struc2,m.struc2)&&(l.mapping===m.mapping||l.mapping.toString()===m.mapping.toString()||t.abal.isEqual(t.abal.image(l),t.abal.image(m))&&t.abal.isEqual(t.abal.preimage(l),t.abal.preimage(m))&&t.abal.isEqual(t.abal.kernel(l),t.abal.kernel(m)))}return!1},n.isExact=function(r,e){return t.abal.isEqual(t.abal.image(r),t.abal.kernel(e))},n.isField=function(r){var e=r.set,n=r.add,o=r.mul,a=r.addIdentity,u=r.mulIdentity,s=r.addInverter,c=r.mulInverter;if("Q"===e.id||"R"===e.id||"C"===e.id)return!0;if(void 0===n||void 0===o||void 0===a||void 0===u||void 0===s||void 0===c)return!1;var f={set:e,operation:n,identity:a,inverter:s};if(!t.abal.isGroup(f)||!t.abal.isCommutative(f))return!1;if(!t.abal.isClosed(e,o))return!1;for(var l=0,m=e.elements||[];l<m.length;l++)for(var d=m[l],p=0,h=e.elements||[];p<h.length;p++)for(var v=h[p],y=0,b=e.elements||[];y<b.length;y++){var g=b[y];if(i(o(o(d,v),g))!==i(o(d,o(v,g))))return!1}for(var x=0,w=e.elements||[];x<w.length;x++){if((d=w[x])!==a&&(!e.contains(c(d))||i(o(d,c(d)))!==i(u)))return!1}if(!t.abal.isCommutative(r))return!1;for(var z=0,S=r.set.elements||[];z<S.length;z++){d=S[z];for(var M=0,E=r.set.elements||[];M<E.length;M++){v=E[M];for(var A=0,O=r.set.elements||[];A<O.length;A++){g=O[A];if(i(r.mul(d,r.add(v,g)))!==i(r.add(r.mul(d,v),r.mul(d,g))))return!1}}}return!0},n.isGroup=function(r){var e=r.set,n=r.operation,o=r.identity,a=r.inverter;if("Z"===e.id||"Q"===e.id||"R"===e.id||"C"===e.id||"GL"===e.id)return!0;if(void 0===e.elements)return!1;if(void 0===n||void 0===o||void 0===a)return!1;if(!t.abal.isClosed(e,n))return!1;for(var u=0,s=e.elements;u<s.length;u++){var c=s[u];if(i(n(c,o))!==i(c)||i(n(o,c))!==i(c))return!1}for(var f=0,l=e.elements;f<l.length;f++){c=l[f];if(!e.contains(a(c))||i(n(c,a(c)))!==i(o))return!1}for(var m=0,d=e.elements;m<d.length;m++){c=d[m];for(var p=0,h=e.elements;p<h.length;p++)for(var v=h[p],y=0,b=e.elements;y<b.length;y++){var g=b[y];if(i(n(n(c,v),g))!==i(n(c,n(v,g))))return!1}}return!0},n.isHomomorphism=function(t){var r=t.struc1,e=t.struc2,n=t.mapping;if("operation"in r&&"operation"in e&&r.operation&&e.operation){for(var o=r.operation,a=e.operation,u=0,s=r.set.elements||[];u<s.length;u++)for(var c=s[u],f=0,l=r.set.elements||[];f<l.length;f++){var m=l[f];if(i(a(n(c),n(m)))!==i(n(o(c,m))))return!1}return!0}if("add"in r&&"add"in e&&"mul"in r&&"mul"in e&&r.add&&e.add&&r.mul&&e.mul){for(var d=r.add,p=r.mul,h=e.add,v=e.mul,y=0,b=r.set.elements||[];y<b.length;y++){c=b[y];for(var g=0,x=r.set.elements||[];g<x.length;g++){m=x[g];if(i(h(n(c),n(m)))!==i(n(d(c,m))))return!1;if(i(v(n(c),n(m)))!==i(n(p(c,m))))return!1}}return!0}throw new Error("The algebraic structures of the homomorphism may have missing operations or incompatible types.")},n.isIdeal=function(r,e){var n=r.add,i=r.mul,o=r.addIdentity,a=r.addInverter;if(void 0===n||void 0===i||void 0===o||void 0===a)return!1;if(!t.abal.isClosed(e,n))return!1;if(!e.contains(o))return!1;for(var u=0,s=e.elements||[];u<s.length;u++){var c=s[u];if(!e.contains(a(c)))return!1}for(var f=0,l=r.set.elements||[];f<l.length;f++)for(var m=l[f],d=0,p=e.elements||[];d<p.length;d++){c=p[d];if(!e.contains(i(m,c))||!e.contains(i(c,m)))return!1}return!0},n.isIdentity=function(t,r,e){var n,i;return void 0===e&&(e="add"),"add"===e&&t.add&&t.addIdentity?"add"in t&&t.add(r,t.addIdentity)===r&&t.add(t.addIdentity,r)===r:!("mul"!==e||!t.mul||!t.mulIdentity)&&("mul"in t&&"mulIdentity"in t&&(null===(n=t.mul)||void 0===n?void 0:n.call(t,r,t.mulIdentity))===r&&(null===(i=t.mul)||void 0===i?void 0:i.call(t,t.mulIdentity,r))===r)},n.isInjective=function(t){if(["Z","Q","R","C"].includes(t.struc1.set.id||"")||["Z","Q","R","C"].includes(t.struc2.set.id||""))return t.struc1.set.id===t.struc2.set.id;var r=t.struc1,e=t.mapping,n=r.set.elements||[],o=n.map(e);return new Set(o.map((function(t){return i(t)}))).size===n.length},n.isInverse=function(t,r,e,n){var i,o,a,u;return void 0===n&&(n="add"),"add"===n?"add"in t&&(null===(i=t.add)||void 0===i?void 0:i.call(t,r,e))===t.addIdentity&&(null===(o=t.add)||void 0===o?void 0:o.call(t,e,r))===t.addIdentity:"mul"===n&&"mul"in t&&"mulIdentity"in t&&((null===(a=t.mul)||void 0===a?void 0:a.call(t,r,e))===t.mulIdentity&&(null===(u=t.mul)||void 0===u?void 0:u.call(t,e,r))===t.mulIdentity)},n.isIsomorphism=function(r){return t.abal.isHomomorphism(r)&&t.abal.isBijective(r)},n.isNormalSubgroup=function(r,e){var n=r.set,i=r.operation,o=r.inverter;if(!i||!o)return!1;if(!t.abal.isSubgroup(r,e))return!1;for(var a=0,u=n.elements||[];a<u.length;a++)for(var s=u[a],c=0,f=e.elements||[];c<f.length;c++){var l=i(i(s,f[c]),o(s));if(!e.contains(l))return!1}return!0},n.isomorphism=function(r,e,n){var i=t.abal.homomorphism(r,e,n);if(!t.abal.isHomomorphism(i))throw new Error("The mapping is not a homomorphism, so it cannot be an isomorphism.");if(!t.abal.isBijective(i))throw new Error("The mapping is not bijective, so it cannot be an isomorphism.");return i},n.isPrincipalIdeal=function(r,e){for(var n=0,i=e.elements||[];n<i.length;n++){var o=i[n],a=t.abal.principalIdeal(r,o);if(t.abal.isSubset(e,a)&&t.abal.isSubset(a,e))return!0}return!1},n.isRing=function(r){var e=r.set,n=r.add,o=r.mul,a=r.addIdentity,u=r.addInverter;if("Z"===e.id||"Q"===e.id||"R"===e.id||"C"===e.id)return!0;if(void 0===n||void 0===o||void 0===a||void 0===u)return!1;var s={set:e,operation:n,identity:a,inverter:u};if(!t.abal.isGroup(s)||!t.abal.isCommutative(s))return!1;if(!t.abal.isClosed(e,o))return!1;for(var c=0,f=e.elements||[];c<f.length;c++)for(var l=f[c],m=0,d=e.elements||[];m<d.length;m++)for(var p=d[m],h=0,v=e.elements||[];h<v.length;h++){var y=v[h];if(i(o(o(l,p),y))!==i(o(l,o(p,y))))return!1}return!0},n.isSubfield=function(r,e){var n=r.add,o=r.mul,a=r.addIdentity,u=r.mulIdentity,s=r.addInverter,c=r.mulInverter;if(void 0===n||void 0===o||void 0===a||void 0===u||void 0===s||void 0===c)return!1;if(!e.contains(a)||!e.contains(u))return!1;if(!t.abal.isClosed(e,n)||!t.abal.isClosed(e,o))return!1;for(var f=0,l=e.elements||[];f<l.length;f++){var m=l[f];if(!e.contains(s(m)))return!1}for(var d=0,p=e.elements||[];d<p.length;d++){m=p[d];if(i(m)!==i(a)&&!e.contains(c(m)))return!1}return!0},n.isSubgroup=function(r,e){var n=r.operation,i=r.identity,o=r.inverter;if(void 0===n||void 0===i||void 0===o)return!1;if(!e.contains(i))return!1;if(!t.abal.isClosed(e,n))return!1;for(var a=0,u=e.elements||[];a<u.length;a++){var s=u[a];if(!e.contains(o(s)))return!1}return!0},n.isSubring=function(r,e){var n=r.add,i=r.mul,o=r.addIdentity,a=r.addInverter;if(void 0===n||void 0===i||void 0===o||void 0===a)return!1;if(!e.contains(o))return!1;if(!t.abal.isClosed(e,n)||!t.abal.isClosed(e,i))return!1;for(var u=0,s=e.elements||[];u<s.length;u++){var c=s[u];if(!e.contains(a(c)))return!1}return!0},n.isSubset=function(t,r){return(t.elements||[]).every((function(t){return r.contains(t)}))},n.isSuperset=function(r,e){return t.abal.isSubset(e,r)},n.isSurjective=function(t){var r=t.struc1,e=t.struc2,n=t.mapping;if(["Z","Q","R","C","P"].includes(e.set.id||""))return!("C"!==e.set.id||!["R","C"].includes(r.set.id||""))||("R"!==e.set.id||"Q"!==r.set.id)&&r.set.id===e.set.id;var o=r.set.elements||[],a=e.set.elements||[],u=o.map(n);return a.every((function(t){return u.some((function(r){return i(r)===i(t)}))}))},n.kernel=function(r,e){var n=r.struc1,o=r.struc2,a=r.mapping;if(!n.set.elements)throw new Error('The domain of the "morph" must have a finite set of elements to calculate the kernel.');var u,s=(null==e?void 0:e.elements)||n.set.elements;if("identity"in o)u=o.identity;else{if(!("addIdentity"in o))throw new Error('The codomain of the "morph" must have an identity element to calculate the kernel.');u=o.addIdentity}var c=s.filter((function(t){return i(a(t))===i(u)}));return t.abal.set(c)},n.Lagrange=function(r,e){if(r.set.id&&["Z","Q","R","C"].includes(r.set.id))throw new Error("Lagrange's Theorem only applies to finite groups");return t.abal.cardinality(r)%t.abal.cardinality(e)==0},n.M=function(r,e){return void 0===e&&(e=r),{contains:function(n){return Array.isArray(n)&&t.matr.isSizeOf(n,r,e)},id:"M(".concat(r,", ").concat(e,")")}},n.N=function(){return{contains:function(t){return Number.isInteger(t)&&t>0},id:"N"}},n.order=function(t,r){var e;if(!t.operation)throw new Error('The "group" must have an "operation" property to calculate the order of an element.');for(var n=1,o=r;i(o)!==i(t.identity);)if(o=t.operation(o,r),++n>((null===(e=t.set.elements)||void 0===e?void 0:e.length)||1/0))throw new Error('The "group" might not be finite because an infinite loop was detected.');return n},n.P=function(){return{contains:function(r){return t.numb.isPrime(r)},id:"P"}},n.powerSet=function(r){for(var e=[],n=r.elements||[],i=1<<n.length,o=0;o<i;o++){for(var a=[],u=0;u<n.length;u++)o&1<<u&&a.push(n[u]);e.push(t.abal.set(a))}return t.abal.set(e)},n.preimage=function(r,e){var n=r.struc1,i=r.struc2,o=r.mapping;if(!n.set.elements)throw new Error('The domain of the "morph" must have a finite set of elements to calculate the preimage.');var a=e||i.set;if(!a.elements)throw new Error('The codomain of the "morph" or the subset of it must have a finite set of elements to calculate the preimage.');var u=n.set.elements.filter((function(t){return a.contains(o(t))}));return t.abal.set(u)},n.principalIdeal=function(r,e){if(r.set.id&&["Z","Q","R","C"].includes(r.set.id))throw new Error('The "ring" must be finite.');var n=[],i=r.mul,o=r.add;if(!o||!i)throw new Error('The "ring" must have "mul" and "add" properties to generate a principal ideal.');for(var a=0,u=r.set.elements||[];a<u.length;a++){var s=u[a],c=i(e,s),f=i(s,e);n.includes(c)||n.push(c),n.includes(f)||n.push(f)}for(var l=0;l<n.length;l++)for(var m=0;m<n.length;m++){var d=o(n[l],n[m]);n.includes(d)||n.push(d)}return t.abal.set(n)},n.print=function(r){console.log(t.abal.toString(r))},n.Q=function(){return{contains:function(r){return Number.isFinite(r)&&t.numb.isRational(r)},id:"Q"}},n.quotient=function(e,n){if("operation"in e&&!t.abal.isNormalSubgroup(e,n.set))throw new Error('The "substruc" must be a normal subgroup of the "struc".');if("add"in e&&!t.abal.isIdeal(e,n.set))throw new Error('The "substruc" must be an ideal of the "struc".');var i=t.abal.coset(e,n),o=function(t,r,e){var n=e(t.elements[0],r.elements[0]);return i.elements.find((function(t){return t.contains(n)}))};return r({set:i},"operation"in e?{operation:function(t,r){return o(t,r,e.operation)},identity:i.elements.find((function(t){return t.contains(e.identity)})),inverter:function(t){return o(t,t,(function(t){return e.inverter(t)}))}}:{add:function(t,r){return o(t,r,e.add)},mul:function(t,r){return o(t,r,e.mul)},addIdentity:i.elements.find((function(t){return t.contains(e.addIdentity)})),addInverter:function(t){return o(t,t,(function(t){return e.addInverter(t)}))}})},n.R=function(){return{contains:function(t){return Number.isFinite(t)},id:"R"}},n.ring=function(r,e,n,i,o,a){var u,s,c={addition:{Z:function(t,r){return t+r},Q:function(t,r){return t+r},R:function(t,r){return t+r},C:t.comp.add,M:t.matr.add},multiplication:{Z:function(t,r){return t*r},Q:function(t,r){return t*r},R:function(t,r){return t*r},C:t.comp.mul,M:t.matr.mul}},f="string"==typeof r&&"function"==typeof t.abal[r]?t.abal[r]():r,l="string"==typeof e?c[e].addition||c[e][null!==(u=f.id)&&void 0!==u?u:""]:e,m="string"==typeof n?c[n].multiplication||c[n][null!==(s=f.id)&&void 0!==s?s:""]:n;if(!l||!m)throw new Error('Preset operations "'.concat(e,'" or "').concat(n,'" are not defined for set "').concat(f.id,'".'));var d=void 0===i||void 0===o||void 0===a?function(){if(!f.id)throw new Error('The "set" must have a valid "id" property, or you must input "addIdentity", "mulIdentity", and "addInverter" explicitly.');if("Z"===f.id||"Q"===f.id||"R"===f.id)return{addIdentity:0,mulIdentity:1,addInverter:function(t){return-t}};if("C"===f.id)return{addIdentity:t.comp.init(0,0),mulIdentity:t.comp.init(1,0),addInverter:function(r){return t.comp.negate(r)}};if(f.id.startsWith("Z")&&f.id.length>1){var r=parseInt(f.id.slice(1),10);if(isNaN(r)||r<=0)throw new Error('Invalid modulus in set "'.concat(f.id,'".'));return{addIdentity:0,mulIdentity:1,addInverter:function(t){return(r-t%r)%r}}}if(f.id.startsWith("M(")){var e=f.rows,n=f.cols;if(e!==n)throw new Error("Only square matrices can form a ring.");return{addIdentity:t.matr.fill(0,e,n),mulIdentity:t.matr.identity(e),addInverter:function(r){return t.matr.negate(r)}}}throw new Error('Automatic configuration of the "addIdentity", "mulIdentity", and "addInverter" properties is not available for the inputted "set".')}():{addIdentity:i,mulIdentity:o,addInverter:a},p={set:f,add:l,mul:m,addIdentity:d.addIdentity,mulIdentity:d.mulIdentity,addInverter:d.addInverter};if(!t.abal.isRing(p))throw new Error('The inputted "set", "add", "mul", "addIdentity", "mulIdentity", and "addInverter" do not form a ring.');return p},n.ringExtension=function(r,e,n,i,o,a,u){if(!t.abal.isSubring(r,e.set))throw new Error('The "base" must be a subring of the "extension".');var s=void 0===n||void 0===i||void 0===o||void 0===a||void 0===u?function(){if(!r.set.id)throw new Error('The "set" property of the "base" must have a valid "id" property, or you must input "degree", "basis", "isFinite", "isSimple", and "isAlgebraic" explicitly.');if("Z"===r.set.id&&"Q"===e.set.id)return{degree:1/0,basis:[],isFinite:!1,isSimple:!1,isAlgebraic:!1};if("Q"===r.set.id&&"R"===e.set.id)return{degree:1/0,basis:[],isFinite:!1,isSimple:!1,isAlgebraic:!1};if("R"===r.set.id&&"C"===e.set.id)return{degree:2,basis:[t.vect.init(1,0),t.vect.init(0,1)],isFinite:!0,isSimple:!0,isAlgebraic:!0};throw new Error('Automatic configuration of the "degree", "basis", "isFinite", "isSimple", and "isAlgebraic" properties is not available for the inputted "base".')}():{degree:n,basis:i,isFinite:o,isSimple:a,isAlgebraic:u};return{base:r,extension:e,degree:s.degree,basis:s.basis,isFinite:s.isFinite,isSimple:s.isSimple,isAlgebraic:s.isAlgebraic}},n.S=function(t){if(!Number.isInteger(t)||t<=0)throw new Error('The parameter "n" must be a positive integer.');var r=function(t){if(0===t.length)return[[]];for(var n=[],i=0;i<t.length;i++)for(var o=e(e([],t.slice(0,i),!0),t.slice(i+1),!0),a=0,u=r(o);a<u.length;a++){var s=u[a];n.push(e([t[i]],s,!0))}return n},n=r(Array.from({length:t},(function(t,r){return r})));return{contains:function(t){return n.some((function(r){return i(r)===i(t)}))},elements:n,id:"S".concat(t)}},n.set=function(r){var e=t.stat.unique(r);return{contains:function(t){return e.some((function(r){return i(r)===i(t)}))},elements:e}},n.symmetricDifference=function(r,n){var i=t.abal.difference(r,n).elements||[],o=t.abal.difference(n,r).elements||[];return t.abal.set(e(e([],i,!0),o,!0))},n.toArray=function(t){var r="set"in t?t.set:t;if(!r.elements)throw new Error("Cannot convert infinite set to array.");return e([],r.elements,!0)},n.toMatrix=function(r,e,n){void 0===n&&(n=e);var i="set"in r?r.set:r;if(!i.elements)throw new Error("Cannot convert infinite set to matrix.");return t.stat.toMatrix(i.elements,e,n)},n.toObject=function(r){var e="set"in r?r.set:r;if(!e.elements)throw new Error("Cannot convert infinite set to object.");return t.stat.toObject(e.elements)},n.toString=function(r){var e="set"in r?r.set:r;if(!e.elements)throw new Error("Cannot convert infinite set to string.");return t.stat.toString(e.elements)},n.toTensor=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a="set"in r?r.set:r;if(!a.elements)throw new Error("Cannot convert infinite set to tensor.");return Array.isArray(i[0])&&(i=i[0]),(n=t.tens).resize.apply(n,e([a.elements],i,!1))},n.toVector=function(r,e,n){void 0===n&&(n=0);var i="set"in r?r.set.elements:r.elements;if(!i)throw new Error("Cannot convert infinite set to vector.");if(2===e)return t.vect.init(i[n],i[n+1]);if(3===e)return t.vect.init(i[n],i[n+1],i[n+2]);if(4===e)return t.vect.init(i[n],i[n+1],i[n+2],i[n+3]);throw new RangeError('Parameter "dimension" must be 2, 3, or 4.')},n.union=function(r,n){var i=Array.from(new Set(e(e([],r.elements||[],!0),n.elements||[],!0)));return t.abal.set(i)},n.Z=function(t){if(void 0===t)return{contains:function(t){return Number.isInteger(t)},id:"Z"};if(!Number.isInteger(t)||t<=0)throw new Error('The modulus "n" must be a positive integer.');return{contains:function(r){return Number.isInteger(r)&&r>=0&&r<t},elements:Array.from({length:t},(function(t,r){return r})),id:"Z".concat(t)}}}(t.abal||(t.abal={}))}(t||(t={})),function(t){!function(n){var i=function(t){return"boolean"===o?t:t?1:0};n.AND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=!0,n=0;n<t.length;n++){var o=!0===t[n]||1===t[n];if(!o){e=!1;break}}return i(e)},n.BICOND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)return i(!0);for(var e=!0===t[0]||1===t[0],n=1;n<t.length;n++){var o=!0===t[n]||1===t[n];if(e!==o)return i(!1)}return i(!0)},n.COND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<2)return i(!0);for(var e=0;e<t.length-1;e++){var n=!0===t[e]||1===t[e],o=!0===t[e+1]||1===t[e+1];if(n&&!o)return i(!1)}return i(!0)},n.CONV=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<2)return i(!0);for(var e=0;e<t.length-1;e++){var n=!0===t[e]||1===t[e],o=!0===t[e+1]||1===t[e+1];if(o&&!n)return i(!1)}return i(!0)},n.isEqual=function(n,o){var a=[],u=function(r){var e=t.bool.parse(r,{},!0),n=function(t){"var"!==t.type||a.includes(t.name)?"not"===t.type?n(t.expr):"and"!==t.type&&"or"!==t.type||(n(t.left),n(t.right)):a.push(t.name)};n(e)};u(n),u(o);for(var s=function(t,n,i){var o,a;if(void 0===n&&(n=0),void 0===i&&(i={}),n>=t.length)return[i];var u=r(r({},i),((o={})[t[n]]=!0,o)),c=r(r({},i),((a={})[t[n]]=!1,a));return e(e([],s(t,n+1,u),!0),s(t,n+1,c),!0)},c=0,f=s(a);c<f.length;c++){var l=f[c];if(t.bool.parse(n,l)!==t.bool.parse(o,l))return i(!1)}return i(!0)},n.Karnaugh=function(r,e){var n,o,a,u,s=e.length;if(2!==s&&3!==s&&4!==s)throw new Error("Chalkboard.bool.Karnaugh only supports 2, 3, or 4 variables.");var c=function(t){if(0===t)return[""];for(var r=c(t-1),e=[],n=0,i=r;n<i.length;n++){var o=i[n];e.push("0"+o)}for(var a=0,u=r.slice().reverse();a<u.length;a++){o=u[a];e.push("1"+o)}return e};2===s?(n=[e[0]],o=[e[1]],a=c(1),u=c(1)):3===s?(n=[e[0]],o=e.slice(1),a=c(1),u=c(2)):(n=e.slice(0,2),o=e.slice(2),a=c(2),u=c(2));for(var f=[],l=0,m=a;l<m.length;l++){for(var d=m[l],p=[],h=0,v=u;h<v.length;h++){for(var y=v[h],b={},g=0;g<n.length;g++)b[n[g]]="1"===d[g];for(var x=0;x<o.length;x++)b[o[x]]="1"===y[x];var w=t.bool.parse(r,b),z=!0===w||1===w;p.push(i(z))}f.push(p)}return f},n.mapping=function(r,e){if(r.length!==e.length)throw new Error('Parameter "inputs" and "outputs" must have the same length.');if(0===r.length)throw new Error('Parameter "inputs" and "outputs" cannot be empty.');for(var n=r[0].length,o=e[0].length,a=0,u=r;a<u.length;a++){if((p=u[a]).length!==n)throw new Error('Parameter "inputs" must have the same length for each row.')}for(var s=0,c=e;s<c.length;s++){if((p=c[s]).length!==o)throw new Error('Parameter "outputs" must have the same length for each row.')}for(var f=Array.from({length:n},(function(t,r){return String.fromCharCode(97+r)})),l=[],m=0;m<o;m++){for(var d=[],p=0;p<r.length;p++)!0!==e[p][m]&&1!==e[p][m]||d.push(p);if(0!==d.length)if(d.length!==r.length){for(var h=[],v=0,y=d;v<y.length;v++){p=y[v];for(var b=[],g=0;g<n;g++){var x=!0===r[p][g]||1===r[p][g];b.push(x?f[g]:"!".concat(f[g]))}h.push("(".concat(b.join(" & "),")"))}var w=h.join(" | ");n<=4?l.push(t.bool.minimize(w,f)):l.push(w)}else l.push("true");else l.push("false")}return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length!==n)throw new Error("Expected ".concat(n," arguments, but got ").concat(r.length,"."));for(var o={},a=0;a<n;a++)o[f[a]]=r[a];return l.map((function(r){var e=t.bool.parse(r,o);return i(!0===e||1===e)}))}},n.minimize=function(r,e){if(0===e.length)return t.bool.parse(r,{})?"true":"false";if(2!==e.length&&3!==e.length&&4!==e.length)throw new Error("Chalkboard.bool.minimize only supports 2, 3, or 4 variables.");try{var n=t.bool.primeImplicants(r,e);return 0===n.length?"false":n.some((function(t){return"true"===t}))?"true":t.bool.parse(n.join(" | "))}catch(t){throw t instanceof Error?new Error("Error minimizing expression: ".concat(t.message)):new Error("Error minimizing expression: ".concat(String(t)))}};var o="boolean";n.modeConfig=function(t){if("boolean"!==t&&"binary"!==t)throw new Error('The mode must be either "boolean" or "binary".');o=t},n.NAND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=n.AND.apply(void 0,t);return i(!(!0===e||1===e))},n.NBICOND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=n.BICOND.apply(void 0,t);return i(!(!0===e||1===e))},n.NCOND=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<2)return i(!1);for(var e=0;e<t.length-1;e++){var n=!0===t[e]||1===t[e],o=!0===t[e+1]||1===t[e+1];if(!n||o)return i(!1)}return i(!0)},n.NCONV=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<2)return i(!1);for(var e=0;e<t.length-1;e++){var n=!0===t[e]||1===t[e],o=!0===t[e+1]||1===t[e+1];if(!o||n)return i(!1)}return i(!0)},n.NOR=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++){var n=!0===t[e]||1===t[e];if(n)return i(!1)}return i(!0)},n.NOT=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)return i(!0);for(var e=!0,n=0;n<t.length;n++){var o=!0===t[n]||1===t[n];e=e&&!o}return i(e)},n.OR=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=!1,n=0;n<t.length;n++){var o=!0===t[n]||1===t[n];if(o){e=!0;break}}return i(e)},n.parse=function(t,r,n){void 0===n&&(n=!1);var o=function(t,r){if(t.type!==r.type)return!1;switch(t.type){case"bool":return t.value===r.value;case"var":return t.name===r.name;case"not":return o(t.expr,r.expr);case"and":case"or":return o(t.left,r.left)&&o(t.right,r.right)}return!1},a=function(t){switch(t.type){case"bool":return t.value?"true":"false";case"var":return t.name;case"not":var r="var"===t.expr.type?a(t.expr):"(".concat(a(t.expr),")");return"!".concat(r);case"and":var e="or"===t.left.type?"(".concat(a(t.left),")"):a(t.left),n="or"===t.right.type?"(".concat(a(t.right),")"):a(t.right);return"".concat(e," & ").concat(n);case"or":return"".concat(a(t.left)," | ").concat(a(t.right))}return""},u=function(t){return"and"===t.type?e(e([],u(t.left),!0),u(t.right),!0):[t]},s=function(t,r){return!("not"!==t.type||"var"!==r.type||!o(t.expr,r))||!("not"!==r.type||"var"!==t.type||!o(r.expr,t))},c=function(t){switch(t.type){case"bool":case"var":return t;case"not":var r=c(t.expr);return"not"===r.type?c(r.expr):"bool"===r.type?{type:"bool",value:!r.value}:{type:"not",expr:r};case"and":var e=c(t.left),n=c(t.right);return"bool"===e.type&&!1===e.value||"bool"===n.type&&!1===n.value?{type:"bool",value:!1}:"bool"===e.type&&!0===e.value?n:"bool"===n.type&&!0===n.value||o(e,n)?e:"not"===e.type&&o(e.expr,n)||"not"===n.type&&o(n.expr,e)?{type:"bool",value:!1}:{type:"and",left:e,right:n};case"or":return function(t){if("or"!==t.type)return t;var r=c(t.left),e=c(t.right);if(s(r,e))return{type:"bool",value:!0};if("bool"===r.type&&!0===r.value)return{type:"bool",value:!0};if("bool"===e.type&&!0===e.value)return{type:"bool",value:!0};if("bool"===r.type&&!1===r.value)return e;if("bool"===e.type&&!1===e.value)return r;var n="and"===r.type?u(r):[r],i="and"===e.type?u(e):[e],a=[];n.forEach((function(t){i.some((function(r){return o(t,r)}))&&!a.some((function(r){return o(r,t)}))&&a.push(t)}));for(var f=0;f<n.length;f++)for(var l=0;l<i.length;l++)if(s(n[f],i[l]))return 0===a.length?{type:"bool",value:!0}:a.reduce((function(t,r){return{type:"and",left:t,right:r}}));if(a.length>0){var m=function(t){var r=t.filter((function(t){return!a.some((function(r){return o(r,t)}))}));return 0===r.length?{type:"bool",value:!0}:1===r.length?r[0]:r.reduce((function(t,r){return{type:"and",left:t,right:r}}))},d=m(n),p=m(i),h=void 0;return h="bool"===d.type&&!0===d.value||"bool"===p.type&&!0===p.value?{type:"bool",value:!0}:{type:"or",left:d,right:p},a.reduce((function(t,r){return{type:"and",left:t,right:r}}),h)}return{type:"or",left:r,right:e}}(t)}return t},f=function(t,r){switch(t.type){case"bool":return t.value;case"var":var e=t.name;if(!(e in r))throw new Error('Variable "'.concat(e,'" not defined in values'));var n=r[e];return!0===n||1===n;case"not":return!f(t.expr,r);case"and":return f(t.left,r)&&f(t.right,r);case"or":return f(t.left,r)||f(t.right,r)}throw new Error("Unknown node type: ".concat(t.type))};try{var l=function(t){var r=0,e=function(){return t[r]},n=function(e){if(e&&t[r]!==e)throw new Error("Expected token ".concat(e," but found ").concat(t[r]));return t[r++]},i=function(){return o()},o=function(){for(var t=a();"|"===e();)n("|"),t={type:"or",left:t,right:a()};return t},a=function(){for(var t=u();"&"===e();)n("&"),t={type:"and",left:t,right:u()};return t},u=function(){return"!"===e()?(n("!"),{type:"not",expr:u()}):s()},s=function(){var t=e();if("("===t){n("(");var r=i();return n(")"),r}return"true"===t?(n(),{type:"bool",value:!0}):"false"===t?(n(),{type:"bool",value:!1}):(n(),{type:"var",name:t})},c=i();if(r<t.length)throw new Error("Unexpected tokens at end");return c}(function(t){for(var r=[],e=0;e<t.length;){var n=t[e];if(/\s/.test(n))e++;else if(-1!=="!&|()".indexOf(n))r.push(n),e++;else{for(var i="";e<t.length&&/[a-zA-Z0-9_]/.test(t[e]);)i+=t[e++];r.push(i)}}return r}(t));if(r&&Object.keys(r).length>0)return i(f(l,r));var m=c(l);return n?m:a(m)}catch(t){throw t instanceof Error?new Error("Error parsing expression: ".concat(t.message)):new Error("Error parsing expression: ".concat(String(t)))}},n.primeImplicants=function(r,n){if(2!==n.length&&3!==n.length&&4!==n.length)throw new Error("Chalkboard.bool.primeImplicants only supports 2, 3, or 4 variables.");var i,o,a,u,s=t.bool.Karnaugh(r,n),c=function(t){if(0===t)return[""];for(var r=c(t-1),e=[],n=0,i=r;n<i.length;n++){var o=i[n];e.push("0"+o)}for(var a=0,u=r.slice().reverse();a<u.length;a++){o=u[a];e.push("1"+o)}return e};2===n.length?(i=1,o=1,a=[n[0]],u=[n[1]]):3===n.length?(i=1,o=2,a=[n[0]],u=n.slice(1)):(i=2,o=2,a=n.slice(0,2),u=n.slice(2));for(var f=c(i),l=c(o),m=[],d=0;d<f.length;d++)for(var p=0;p<l.length;p++)!0!==s[d][p]&&1!==s[d][p]||m.push({row:d,col:p,rowcode:f[d],colcode:l[p]});var h=function(t){var r=t.length;if(0!=(r&r-1))return!1;if(1===r)return!0;var e=new Set(t.map((function(t){return t.row}))).size,n=new Set(t.map((function(t){return t.col}))).size;if(!(r===(t.some((function(t){return 0===t.row}))&&t.some((function(t){return t.row===f.length-1}))?1:e)*(t.some((function(t){return 0===t.col}))&&t.some((function(t){return t.col===l.length-1}))?1:n)&&(1===r||2===r||4===r||8===r||16===r)))return!1;var i,o,a,u,s=new Set,c=[t[0]];for(s.add("".concat(t[0].row,",").concat(t[0].col));c.length>0;)for(var m=c.shift(),d=0,p=t;d<p.length;d++){var h=p[d],v="".concat(h.row,",").concat(h.col);!s.has(v)&&(o=h,a=void 0,u=void 0,a=(i=m).row===f.length-1&&0===o.row||o.row===f.length-1&&0===i.row?1:Math.abs(i.row-o.row),u=i.col===l.length-1&&0===o.col||o.col===l.length-1&&0===i.col?1:Math.abs(i.col-o.col),1===a&&0===u||0===a&&1===u)&&(s.add(v),c.push(h))}return s.size===r},v=function(){for(var r=[],i=t.stat.min([16,t.real.pow(2,n.length)]),o=0,a=m;o<a.length;o++){var u=a[o];r.push({cells:[u],size:1,term:""})}for(var s=function(t){for(var n=r.filter((function(r){return r.size===t/2})),i=0;i<n.length;i++)for(var o=i+1;o<n.length;o++){var a=n[i],u=n[o],s=e(e([],a.cells,!0),u.cells,!0);new Set(s.map((function(t){return"".concat(t.row,",").concat(t.col)}))).size===t&&h(s)&&r.push({cells:s,size:t,term:""})}},c=2;c<=i;c*=2)s(c);return r}(),y=[];v.sort((function(t,r){return r.size-t.size}));for(var b=new Set,g=0,x=v;g<x.length;g++){var w=x[g];w.cells.some((function(t){return!b.has("".concat(t.row,",").concat(t.col))}))&&(y.push(w),w.cells.forEach((function(t){return b.add("".concat(t.row,",").concat(t.col))})))}return y.forEach((function(t){var r={};n.forEach((function(t){r[t]=!0}));for(var e=function(e){var n=a[e];new Set(t.cells.map((function(t){return t.rowcode[e]}))).size>1&&(r[n]=!1)},i=0;i<a.length;i++)e(i);var o=function(e){var n=u[e];new Set(t.cells.map((function(t){return t.colcode[e]}))).size>1&&(r[n]=!1)};for(i=0;i<u.length;i++)o(i);for(var s=[],c=0,f=Object.entries(r);c<f.length;c++){var l=f[c],m=l[0];if(l[1]){var d=t.cells[0],p=void 0,h=a.indexOf(m);if(h>=0)p="1"===d.rowcode[h];else{var v=u.indexOf(m);p="1"===d.colcode[v]}s.push(p?m:"!".concat(m))}}t.term=s.length>0?s.join(" & "):"true"})),y.map((function(t){return t.term}))},n.toCNF=function(r){var e=t.bool.parse(r);if(e.includes(" & ")&&!e.includes(" | "))return e;var n=t.bool.parse(r,{},!0),i=function(t){switch(t.type){case"bool":case"var":return t;case"not":return"not"===t.expr.type?i(t.expr.expr):"and"===t.expr.type?i({type:"or",left:{type:"not",expr:t.expr.left},right:{type:"not",expr:t.expr.right}}):"or"===t.expr.type?i({type:"and",left:{type:"not",expr:t.expr.left},right:{type:"not",expr:t.expr.right}}):{type:"not",expr:i(t.expr)};case"and":return{type:"and",left:i(t.left),right:i(t.right)};case"or":var r=i(t.left),e=i(t.right);return"and"===e.type?i({type:"and",left:{type:"or",left:r,right:e.left},right:{type:"or",left:r,right:e.right}}):"and"===r.type?i({type:"and",left:{type:"or",left:r.left,right:e},right:{type:"or",left:r.right,right:e}}):{type:"or",left:r,right:e}}return t},o=i(n),a=function(t){switch(t.type){case"bool":return t.value?"true":"false";case"var":return t.name;case"not":var r="var"===t.expr.type?a(t.expr):"(".concat(a(t.expr),")");return"!".concat(r);case"and":return"".concat(a(t.left)," & ").concat(a(t.right));case"or":return"(".concat(a(t.left)," | ").concat(a(t.right),")")}return""};return a(o)},n.toDNF=function(r){var e=t.bool.parse(r);if(e.includes(" | ")&&!e.includes(" & "))return e;var n=t.bool.parse(r,{},!0),i=function(t){switch(t.type){case"bool":case"var":return t;case"not":return"not"===t.expr.type?i(t.expr.expr):"and"===t.expr.type?i({type:"or",left:{type:"not",expr:t.expr.left},right:{type:"not",expr:t.expr.right}}):"or"===t.expr.type?i({type:"and",left:{type:"not",expr:t.expr.left},right:{type:"not",expr:t.expr.right}}):{type:"not",expr:i(t.expr)};case"or":return{type:"or",left:i(t.left),right:i(t.right)};case"and":var r=i(t.left),e=i(t.right);return"or"===e.type?i({type:"or",left:{type:"and",left:r,right:e.left},right:{type:"and",left:r,right:e.right}}):"or"===r.type?i({type:"or",left:{type:"and",left:r.left,right:e},right:{type:"and",left:r.right,right:e}}):{type:"and",left:r,right:e}}return t},o=i(n),a=function(t){switch(t.type){case"bool":return t.value?"true":"false";case"var":return t.name;case"not":var r="var"===t.expr.type?a(t.expr):"(".concat(a(t.expr),")");return"!".concat(r);case"and":var e=a(t.left),n=a(t.right);return"(".concat(e," & ").concat(n,")");case"or":return"".concat(a(t.left)," | ").concat(a(t.right))}return""};return a(o)},n.truthTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=[],n=[!1,!0],o=0,a=n;o<a.length;o++)for(var u=a[o],s=0,c=n;s<c.length;s++){for(var f=c[s],l=[i(!0===u),i(!0===f)],m=0,d=t;m<d.length;m++){var p=d[m],h=p(u,f);l.push(i(!0===h||1===h))}e.push(l)}return e},n.XOR=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=0;n<t.length;n++){var o=!0===t[n]||1===t[n];o&&e++}return i(e%2==1)}}(t.bool||(t.bool={}))}(t||(t={})),function(t){!function(r){r.autocorrelation=function(r,e){return t.calc.correlation(r,r,e)},r.binormal=function(r,e){if("curv"===r.type)return r.definition.length,t.vect.cross(t.calc.tangent(r,e),t.calc.normal(r,e));throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv".')},r.convolution=function(r,e,n){return t.calc.fxdx(t.real.define("("+r.definition+") * ("+e.definition.replace(/x/g,"("+n+" - x)")+")"),-100,100)},r.correlation=function(r,e,n){return t.calc.fxdx(t.real.define("("+r.definition+") * ("+e.definition.replace(/x/g,"("+n+" + x)")+")"),-100,100)},r.curl=function(r,e){var n=1e-9;if(2===t.vect.dimension(r)&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var i=t.real.parse("(x, y) => "+r.p),o=t.real.parse("(x, y) => "+r.q),a=(i(e.x,e.y+n)-i(e.x,e.y))/n,u=(o(e.x+n,e.y)-o(e.x,e.y))/n;return t.vect.init(0,0,u-a)}if(3===t.vect.dimension(r)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z&&void 0===e.w){i=t.real.parse("(x, y, z) => "+r.p),o=t.real.parse("(x, y, z) => "+r.q);var s=t.real.parse("(x, y, z) => "+r.r),c=(a=(i(e.x,e.y+n,e.z)-i(e.x,e.y,e.z))/n,(i(e.x,e.y,e.z+n)-i(e.x,e.y,e.z))/n),f=(u=(o(e.x+n,e.y,e.z)-o(e.x,e.y,e.z))/n,(o(e.x,e.y,e.z+n)-o(e.x,e.y,e.z))/n),l=(s(e.x+n,e.y,e.z)-s(e.x,e.y,e.z))/n,m=(s(e.x,e.y+n,e.z)-s(e.x,e.y,e.z))/n;return t.vect.init(m-f,c-l,u-a)}throw new TypeError('Parameter "vectfield" must be of type "ChalkboardVectorField" with 2 or 3 dimensions.')},r.curvature=function(r,e){if("curv"===r.type){if(2===r.definition.length){var n=t.calc.dfdx(r,e).x,i=t.calc.dfdx(r,e).y,o=t.calc.d2fdx2(r,e).x,a=t.calc.d2fdx2(r,e).y;return Math.abs(n*a-i*o)/Math.sqrt((n*n+i*i)*(n*n+i*i)*(n*n+i*i))}return t.vect.mag(t.calc.normal(r,e))/t.vect.mag(t.calc.dfdx(r,e))}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv".')},r.dfdv=function(r,e,n){if("mult"===r.type)return t.vect.dot(t.calc.grad(r,e),t.vect.normalize(n));throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "mult".')},r.dfdx=function(r,e){var n,i=1e-9;if("expl"===r.type)return((n=t.real.parse("x => "+r.definition))(e+i)-n(e))/i;if("inve"===r.type)return((n=t.real.parse("y => "+r.definition))(e+i)-n(e))/i;if("pola"===r.type){var o=t.real.parse("O => "+r.definition);return(o(e+i)-o(e))/i}if("curv"===r.type){if(2===r.definition.length){var a=t.real.parse("t => "+r.definition[0]),u=t.real.parse("t => "+r.definition[1]);return t.vect.init((a(e+i)-a(e))/i,(u(e+i)-u(e))/i)}a=t.real.parse("t => "+r.definition[0]),u=t.real.parse("t => "+r.definition[1]);var s=t.real.parse("t => "+r.definition[2]);return t.vect.init((a(e+i)-a(e))/i,(u(e+i)-u(e))/i,(s(e+i)-s(e))/i)}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl", "inve", "pola", or "curv".')},r.d2fdx2=function(r,e){var n,i=1e-5;if("expl"===r.type)return((n=t.real.parse("x => "+r.definition))(e+i)-2*n(e)+n(e-i))/(i*i);if("inve"===r.type)return((n=t.real.parse("y => "+r.definition))(e+i)-2*n(e)+n(e-i))/(i*i);if("pola"===r.type){var o=t.real.parse("O => "+r.definition);return(o(e+i)-2*o(e)+o(e-i))/(i*i)}if("curv"===r.type){if(2===r.definition.length){var a=t.real.parse("t => "+r.definition[0]),u=t.real.parse("t => "+r.definition[1]);return t.vect.init((a(e+i)-2*a(e)+a(e-i))/(i*i),(u(e+i)-2*u(e)+u(e-i))/(i*i))}a=t.real.parse("t => "+r.definition[0]),u=t.real.parse("t => "+r.definition[1]);var s=t.real.parse("t => "+r.definition[2]);return t.vect.init((a(e+i)-2*a(e)+a(e-i))/(i*i),(u(e+i)-2*u(e)+u(e-i))/(i*i),(s(e+i)-2*s(e)+s(e-i))/(i*i))}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl", "inve", "pola", or "curv".')},r.dfdz=function(r,e){var n=1e-9;if("comp"===r.type){var i=t.comp.parse("(a, b) => "+r.definition[0]),o=t.comp.parse("(a, b) => "+r.definition[1]),a=(i(e.a+n,e.b)-i(e.a,e.b))/n,u=(i(e.a,e.b+n)-i(e.a,e.b))/n,s=(o(e.a+n,e.b)-o(e.a,e.b))/n,c=(o(e.a,e.b+n)-o(e.a,e.b))/n;return[t.comp.init(a,s),t.comp.init(u,c)]}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "comp".')},r.d2fdz2=function(r,e){var n=1e-5;if("comp"===r.type){var i=t.comp.parse("(a, b) => "+r.definition[0]),o=t.comp.parse("(a, b) => "+r.definition[1]),a=(i(e.a+n,e.b)-2*i(e.a,e.b)+i(e.a-n,e.b))/(n*n),u=(i(e.a,e.b+n)-2*i(e.a,e.b)+i(e.a,e.b-n))/(n*n),s=(o(e.a+n,e.b)-2*o(e.a,e.b)+o(e.a-n,e.b))/(n*n),c=(o(e.a,e.b+n)-2*o(e.a,e.b)+o(e.a,e.b-n))/(n*n);return[t.comp.init(a,s),t.comp.init(u,c)]}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "comp".')},r.dfrdt=function(r,e,n){if("mult"===r.type){if("curv"===e.type){if(2===e.definition.length){var i=t.calc.grad(r,t.real.val(e,n)).x,o=t.calc.grad(r,t.real.val(e,n)).y;return i*t.calc.dfdx(e,n).x+o*t.calc.dfdx(e,n).y}var a=t.calc.grad(r,t.real.val(e,n)).x,u=(o=t.calc.grad(r,t.real.val(e,n)).y,t.calc.grad(r,t.real.val(e,n)).z);return a*t.calc.dfdx(e,n).x+o*t.calc.dfdx(e,n).y+u*t.calc.dfdx(e,n).z}throw new TypeError('Parameter "func2" must be of type "ChalkboardFunction" with a "type" property of "curv".')}throw new TypeError('Parameter "func1" must be of type "ChalkboardFunction" with a "type" property of "mult".')},r.div=function(r,e){if(2===t.vect.dimension(r)||3===t.vect.dimension(r)||4===t.vect.dimension(r))return t.matr.trace(t.calc.grad(r,e));throw new TypeError('Parameter "vectfield" must be of type "ChalkboardVectorField" with 2, 3, or 4 dimensions.')},r.extrema=function(r,e){for(var n=[],i=e[0];i<=e[1];i++)0===Math.round(t.calc.dfdx(r,i))&&n.push(i);return n},r.fds=function(r,e,n,i,o){var a,u,s=0;if("curv"===r.type){var c=(n-e)/1e4;if(2===r.definition.length){for(var f=e;f<=n;f+=c)a=t.calc.dfdx(r,f),s+=t.vect.mag(a);return s*c}for(f=e;f<=n;f+=c)a=t.calc.dfdx(r,f),s+=t.vect.mag(a);return s*c}if("surf"===r.type){c=(n-e)/100;for(var l=(o-i)/100,m=i;m<=o;m+=l)for(f=e;f<=n;f+=c)u=t.matr.toVector(t.calc.grad(r,t.vect.init(m,f)),3,0,0),a=t.matr.toVector(t.calc.grad(r,t.vect.init(m,f)),3,1,0),s+=t.vect.mag(t.vect.cross(u,a));return s*l*c}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv" or "surf".')},r.fnds=function(r,e,n,i,o,a){var u,s,c=0;if("curv"===e.type){var f=(i-n)/1e4;if(2===e.definition.length){for(var l=n;l<=i;l+=f)u=t.calc.dfdx(e,l),c+=t.vect.dot(t.vect.fromField(r,t.real.val(e,l)),t.vect.init(-u.y,u.x))*t.vect.mag(u);return c*f}for(l=n;l<=i;l+=f)u=t.calc.dfdx(e,l),c+=t.vect.dot(t.vect.fromField(r,t.real.val(e,l)),t.calc.normal(e,l))*t.vect.mag(u);return c*f}if("surf"===e.type){f=(i-n)/100;for(var m=(a-o)/100,d=o;d<=a;d+=m)for(l=n;l<=i;l+=f)s=t.matr.toVector(t.calc.grad(e,t.vect.init(d,l)),3,0,0),u=t.matr.toVector(t.calc.grad(e,t.vect.init(d,l)),3,1,0),c+=t.vect.scalarTriple(t.vect.fromField(r,t.real.val(e,t.vect.init(d,l))),s,u);return c*m*f}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv" or "surf".')},r.Fourier=function(r,e){return 2*t.calc.fxdx(t.real.define("("+r.definition+") * Math.cos("+e+" * x)"),0,10)/t.PI()},r.frds=function(r,e,n,i){var o=r,a=r;if("curv"===e.type){var u=0,s=(i-n)/1e4;if("mult"===o.type){for(var c=n;c<=i;c+=s)u+=t.real.val(o,t.real.val(e,c))*t.vect.mag(t.calc.dfdx(e,c));return u*s}if(2===t.vect.dimension(a)){for(c=n;c<=i;c+=s)u+=t.vect.dot(t.vect.fromField(a,t.real.val(e,c)),t.calc.dfdx(e,c));return u*s}if(3===t.vect.dimension(a)){for(c=n;c<=i;c+=s)u+=t.vect.dot(t.vect.fromField(a,t.real.val(e,c)),t.calc.dfdx(e,c));return u*s}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "mult" or it must be of type "ChalkboardVectorField".')}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv".')},r.fxdx=function(r,e,n){if("expl"===r.type||"inve"===r.type||"pola"===r.type){var i=void 0;"expl"===r.type?i=t.real.parse("x => "+r.definition):"inve"===r.type?i=t.real.parse("y => "+r.definition):"pola"===r.type&&(i=t.real.parse("O => (("+r.definition+") * ("+r.definition+")) / 2"));for(var o=i(e)+i(n),a=(n-e)/1e6,u=1;u<1e6;u++)o+=u%2==0?2*i(e+u*a):4*i(e+u*a);return o*a/3}if("curv"===r.type){if(2===r.definition.length){var s=t.real.parse("t => "+r.definition[0]),c=t.real.parse("t => "+r.definition[1]),f=s(e)+s(n),l=c(e)+c(n),m=(n-e)/1e6;for(u=1;u<1e6;u++)f+=u%2==0?2*s(e+u*m):4*s(e+u*m),l+=u%2==0?2*c(n+u*m):4*c(n+u*m);return t.vect.init(f*m/3,l*m/3)}s=t.real.parse("t => "+r.definition[0]),c=t.real.parse("t => "+r.definition[1]);var d=t.real.parse("t => "+r.definition[2]),p=(f=s(e)+s(n),l=c(e)+c(n),d(e)+d(n));for(m=(n-e)/1e6,u=1;u<1e6;u++)f+=u%2==0?2*s(e+u*m):4*s(e+u*m),l+=u%2==0?2*c(e+u*m):4*c(e+u*m),p+=u%2==0?2*d(e+u*m):4*d(e+u*m);return t.vect.init(f*m/3,l*m/3,p*m/3)}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl", "inve", "pola", or "curv".')},r.fxydxdy=function(r,e,n,i,o){if("mult"===r.type){for(var a=t.real.parse("(x, y) => "+r.definition),u=0,s=(n-e)/1e4,c=(o-i)/1e4,f=e;f<=n;f+=s)for(var l=i;l<=o;l+=c)u+=a(f,l);return u*s*c}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "mult".')},r.fzdz=function(r,e,n,i){if("comp"===r.type){if("curv"===e.type){for(var o=t.comp.init(0,0),a=(i-n)/1e4,u=n;u<=i;u+=a){var s=t.comp.val(r,t.vect.toComplex(t.real.val(e,u))),c=t.calc.dfdx(e,u);o=t.comp.add(o,t.comp.init(s.a*c.x-s.b*c.y,s.b*c.x+s.a*c.y))}return t.comp.scl(o,a)}throw new TypeError('Parameter "func2" must be of type "ChalkboardFunction" with a "type" property of "curv".')}throw new TypeError('Parameter "func1" must be of type "ChalkboardFunction" with a "type" property of "comp".')},r.grad=function(r,e){var n=1e-9,i=r,o=r;if("surf"===i.type&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var a=t.real.parse("(s, t) => "+i.definition[0]),u=t.real.parse("(s, t) => "+i.definition[1]),s=t.real.parse("(s, t) => "+i.definition[2]),c=(a(e.x+n,e.y)-a(e.x,e.y))/n,f=(a(e.x,e.y+n)-a(e.x,e.y))/n,l=(u(e.x+n,e.y)-u(e.x,e.y))/n,m=(u(e.x,e.y+n)-u(e.x,e.y))/n,d=(s(e.x+n,e.y)-s(e.x,e.y))/n,p=(s(e.x,e.y+n)-s(e.x,e.y))/n;return t.matr.init([c,f],[l,m],[d,p])}if("mult"===i.type&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var h=t.real.parse("(x, y) => "+i.definition),v=(h(e.x+n,e.y)-h(e.x,e.y))/n,y=(h(e.x,e.y+n)-h(e.x,e.y))/n;return t.vect.init(v,y)}if(2===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var b=t.real.parse("(x, y) => "+o.p),g=t.real.parse("(x, y) => "+o.q),x=(b(e.x+n,e.y)-b(e.x,e.y))/n,w=(b(e.x,e.y+n)-b(e.x,e.y))/n,z=(g(e.x+n,e.y)-g(e.x,e.y))/n,S=(g(e.x,e.y+n)-g(e.x,e.y))/n;return t.matr.init([x,w],[z,S])}if(3===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z&&void 0===e.w){b=t.real.parse("(x, y, z) => "+o.p),g=t.real.parse("(x, y, z) => "+o.q);var M=t.real.parse("(x, y, z) => "+o.r),E=(x=(b(e.x+n,e.y,e.z)-b(e.x,e.y,e.z))/n,w=(b(e.x,e.y+n,e.z)-b(e.x,e.y,e.z))/n,(b(e.x,e.y,e.z+n)-b(e.x,e.y,e.z))/n),A=(z=(g(e.x+n,e.y,e.z)-g(e.x,e.y,e.z))/n,S=(g(e.x,e.y+n,e.z)-g(e.x,e.y,e.z))/n,(g(e.x,e.y,e.z+n)-g(e.x,e.y,e.z))/n),O=(M(e.x+n,e.y,e.z)-M(e.x,e.y,e.z))/n,k=(M(e.x,e.y+n,e.z)-M(e.x,e.y,e.z))/n,P=(M(e.x,e.y,e.z+n)-M(e.x,e.y,e.z))/n;return t.matr.init([x,w,E],[z,S,A],[O,k,P])}if(4===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z&&"number"==typeof e.w){b=t.real.parse("(x, y, z, w) => "+o.p),g=t.real.parse("(x, y, z, w) => "+o.q),M=t.real.parse("(x, y, z, w) => "+o.r);var T=t.real.parse("(x, y, z, w) => "+o.s),I=(x=(b(e.x+n,e.y,e.z,e.w)-b(e.x,e.y,e.z,e.w))/n,w=(b(e.x,e.y+n,e.z,e.w)-b(e.x,e.y,e.z,e.w))/n,E=(b(e.x,e.y,e.z+n,e.w)-b(e.x,e.y,e.z,e.w))/n,(b(e.x,e.y,e.z,e.w+n)-b(e.x,e.y,e.z,e.w))/n),q=(z=(g(e.x+n,e.y,e.z,e.w)-g(e.x,e.y,e.z,e.w))/n,S=(g(e.x,e.y+n,e.z,e.w)-g(e.x,e.y,e.z,e.w))/n,A=(g(e.x,e.y,e.z+n,e.w)-g(e.x,e.y,e.z,e.w))/n,(g(e.x,e.y,e.z,e.w+n)-g(e.x,e.y,e.z,e.w))/n),C=(O=(M(e.x+n,e.y,e.z,e.w)-M(e.x,e.y,e.z,e.w))/n,k=(M(e.x,e.y+n,e.z,e.w)-M(e.x,e.y,e.z,e.w))/n,P=(M(e.x,e.y,e.z+n,e.w)-M(e.x,e.y,e.z,e.w))/n,(M(e.x,e.y,e.z,e.w+n)-M(e.x,e.y,e.z,e.w))/n),D=(T(e.x+n,e.y,e.z,e.w)-T(e.x,e.y,e.z,e.w))/n,W=(T(e.x,e.y+n,e.z,e.w)-T(e.x,e.y,e.z,e.w))/n,R=(T(e.x,e.y,e.z+n,e.w)-T(e.x,e.y,e.z,e.w))/n,j=(T(e.x,e.y,e.z,e.w+n)-T(e.x,e.y,e.z,e.w))/n;return t.matr.init([x,w,E,I],[z,S,A,q],[O,k,P,C],[D,W,R,j])}throw new TypeError('Parameter "funcORvectfield" must be of type "ChalkboardFunction" with a "type" property of "surf" or "mult" or of type "ChalkboardVectorField".')},r.grad2=function(r,e){var n=1e-5,i=r,o=r;if("surf"===i.type&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var a=t.real.parse("(s, t) => "+i.definition[0]),u=t.real.parse("(s, t) => "+i.definition[1]),s=t.real.parse("(s, t) => "+i.definition[2]),c=(a(e.x+n,e.y)-2*a(e.x,e.y)+a(e.x-n,e.y))/(n*n),f=(a(e.x,e.y+n)-2*a(e.x,e.y)+a(e.x,e.y-n))/(n*n),l=(u(e.x+n,e.y)-2*u(e.x,e.y)+u(e.x-n,e.y))/(n*n),m=(u(e.x,e.y+n)-2*u(e.x,e.y)+u(e.x,e.y-n))/(n*n),d=(s(e.x+n,e.y)-2*s(e.x,e.y)+s(e.x-n,e.y))/(n*n),p=(s(e.x,e.y+n)-2*s(e.x,e.y)+s(e.x,e.y-n))/(n*n);return t.matr.init([c,f],[l,m],[d,p])}if("mult"===i.type&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var h=t.real.parse("(x, y) => "+i.definition),v=(h(e.x+n,e.y)-2*h(e.x,e.y)+h(e.x-n,e.y))/(n*n),y=(h(e.x,e.y+n)-2*h(e.x,e.y)+h(e.x,e.y-n))/(n*n),b=(h(e.x+n,e.y+n)-h(e.x+n,e.y)-h(e.x,e.y+n)+h(e.x,e.y))/(n*n),g=(h(e.x+n,e.y+n)-h(e.x,e.y+n)-h(e.x+n,e.y)+h(e.x,e.y))/(n*n);return t.matr.init([v,b],[g,y])}if(2===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&void 0===e.z&&void 0===e.w){var x=t.real.parse("(x, y) => "+o.p),w=t.real.parse("(x, y) => "+o.q),z=(x(e.x+n,e.y)-2*x(e.x,e.y)+x(e.x-n,e.y))/(n*n),S=(x(e.x,e.y+n)-2*x(e.x,e.y)+x(e.x,e.y-n))/(n*n),M=(w(e.x+n,e.y)-2*w(e.x,e.y)+w(e.x-n,e.y))/(n*n),E=(w(e.x,e.y+n)-2*w(e.x,e.y)+w(e.x,e.y-n))/(n*n);return t.matr.init([z,S],[M,E])}if(3===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z&&void 0===e.w){x=t.real.parse("(x, y, z) => "+o.p),w=t.real.parse("(x, y, z) => "+o.q);var A=t.real.parse("(x, y, z) => "+o.r),O=(z=(x(e.x+n,e.y,e.z)-2*x(e.x,e.y,e.z)+x(e.x-n,e.y,e.z))/(n*n),S=(x(e.x,e.y+n,e.z)-2*x(e.x,e.y,e.z)+x(e.x,e.y-n,e.z))/(n*n),(x(e.x,e.y,e.z+n)-2*x(e.x,e.y,e.z)+x(e.x,e.y,e.z-n))/(n*n)),k=(M=(w(e.x+n,e.y,e.z)-2*w(e.x,e.y,e.z)+w(e.x-n,e.y,e.z))/(n*n),E=(w(e.x,e.y+n,e.z)-2*w(e.x,e.y,e.z)+w(e.x,e.y-n,e.z))/(n*n),(w(e.x,e.y,e.z+n)-2*w(e.x,e.y,e.z)+w(e.x,e.y,e.z-n))/(n*n)),P=(A(e.x+n,e.y,e.z)-2*A(e.x,e.y,e.z)+A(e.x-n,e.y,e.z))/(n*n),T=(A(e.x,e.y+n,e.z)-2*A(e.x,e.y,e.z)+A(e.x,e.y-n,e.z))/(n*n),I=(A(e.x,e.y,e.z+n)-2*A(e.x,e.y,e.z)+A(e.x,e.y,e.z-n))/(n*n);return t.matr.init([z,S,O],[M,E,k],[P,T,I])}if(4===t.vect.dimension(o)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z&&"number"==typeof e.w){x=t.real.parse("(x, y, z, w) => "+o.p),w=t.real.parse("(x, y, z, w) => "+o.q),A=t.real.parse("(x, y, z, w) => "+o.r);var q=t.real.parse("(x, y, z, w) => "+o.s),C=(z=(x(e.x+n,e.y,e.z,e.w)-2*x(e.x,e.y,e.z,e.w)+x(e.x-n,e.y,e.z,e.w))/(n*n),S=(x(e.x,e.y+n,e.z,e.w)-2*x(e.x,e.y,e.z,e.w)+x(e.x,e.y-n,e.z,e.w))/(n*n),O=(x(e.x,e.y,e.z+n,e.w)-2*x(e.x,e.y,e.z,e.w)+x(e.x,e.y,e.z-n,e.w))/(n*n),(x(e.x,e.y,e.z,e.w+n)-2*x(e.x,e.y,e.z,e.w)+x(e.x,e.y,e.z,e.w-n))/(n*n)),D=(M=(w(e.x+n,e.y,e.z,e.w)-2*w(e.x,e.y,e.z,e.w)+w(e.x-n,e.y,e.z,e.w))/(n*n),E=(w(e.x,e.y+n,e.z,e.w)-2*w(e.x,e.y,e.z,e.w)+w(e.x,e.y-n,e.z,e.w))/(n*n),k=(w(e.x,e.y,e.z+n,e.w)-2*w(e.x,e.y,e.z,e.w)+w(e.x,e.y,e.z-n,e.w))/(n*n),(w(e.x,e.y,e.z,e.w+n)-2*w(e.x,e.y,e.z,e.w)+w(e.x,e.y,e.z,e.w-n))/(n*n)),W=(P=(A(e.x+n,e.y,e.z,e.w)-2*A(e.x,e.y,e.z,e.w)+A(e.x-n,e.y,e.z,e.w))/(n*n),T=(A(e.x,e.y+n,e.z,e.w)-2*A(e.x,e.y,e.z,e.w)+A(e.x,e.y-n,e.z,e.w))/(n*n),I=(A(e.x,e.y,e.z+n,e.w)-2*A(e.x,e.y,e.z,e.w)+A(e.x,e.y,e.z-n,e.w))/(n*n),(A(e.x,e.y,e.z,e.w+n)-2*A(e.x,e.y,e.z,e.w)+A(e.x,e.y,e.z,e.w-n))/(n*n)),R=(q(e.x+n,e.y,e.z,e.w)-2*q(e.x,e.y,e.z,e.w)+q(e.x-n,e.y,e.z,e.w))/(n*n),j=(q(e.x,e.y+n,e.z,e.w)-2*q(e.x,e.y,e.z,e.w)+q(e.x,e.y-n,e.z,e.w))/(n*n),F=(q(e.x,e.y,e.z+n,e.w)-2*q(e.x,e.y,e.z,e.w)+q(e.x,e.y,e.z-n,e.w))/(n*n),V=(q(e.x,e.y,e.z,e.w+n)-2*q(e.x,e.y,e.z,e.w)+q(e.x,e.y,e.z,e.w-n))/(n*n);return t.matr.init([z,S,O,C],[M,E,k,D],[P,T,I,W],[R,j,F,V])}throw new TypeError('Parameter "funcORvectfield" must be of type "ChalkboardFunction" with a "type" property of "surf" or "mult" or it must be of type "ChalkboardVectorField".')},r.Laplace=function(r,e){if(e>0)return t.calc.fxdx(t.real.define("("+r.definition+") * Math.exp(-"+e+" * x)"),0,10);throw new RangeError('Parameter "val" must be of type "number" greater than 0.')},r.lim=function(r,e){if("expl"!==r.type)throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl".');if(e===1/0){if(t.real.val(r,101)>t.real.val(r,100))return 1/0;if(t.real.val(r,101)<t.real.val(r,100))return-1/0}else{if(e!==-1/0)return t.real.val(r,e-1e-6).toFixed(4)===t.real.val(r,e+1e-6).toFixed(4)&&(t.real.val(r,e)!==1/0||t.real.val(r,e)!==-1/0)?t.real.val(r,e):void 0;if(t.real.val(r,-101)>t.real.val(r,-100))return 1/0;if(t.real.val(r,-101)<t.real.val(r,-100))return-1/0}},r.mean=function(r,e,n){return t.calc.fxdx(r,e,n)/(n-e)},r.Newton=function(r,e){void 0===e&&(e=[-1,1]);for(var n=t.numb.random(e[0],e[1]),i=0;i<10;i++)n-=t.real.val(r,n)/t.calc.dfdx(r,n);return n},r.normal=function(r,e){if("curv"===r.type)return r.definition.length,t.vect.normalize(t.calc.d2fdx2(r,e));throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv".')},r.tangent=function(r,e){if("curv"===r.type)return r.definition.length,t.vect.normalize(t.calc.dfdx(r,e));throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "curv".')},r.Taylor=function(r,e,n,i){if("expl"===r.type){if(0===n)return t.real.val(r,i);if(1===n)return t.real.val(r,i)+t.calc.dfdx(r,i)*(e-i);if(2===n)return t.real.val(r,i)+t.calc.dfdx(r,i)*(e-i)+t.calc.d2fdx2(r,i)*(e-i)*(e-i)/2;throw new RangeError('Parameter "n" must be of type "number" greater than 0 and less than 3')}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl".')}}(t.calc||(t.calc={}))}(t||(t={})),function(t){var r;(r=t.comp||(t.comp={})).absolute=function(r){return t.comp.init(Math.abs(r.a),Math.abs(r.b))},r.add=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),t.comp.init(r.a+e.a,r.b+e.b)},r.arg=function(r){return t.trig.arctan2(r.b,r.a)},r.argBetween=function(r,e){return t.vect.angBetween(t.comp.toVector(r),t.comp.toVector(e))},r.conjugate=function(r){return t.comp.init(r.a,-r.b)},r.constrain=function(r,e){return void 0===e&&(e=[0,1]),t.comp.init(t.numb.constrain(r.a,e),t.numb.constrain(r.b,e))},r.copy=function(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))},r.define=function(t,r){return{definition:[t,r],type:"comp"}},r.dist=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),t.real.sqrt((e.a-r.a)*(e.a-r.a)+(e.b-r.b)*(e.b-r.b))},r.distsq=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),(e.a-r.a)*(e.a-r.a)+(e.b-r.b)*(e.b-r.b)},r.div=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),t.comp.init((r.a*e.a-r.b*e.b)/t.comp.magsq(e),(r.b*e.a-r.a*e.b)/t.comp.magsq(e))},r.Euler=function(r){return t.comp.init(t.trig.cos(r),t.trig.sin(r))},r.Im=function(t){return t.hasOwnProperty("definition")?t.definition[1]:t.b},r.init=function(t,r){return void 0===r&&(r=0),{a:t,b:r}},r.invert=function(r){return t.comp.init(r.a/t.comp.magsq(r),-r.b/t.comp.magsq(r))},r.ln=function(r){return t.comp.init(t.real.ln(t.comp.mag(r)),t.trig.arctan2(r.b,r.a))},r.mag=function(r){return t.real.sqrt(r.a*r.a+r.b*r.b)},r.magset=function(r,e){return t.comp.scl(t.comp.normalize(r),e)},r.magsq=function(t){return t.a*t.a+t.b*t.b},r.mul=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),t.comp.init(r.a*e.a-r.b*e.b,r.a*e.b+r.b*e.a)},r.negate=function(r){return t.comp.init(-r.a,-r.b)},r.normalize=function(r){return t.comp.init(r.a/t.comp.mag(r),r.b/t.comp.mag(r))},r.parse=function(r){return Function('"use strict"; '+t.PARSEPREFIX+" return ("+r+")")()},r.pow=function(r,e){return t.comp.init(t.real.pow(t.comp.mag(r),e)*t.trig.cos(e*t.comp.arg(r)),t.real.pow(t.comp.mag(r),e)*t.trig.sin(e*t.comp.arg(r)))},r.print=function(r){console.log(t.comp.toString(r))},r.random=function(r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t.comp.init(t.numb.random(r,e),t.numb.random(r,e))},r.Re=function(t){return t.hasOwnProperty("definition")?t.definition[0]:t.a},r.reciprocate=function(r){return t.comp.init(1/r.a,1/r.b)},r.root=function(r,e){void 0===e&&(e=3);for(var n=[],i=t.comp.mag(r),o=t.comp.arg(r),a=0;a<e;a++)n.push(t.comp.init(t.real.root(i,e)*t.trig.cos((o+t.PI(2*a))/e),t.real.root(i,e)*t.trig.sin((o+t.PI(2*a))/e)));return n},r.rotate=function(r,e){return t.comp.init(t.comp.mag(r)*t.trig.cos(t.comp.arg(r)+e),t.comp.mag(r)*t.trig.sin(t.comp.arg(r)+e))},r.round=function(r){return t.comp.init(Math.round(r.a),Math.round(r.b))},r.scl=function(r,e){return t.comp.init(r.a*e,r.b*e)},r.slope=function(t){return t.b/t.a},r.sq=function(r){return t.comp.init(r.a*r.a-r.b*r.b,2*r.a*r.b)},r.sqrt=function(r){return t.comp.init(t.real.sqrt((r.a+t.real.sqrt(r.a*r.a+r.b*r.b))/2),t.numb.sgn(r.b)*t.real.sqrt((-r.a+t.real.sqrt(r.a*r.a+r.b*r.b))/2))},r.sub=function(r,e){return"number"==typeof r&&(r=t.comp.init(r,0)),"number"==typeof e&&(e=t.comp.init(e,0)),t.comp.init(r.a-e.a,r.b-e.b)},r.toArray=function(t){return[t.a,t.b]},r.toMatrix=function(r){return t.matr.init([r.a,-r.b],[r.b,r.a])},r.toString=function(t){return 1===t.a&&0===t.b?"1":0===t.a&&1===t.b?"i":-1===t.a&&0===t.b?"-1":0===t.a&&-1===t.b?"-i":t.b>=0?t.a.toString()+" + "+t.b.toString()+"i":t.a.toString()+" - "+Math.abs(t.b).toString()+"i"},r.toVector=function(r){return t.vect.init(r.a,r.b)},r.val=function(r,e){if("comp"===r.type){var n=t.comp.parse("(a, b) => "+r.definition[0]),i=t.comp.parse("(a, b) => "+r.definition[1]);return t.comp.init(n(e.a,e.b),i(e.a,e.b))}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a type property of "comp".')},r.zero=function(r){return t.comp.init(0,0)}}(t||(t={})),function(t){!function(r){r.circleA=function(r){return t.PI()*r*r},r.circleP=function(r){return 2*t.PI()*r},r.coneA=function(r,e){return t.PI()*r*(r+t.real.sqrt(e*e+r*r))},r.coneV=function(r,e){return t.PI()*r*r*e/3},r.cubeA=function(t){return 6*t*t},r.cubeV=function(t){return t*t*t},r.cylinderA=function(r,e){return 2*t.PI()*r*r+2*t.PI()*r*e},r.cylinderV=function(r,e){return t.PI()*r*r*e},r.dist=function(r,e){if(r.length===e.length){for(var n=0,i=0;i<r.length;i++)n+=(r[i]-e[i])*(r[i]-e[i]);return t.real.sqrt(n)}throw new RangeError('Parameters "p1" and "p2" must be of type "number[]" with the same "length" property.')},r.distsq=function(t,r){if(t.length===r.length){for(var e=0,n=0;n<t.length;n++)e+=(t[n]-r[n])*(t[n]-r[n]);return e}throw new RangeError('Parameters "p1" and "p2" must be of type "number[]" with the same "length" property.')},r.ellipseA=function(r,e){return t.PI()*r*e},r.ellipseP=function(r,e){var n=(r-e)*(r-e)/((r+e)*(r+e));return t.PI()*(r+e)*(1+3*n/(10+Math.sqrt(4-3*n)))},r.Euler=function(t,r,e){return t-r+e},r.line3D=function(r,e,n,i,o,a,u){void 0===u&&(u=t.real.parse(t.CONTEXT)),u.beginPath(),u.moveTo(r/(.0025*n+1),e/(.0025*n+1)),u.lineTo(i/(.0025*a+1),o/(.0025*a+1)),u.stroke()},r.mid=function(t,r){if(t.length===r.length){for(var e=[],n=0;n<t.length;n++)e[n]=(t[n]+r[n])/2;return e}throw new RangeError('Parameters "p1" and "p2" must be of type "number[]" with the same "length" property.')},r.parallelogramA=function(t,r){return t*r},r.parallelogramP=function(t,r){return 2*(t+r)},r.polygonA=function(t,r,e){return t*r*e/2},r.polygonP=function(t,r){return t*r},r.Pythagorean=function(t,r,e){return void 0===e&&(e="hyp"),"hyp"===e?Math.sqrt(t*t+r*r):Math.sqrt(r*r-t*t)},r.PythagoreanTriple=function(r,e){var n=2*Math.round(t.numb.random(r,e))-1;return[n,n*n/2-.5,n*n/2+.5]},r.rectangularprismA=function(t,r,e){return 2*(t*e+t*r+r*e)},r.rectangularprismV=function(t,r,e){return t*r*e},r.sectorA=function(t,r){return t*t*r/2},r.sectorP=function(t,r){return t*r},r.sphereA=function(r){return 4*t.PI()*r*r},r.sphereV=function(r){return 4*t.PI()*r*r*r/3},r.squareA=function(t){return t*t},r.squareP=function(t){return 4*t},r.trapezoidA=function(t,r,e){return(t+r)/2*e},r.trapezoidP=function(t,r,e,n){return t+r+e+n},r.triangleA=function(t,r){return t*r/2},r.triangleP=function(t,r,e){return t+r+e},r.trianglesidesA=function(r,e,n){var i=(r+e+n)/2;return t.real.sqrt(i*((i-r)*(i-e)*(i-n)))},r.triangularprismA=function(r,e,n,i){var o=(r+e+n)/2;return 2*t.real.sqrt(o*((o-r)*(o-e)*(o-n)))+i*(r+e+n)},r.triangularprismV=function(r,e,n,i){return i*t.real.sqrt(-r*r*r*r+r*e*2*(r*e)+r*n*2*(r*n)-e*e*e*e+e*n*2*(e*n)-n*n*n*n)/4}}(t.geom||(t.geom={}))}(t||(t={})),function(t){var r;(r=t.matr||(t.matr={})).absolute=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([Math.abs(r[0][0]),Math.abs(r[0][1])],[Math.abs(r[1][0]),Math.abs(r[1][1])]);if(t.matr.isSizeOf(r,3))return t.matr.init([Math.abs(r[0][0]),Math.abs(r[0][1]),Math.abs(r[0][2])],[Math.abs(r[1][0]),Math.abs(r[1][1]),Math.abs(r[1][2])],[Math.abs(r[2][0]),Math.abs(r[2][1]),Math.abs(r[2][2])]);if(t.matr.isSizeOf(r,4))return t.matr.init([Math.abs(r[0][0]),Math.abs(r[0][1]),Math.abs(r[0][2]),Math.abs(r[0][3])],[Math.abs(r[1][0]),Math.abs(r[1][1]),Math.abs(r[1][2]),Math.abs(r[1][3])],[Math.abs(r[2][0]),Math.abs(r[2][1]),Math.abs(r[2][2]),Math.abs(r[2][3])],[Math.abs(r[3][0]),Math.abs(r[3][1]),Math.abs(r[3][2]),Math.abs(r[3][3])]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e[n]=[];for(var i=0;i<t.matr.cols(r);i++)e[n][i]=Math.abs(r[n][i])}return e},r.add=function(r,e){if(t.matr.isSizeEqual(r,e)){if(t.matr.isSizeOf(r,2))return t.matr.init([r[0][0]+e[0][0],r[0][1]+e[0][1]],[r[1][0]+e[1][0],r[1][1]+e[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0]+e[0][0],r[0][1]+e[0][1],r[0][2]+e[0][2]],[r[1][0]+e[1][0],r[1][1]+e[1][1],r[1][2]+e[1][2]],[r[2][0]+e[2][0],r[2][1]+e[2][1],r[2][2]+e[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0]+e[0][0],r[0][1]+e[0][1],r[0][2]+e[0][2],r[0][3]+e[0][3]],[r[1][0]+e[1][0],r[1][1]+e[1][1],r[1][2]+e[1][2],r[1][3]+e[1][3]],[r[2][0]+e[2][0],r[2][1]+e[2][1],r[2][2]+e[2][2],r[2][3]+e[2][3]],[r[3][0]+e[3][0],r[3][1]+e[3][1],r[3][2]+e[3][2],r[3][3]+e[3][3]]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++){n[i]=[];for(var o=0;o<t.matr.cols(r);o++)n[i][o]=r[i][o]+e[i][o]}return n}throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" with equivalent numbers of rows and columns.')},r.addKronecker=function(r,e){if(t.matr.isSquare(r)&&t.matr.isSquare(e))return t.matr.add(t.matr.mulKronecker(r,t.matr.identity(t.matr.rows(r))),t.matr.mulKronecker(t.matr.identity(t.matr.rows(e)),e));throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" that are square.')},r.adjugate=function(r,e,n){return t.matr.transpose(t.matr.cofactor(r,e,n))},r.cofactor=function(t,r,e){return t.slice(0,r).concat(t.slice(r+1)).map((function(t){return t.slice(0,e).concat(t.slice(e+1))}))},r.cols=function(t){return t[0].length},r.colspace=function(r){return t.matr.transpose(t.matr.rowspace(t.matr.transpose(r)))},r.concat=function(r,e,n){if(void 0===n&&(n=0),0===n){if(t.matr.cols(r)===t.matr.cols(e))return t.matr.isSizeOf(r,2)&&2===t.matr.rows(e)?t.matr.init([r[0][0],r[0][1]],[r[1][0],r[1][1]],[e[0][0],e[0][1]],[e[1][0],e[1][1]]):t.matr.isSizeOf(r,3)&&3===t.matr.rows(e)?t.matr.init([r[0][0],r[0][1],r[0][2]],[r[1][0],r[1][1],r[1][2]],[r[2][0],r[2][1],r[2][2]],[e[0][0],e[0][1],e[0][2]],[e[1][0],e[1][1],e[1][2]],[e[2][0],e[2][1],e[2][2]]):t.matr.isSizeOf(r,4)&&4===t.matr.rows(e)?t.matr.init([r[0][0],r[0][1],r[0][2],r[0][3]],[r[1][0],r[1][1],r[1][2],r[1][3]],[r[2][0],r[2][1],r[2][2],r[2][3]],[r[3][0],r[3][1],r[3][2],r[3][3]],[e[0][0],e[0][1],e[0][2],e[0][3]],[e[1][0],e[1][1],e[1][2],e[1][3]],[e[2][0],e[2][1],e[2][2],e[2][3]],[e[3][0],e[3][1],e[3][2],e[3][3]]):t.matr.init(r.concat(e));throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" with equivalent numbers of columns.')}if(1===n){if(t.matr.rows(r)===t.matr.rows(e)){if(t.matr.isSizeOf(r,2)&&2===t.matr.cols(e))return t.matr.init([r[0][0],r[0][1],e[0][0],e[0][1]],[r[1][0],r[1][1],e[1][0],e[1][1]]);if(t.matr.isSizeOf(r,3)&&3===t.matr.cols(e))return t.matr.init([r[0][0],r[0][1],r[0][2],e[0][0],e[0][1],e[0][2]],[r[1][0],r[1][1],r[1][2],e[1][0],e[1][1],e[1][2]],[r[2][0],r[2][1],r[2][2],e[2][0],e[2][1],e[2][2]]);if(t.matr.isSizeOf(r,4)&&4===t.matr.cols(e))return t.matr.init([r[0][0],r[0][1],r[0][2],r[0][3],e[0][0],e[0][1],e[0][2],e[0][3]],[r[1][0],r[1][1],r[1][2],r[1][3],e[1][0],e[1][1],e[1][2],e[1][3]],[r[2][0],r[2][1],r[2][2],r[2][3],e[2][0],e[2][1],e[2][2],e[2][3]],[r[3][0],r[3][1],r[3][2],r[3][3],e[3][0],e[3][1],e[3][2],e[3][3]]);for(var i=t.matr.init(),o=0;o<t.matr.rows(r);o++)i.push(r[o].concat(e[o]));return i}throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" with equivalent numbers of rows.')}throw new TypeError('Parameter "axis" must be 0 or 1.')},r.constrain=function(r,e){if(void 0===e&&(e=[0,1]),t.matr.isSizeOf(r,2))return t.matr.init([t.numb.constrain(r[0][0],e),t.numb.constrain(r[0][1],e)],[t.numb.constrain(r[1][0],e),t.numb.constrain(r[1][1],e)]);if(t.matr.isSizeOf(r,3))return t.matr.init([t.numb.constrain(r[0][0],e),t.numb.constrain(r[0][1],e),t.numb.constrain(r[0][2],e)],[t.numb.constrain(r[1][0],e),t.numb.constrain(r[1][1],e),t.numb.constrain(r[1][2],e)],[t.numb.constrain(r[2][0],e),t.numb.constrain(r[2][1],e),t.numb.constrain(r[2][2],e)]);if(t.matr.isSizeOf(r,4))return t.matr.init([t.numb.constrain(r[0][0],e),t.numb.constrain(r[0][1],e),t.numb.constrain(r[0][2],e),t.numb.constrain(r[0][3],e)],[t.numb.constrain(r[1][0],e),t.numb.constrain(r[1][1],e),t.numb.constrain(r[1][2],e),t.numb.constrain(r[1][3],e)],[t.numb.constrain(r[2][0],e),t.numb.constrain(r[2][1],e),t.numb.constrain(r[2][2],e),t.numb.constrain(r[2][3],e)],[t.numb.constrain(r[3][0],e),t.numb.constrain(r[3][1],e),t.numb.constrain(r[3][2],e),t.numb.constrain(r[3][3],e)]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++){n[i]=[];for(var o=0;o<t.matr.cols(r);o++)n[i][o]=t.numb.constrain(r[i][o],e)}return n},r.copy=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([r[0][0],r[0][1]],[r[1][0],r[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0],r[0][1],r[0][2]],[r[1][0],r[1][1],r[1][2]],[r[2][0],r[2][1],r[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0],r[0][1],r[0][2],r[0][3]],[r[1][0],r[1][1],r[1][2],r[1][3]],[r[2][0],r[2][1],r[2][2],r[2][3]],[r[3][0],r[3][1],r[3][2],r[3][3]]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e.push([]);for(var i=0;i<t.matr.cols(r);i++)e[n].push(r[n][i])}return e},r.det=function(r){if(t.matr.isSquare(r)){if(1===t.matr.rows(r))return r[0][0];if(2===t.matr.rows(r))return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===t.matr.rows(r))return r[0][0]*(r[1][1]*r[2][2]-r[1][2]*r[2][1])-r[0][1]*(r[1][0]*r[2][2]-r[1][2]*r[2][0])+r[0][2]*(r[1][0]*r[2][1]-r[1][1]*r[2][0]);if(4===t.matr.rows(r))return r[0][0]*(r[1][1]*(r[2][2]*r[3][3]-r[2][3]*r[3][2])-r[1][2]*(r[2][1]*r[3][3]-r[2][3]*r[3][1])+r[1][3]*(r[2][1]*r[3][2]-r[2][2]*r[3][1]))-r[0][1]*(r[1][0]*(r[2][2]*r[3][3]-r[2][3]*r[3][2])-r[1][2]*(r[2][0]*r[3][3]-r[2][3]*r[3][0])+r[1][3]*(r[2][0]*r[3][2]-r[2][2]*r[3][0]))+r[0][2]*(r[1][0]*(r[2][1]*r[3][3]-r[2][3]*r[3][1])-r[1][1]*(r[2][0]*r[3][3]-r[2][3]*r[3][0])+r[1][3]*(r[2][0]*r[3][1]-r[2][1]*r[3][0]))-r[0][3]*(r[1][0]*(r[2][1]*r[3][2]-r[2][2]*r[3][1])-r[1][1]*(r[2][0]*r[3][2]-r[2][2]*r[3][0])+r[1][2]*(r[2][0]*r[3][1]-r[2][1]*r[3][0]));for(var e=0,n=0;n<t.matr.rows(r);n++){var i=r[0][n]*t.matr.det(t.matr.cofactor(r,0,n));e+=n%2==0?i:-i}return e}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square.')},r.diagonal=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(2===r)return t.matr.init([e[0]||0,0],[0,e[1]||0]);if(3===r)return t.matr.init([e[0]||0,0,0],[0,e[1]||0,0],[0,0,e[2]||0]);if(4===r)return t.matr.init([e[0]||0,0,0,0],[0,e[1]||0,0,0],[0,0,e[2]||0,0],[0,0,0,e[3]||0]);e=Array.isArray(e[0])?e[0]:e;for(var i=t.matr.init(),o=0;o<r;o++)i.push(Array(r).fill(0)),i[o][o]=e[o]||0;return i},r.eigenvalue=function(r,e){void 0===e&&(e=100);for(var n=t.matr.fill(1,t.matr.rows(r),1),i=function(e){var i=t.matr.mul(r,n),o=t.stat.max(t.matr.toArray(t.matr.absolute(i)));n=t.stat.toMatrix(t.matr.toArray(i).map((function(t){return t/o})),t.matr.rows(r),1)},o=0;o<e;o++)i();var a=function(t,r){for(var e=0,n=0;n<t.length;n++)e+=t[n]*r[n];return e};return a(t.matr.toArray(t.matr.transpose(n)),t.matr.toArray(t.matr.mul(r,n)))/a(t.matr.toArray(t.matr.transpose(n)),t.matr.toArray(n))},r.eigenvector=function(r,e){void 0===e&&(e=100);for(var n=t.matr.fill(1,t.matr.rows(r),1),i=function(e){var i=t.matr.mul(r,n),o=t.stat.max(t.matr.toArray(t.matr.absolute(i)));n=t.stat.toMatrix(t.matr.toArray(i).map((function(t){return t/o})),t.matr.rows(r),1)},o=0;o<e;o++)i();return t.matr.toArray(n)},r.empty=function(r,e){if(void 0===e&&(e=r),2===r&&2===e)return t.matr.init([null,null],[null,null]);if(3===r&&3===e)return t.matr.init([null,null,null],[null,null,null],[null,null,null]);if(4===r&&4===e)return t.matr.init([null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]);for(var n=t.matr.init(),i=0;i<r;i++){n.push([]);for(var o=0;o<e;o++)n[i].push(null)}return n},r.exchange=function(r){if(2===r)return t.matr.init([0,1],[1,0]);if(3===r)return t.matr.init([0,0,1],[0,1,0],[1,0,0]);if(4===r)return t.matr.init([0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]);for(var e=t.matr.fill(0,r,r),n=0;n<r;n++)for(var i=0;i<r;i++)n+i===r-1&&(e[n][i]=1);return e},r.fill=function(r,e,n){if(void 0===n&&(n=e),2===e&&2===n)return t.matr.init([r,r],[r,r]);if(3===e&&3===n)return t.matr.init([r,r,r],[r,r,r],[r,r,r]);if(4===e&&4===n)return t.matr.init([r,r,r,r],[r,r,r,r],[r,r,r,r],[r,r,r,r]);for(var i=t.matr.init(),o=0;o<e;o++){i.push([]);for(var a=0;a<n;a++)i[o].push(r)}return i},r.Gaussian=function(r){for(var e=0,n=0;n<t.matr.rows(r)&&!(e>=t.matr.cols(r));n++){for(var i=n;0===r[i][e];)if(++i===t.matr.rows(r)&&(i=n,e++,t.matr.cols(r)===e))return r;var o=r[i];r[i]=r[n],r[n]=o;for(var a=r[n][e],u=0;u<t.matr.cols(r);u++)r[n][u]/=a;for(var s=0;s<t.matr.rows(r);s++)if(s!==n){var c=r[s][e];for(u=0;u<t.matr.cols(r);u++)r[s][u]-=c*r[n][u]}e++}return r},r.Hilbert=function(r){if(2===r)return t.matr.init([1,.5],[.5,1/3]);if(3===r)return t.matr.init([1,.5,1/3],[.5,1/3,1/4],[1/3,1/4,.2]);if(4===r)return t.matr.init([1,.5,1/3,1/4],[.5,1/3,1/4,.2],[1/3,1/4,.2,1/6],[1/4,.2,1/6,1/7]);for(var e=t.matr.init(),n=0;n<r;n++){e.push([]);for(var i=0;i<r;i++)e[n].push(1/(n+i+1))}return e},r.identity=function(r){if(2===r)return t.matr.init([1,0],[0,1]);if(3===r)return t.matr.init([1,0,0],[0,1,0],[0,0,1]);if(4===r)return t.matr.init([1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]);for(var e=t.matr.init(),n=0;n<r;n++)e.push(Array(r).fill(0)),e[n][n]=1;return e},r.init=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?[]:Array.isArray(t[0])&&Array.isArray(t[0][0])?t[0]:t},r.invert=function(r){if(t.matr.isInvertible(r)){if(2===t.matr.rows(r)){var e=t.matr.det(r);return t.matr.init([r[1][1]/e,-r[0][1]/e],[-r[1][0]/e,r[0][0]/e])}if(3===t.matr.rows(r)){var n=t.matr.det(r);return t.matr.init([(r[1][1]*r[2][2]-r[1][2]*r[2][1])/n,(r[0][2]*r[2][1]-r[0][1]*r[2][2])/n,(r[0][1]*r[1][2]-r[0][2]*r[1][1])/n],[(r[1][2]*r[2][0]-r[1][0]*r[2][2])/n,(r[0][0]*r[2][2]-r[0][2]*r[2][0])/n,(r[0][2]*r[1][0]-r[0][0]*r[1][2])/n],[(r[1][0]*r[2][1]-r[1][1]*r[2][0])/n,(r[0][1]*r[2][0]-r[0][0]*r[2][1])/n,(r[0][0]*r[1][1]-r[0][1]*r[1][0])/n])}if(4===t.matr.rows(r)){var i=t.matr.det(r),o=r[0][0]*r[1][1]-r[0][1]*r[1][0],a=r[0][0]*r[1][2]-r[0][2]*r[1][0],u=r[0][0]*r[1][3]-r[0][3]*r[1][0],s=r[0][1]*r[1][2]-r[0][2]*r[1][1],c=r[0][1]*r[1][3]-r[0][3]*r[1][1],f=r[0][2]*r[1][3]-r[0][3]*r[1][2],l=r[2][0]*r[3][1]-r[2][1]*r[3][0],m=r[2][0]*r[3][2]-r[2][2]*r[3][0],d=r[2][0]*r[3][3]-r[2][3]*r[3][0],p=r[2][1]*r[3][2]-r[2][2]*r[3][1],h=r[2][1]*r[3][3]-r[2][3]*r[3][1],v=r[2][2]*r[3][3]-r[2][3]*r[3][2];return t.matr.init([(r[1][1]*v-r[1][2]*h+r[1][3]*p)/i,(r[0][2]*h-r[0][1]*v-r[0][3]*p)/i,(r[3][1]*f-r[3][2]*c+r[3][3]*s)/i,(r[2][2]*c-r[2][1]*f-r[2][3]*s)/i],[(r[1][2]*d-r[1][0]*v-r[1][3]*m)/i,(r[0][0]*v-r[0][2]*d+r[0][3]*m)/i,(r[3][2]*u-r[3][0]*f-r[3][3]*a)/i,(r[2][0]*f-r[2][2]*u+r[2][3]*a)/i],[(r[1][0]*h-r[1][1]*d+r[1][3]*l)/i,(r[0][1]*d-r[0][0]*h-r[0][3]*l)/i,(r[3][0]*c-r[3][1]*u+r[3][3]*o)/i,(r[2][1]*u-r[2][0]*c-r[2][3]*o)/i],[(r[1][1]*m-r[1][0]*p-r[1][2]*l)/i,(r[0][0]*p-r[0][1]*m+r[0][2]*l)/i,(r[3][1]*a-r[3][0]*s-r[3][2]*o)/i,(r[2][0]*s-r[2][1]*a+r[2][2]*o)/i])}for(var y=t.matr.init(),b=t.matr.init(),g=0;g<t.matr.rows(r);g++)b.push(r[g].concat(Array(t.matr.rows(r)).fill(0))),b[g][t.matr.cols(r)+g]=1;for(var x=0;x<t.matr.rows(r);x++){var w=b[x][x];if(0===w){var z=x;for(g=x+1;g<t.matr.rows(r);g++)Math.abs(b[g][x])>Math.abs(b[z][x])&&(z=g);var S=b[x];b[x]=b[z],b[z]=S,w=b[x][x]}for(var M=0;M<2*t.matr.cols(r);M++)b[x][M]/=w;for(g=0;g<t.matr.rows(r);g++)if(g!==x)for(var E=b[g][x],A=0;A<2*t.matr.cols(r);A++)b[g][A]-=E*b[x][A]}for(g=0;g<t.matr.rows(r);g++)y.push(b[g].slice(t.matr.cols(r),2*t.matr.cols(r)));return y}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square and has a non-zero determinant.')},r.isDiagonal=function(r){if(t.matr.isSquare(r)){if(t.matr.isSizeOf(r,2))return 0!==r[0][1]&&0!==r[1][0];if(t.matr.isSizeOf(r,3))return 0!==r[0][1]&&0!==r[0][2]&&0!==r[1][0]&&0!==r[1][2]&&0!==r[2][0]&&0!==r[2][1];if(t.matr.isSizeOf(r,4))return 0!==r[0][1]&&0!==r[0][2]&&0!==r[0][3]&&0!==r[1][0]&&0!==r[1][2]&&0!==r[1][3]&&0!==r[2][0]&&0!==r[2][1]&&0!==r[2][3]&&0!==r[3][0]&&0!==r[3][1]&&0!==r[3][2];for(var e=0,n=0;n<t.matr.rows(r);n++)for(var i=0;i<t.matr.cols(r);i++)n!==i&&0!==r[n][i]&&e++;return 0===e}return!1},r.isEqual=function(r,e){if(t.matr.isSizeEqual(r,e)){if(t.matr.isSizeOf(r,2))return r[0][0]===e[0][0]&&r[0][1]===e[0][1]&&r[1][0]===e[1][0]&&r[1][1]===e[1][1];if(t.matr.isSizeOf(r,3))return r[0][0]===e[0][0]&&r[0][1]===e[0][1]&&r[0][2]===e[0][2]&&r[1][0]===e[1][0]&&r[1][1]===e[1][1]&&r[1][2]===e[1][2]&&r[2][0]===e[2][0]&&r[2][1]===e[2][1]&&r[2][2]===e[2][2];if(t.matr.isSizeOf(r,4))return r[0][0]===e[0][0]&&r[0][1]===e[0][1]&&r[0][2]===e[0][2]&&r[0][3]===e[0][3]&&r[1][0]===e[1][0]&&r[1][1]===e[1][1]&&r[1][2]===e[1][2]&&r[1][3]===e[1][3]&&r[2][0]===e[2][0]&&r[2][1]===e[2][1]&&r[2][2]===e[2][2]&&r[2][3]===e[2][3]&&r[3][0]===e[3][0]&&r[3][1]===e[3][1]&&r[3][2]===e[3][2]&&r[3][3]===e[3][3];for(var n=t.matr.rows(r)*t.matr.cols(e),i=0;i<t.matr.rows(r);i++)for(var o=0;o<t.matr.cols(e);o++)r[i][o]===e[i][o]&&n--;return 0===n}return!1},r.isIdentity=function(r){if(t.matr.isDiagonal(r)){if(t.matr.isSizeOf(r,2))return 1===r[0][0]&&1===r[1][1];if(t.matr.isSizeOf(r,3))return 1===r[0][0]&&1===r[1][1]&&1===r[2][2];if(t.matr.isSizeOf(r,4))return 1===r[0][0]&&1===r[1][1]&&1===r[2][2]&&1===r[3][3];for(var e=0,n=0;n<t.matr.rows(r);n++)1!==r[n][n]&&e++;return 0===e}return!1},r.isInvertible=function(r){return t.matr.isSquare(r)&&0!==t.matr.det(r)},r.isLowerTriangular=function(r){if(t.matr.isSquare(r)){if(t.matr.isSizeOf(r,2))return 0===r[0][1];if(t.matr.isSizeOf(r,3))return 0===r[0][1]&&0===r[0][2]&&0===r[1][2];if(t.matr.isSizeOf(r,4))return 0===r[0][1]&&0===r[0][2]&&0===r[0][3]&&0===r[1][2]&&0===r[1][3]&&0===r[2][3];for(var e=0,n=0;n<t.matr.rows(r);n++)for(var i=n+1;i<t.matr.cols(r);i++)0!==r[n][i]&&e++;return 0===e}return!1},r.isOrthogonal=function(r){return!!t.matr.isInvertible(r)&&t.matr.isEqual(t.matr.transpose(r),t.matr.invert(r))},r.isSizeEqual=function(r,e){return t.matr.rows(r)===t.matr.rows(e)&&t.matr.cols(r)===t.matr.cols(e)},r.isSizeOf=function(r,e,n){return void 0===n&&(n=e),t.matr.rows(r)===e&&t.matr.cols(r)===n},r.isSkewSymmetric=function(r){return t.matr.isEqual(t.matr.transpose(r),t.matr.negate(r))},r.isSquare=function(r){return t.matr.rows(r)===t.matr.cols(r)},r.isSymmetric=function(r){return t.matr.isEqual(r,t.matr.transpose(r))},r.isUpperTriangular=function(r){if(t.matr.isSquare(r)){if(t.matr.isSizeOf(r,2))return 0===r[1][0];if(t.matr.isSizeOf(r,3))return 0===r[1][0]&&0===r[2][0]&&0===r[2][1];if(t.matr.isSizeOf(r,4))return 0===r[1][0]&&0===r[2][0]&&0===r[2][1]&&0===r[3][0]&&0===r[3][1]&&0===r[3][2];for(var e=0,n=0;n<t.matr.rows(r);n++)for(var i=0;i<n;i++)0!==r[n][i]&&e++;return 0===e}return!1},r.isZero=function(r){return t.matr.isEqual(r,t.matr.zero(r))},r.Lehmer=function(r){if(2===r)return t.matr.init([1,.5],[.5,1]);if(3===r)return t.matr.init([1,.5,1/3],[.5,1,2/3],[1/3,2/3,1]);if(4===r)return t.matr.init([1,.5,1/3,1/4],[.5,1,2/3,.5],[1/3,2/3,1,3/4],[1/4,1,3/4,1]);for(var e=t.matr.init(),n=0;n<r;n++){e.push([]);for(var i=0;i<r;i++)e[n].push(Math.min(n+1,i+1)/Math.max(n+1,i+1))}return e},r.lowerBinomial=function(r){if(2===r)return t.matr.init([1,0],[1,1]);if(3===r)return t.matr.init([1,0,0],[1,1,0],[1,2,1]);if(4===r)return t.matr.init([1,0,0,0],[1,1,0,0],[1,2,1,0],[1,3,3,1]);for(var e=t.matr.init(),n=0;n<r;n++){e.push([]);for(var i=0;i<r;i++)e[n].push(t.numb.binomial(n,i))}return e},r.lowerShift=function(r){if(2===r)return t.matr.init([0,0],[1,0]);if(3===r)return t.matr.init([0,0,0],[1,0,0],[0,1,0]);if(4===r)return t.matr.init([0,0,0,0],[1,0,0,0],[0,1,0,0],[0,0,1,0]);for(var e=t.matr.init(),n=0;n<r;n++){e[n]=[];for(var i=0;i<r;i++)e[n][i]=t.numb.Kronecker(n,i+1)}return e},r.lowerTriangular=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(2===r)return t.matr.init([e[0]||0,0],[e[1]||0,e[2]||0]);if(3===r)return t.matr.init([e[0]||0,0,0],[e[1]||0,e[2]||0,0],[e[3]||0,e[4]||0,e[5]||0]);if(4===r)return t.matr.init([e[0]||0,0,0,0],[e[1]||0,e[2]||0,0,0],[e[3]||0,e[4]||0,e[5]||0,0],[e[6]||0,e[7]||0,e[8]||0,e[9]||0]);e=Array.isArray(e[0])?e[0]:e;for(var i=t.matr.init(),o=0,a=0;a<r;a++){i[a]=[];for(var u=0;u<r;u++)i[a][u]=u<=a&&e[o++]||0}return i},r.LUdecomp=function(r){if(t.matr.isSquare(r)){for(var e=t.matr.identity(t.matr.rows(r)),n=t.matr.fill(0,t.matr.rows(r)),i=0;i<t.matr.cols(r);i++){for(var o=0;o<=i;o++){for(var a=0,u=0;u<o;u++)a+=e[o][u]*n[u][i];n[o][i]=r[o][i]-a}for(o=i+1;o<t.matr.rows(r);o++){for(a=0,u=0;u<i;u++)a+=e[o][u]*n[u][i];e[o][i]=(r[o][i]-a)/n[i][i]}}return{L:e,U:n}}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square.')},r.mul=function(r,e){if(t.matr.cols(r)===t.matr.rows(e)){if(t.matr.isSizeOf(r,2)&&t.matr.isSizeOf(e,2,1))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0]],[r[1][0]*e[0][0]+r[1][1]*e[1][0]]);if(t.matr.isSizeOf(r,2)&&t.matr.isSizeOf(e,2))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0],r[0][0]*e[0][1]+r[0][1]*e[1][1]],[r[1][0]*e[0][0]+r[1][1]*e[1][0],r[1][0]*e[0][1]+r[1][1]*e[1][1]]);if(t.matr.isSizeOf(r,3)&&t.matr.isSizeOf(e,3,1))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0]+r[0][2]*e[2][0]],[r[1][0]*e[0][0]+r[1][1]*e[1][0]+r[1][2]*e[2][0]],[r[2][0]*e[0][0]+r[2][1]*e[1][0]+r[2][2]*e[2][0]]);if(t.matr.isSizeOf(r,3)&&t.matr.isSizeOf(e,3))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0]+r[0][2]*e[2][0],r[0][0]*e[0][1]+r[0][1]*e[1][1]+r[0][2]*e[2][1],r[0][0]*e[0][2]+r[0][1]*e[1][2]+r[0][2]*e[2][2]],[r[1][0]*e[0][0]+r[1][1]*e[1][0]+r[1][2]*e[2][0],r[1][0]*e[0][1]+r[1][1]*e[1][1]+r[1][2]*e[2][1],r[1][0]*e[0][2]+r[1][1]*e[1][2]+r[1][2]*e[2][2]],[r[2][0]*e[0][0]+r[2][1]*e[1][0]+r[2][2]*e[2][0],r[2][0]*e[0][1]+r[2][1]*e[1][1]+r[2][2]*e[2][1],r[2][0]*e[0][2]+r[2][1]*e[1][2]+r[2][2]*e[2][2]]);if(t.matr.isSizeOf(r,4)&&t.matr.isSizeOf(e,4,1))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0]+r[0][2]*e[2][0]+r[0][3]*e[3][0]],[r[1][0]*e[0][0]+r[1][1]*e[1][0]+r[1][2]*e[2][0]+r[1][3]*e[3][0]],[r[2][0]*e[0][0]+r[2][1]*e[1][0]+r[2][2]*e[2][0]+r[2][3]*e[3][0]],[r[3][0]*e[0][0]+r[3][1]*e[1][0]+r[3][2]*e[2][0]+r[3][3]*e[3][0]]);if(t.matr.isSizeOf(r,4)&&t.matr.isSizeOf(e,4))return t.matr.init([r[0][0]*e[0][0]+r[0][1]*e[1][0]+r[0][2]*e[2][0]+r[0][3]*e[3][0],r[0][0]*e[0][1]+r[0][1]*e[1][1]+r[0][2]*e[2][1]+r[0][3]*e[3][1],r[0][0]*e[0][2]+r[0][1]*e[1][2]+r[0][2]*e[2][2]+r[0][3]*e[3][2],r[0][0]*e[0][3]+r[0][1]*e[1][3]+r[0][2]*e[2][3]+r[0][3]*e[3][3]],[r[1][0]*e[0][0]+r[1][1]*e[1][0]+r[1][2]*e[2][0]+r[1][3]*e[3][0],r[1][0]*e[0][1]+r[1][1]*e[1][1]+r[1][2]*e[2][1]+r[1][3]*e[3][1],r[1][0]*e[0][2]+r[1][1]*e[1][2]+r[1][2]*e[2][2]+r[1][3]*e[3][2],r[1][0]*e[0][3]+r[1][1]*e[1][3]+r[1][2]*e[2][3]+r[1][3]*e[3][3]],[r[2][0]*e[0][0]+r[2][1]*e[1][0]+r[2][2]*e[2][0]+r[2][3]*e[3][0],r[2][0]*e[0][1]+r[2][1]*e[1][1]+r[2][2]*e[2][1]+r[2][3]*e[3][1],r[2][0]*e[0][2]+r[2][1]*e[1][2]+r[2][2]*e[2][2]+r[2][3]*e[3][2],r[2][0]*e[0][3]+r[2][1]*e[1][3]+r[2][2]*e[2][3]+r[2][3]*e[3][3]],[r[3][0]*e[0][0]+r[3][1]*e[1][0]+r[3][2]*e[2][0]+r[3][3]*e[3][0],r[3][0]*e[0][1]+r[3][1]*e[1][1]+r[3][2]*e[2][1]+r[3][3]*e[3][1],r[3][0]*e[0][2]+r[3][1]*e[1][2]+r[3][2]*e[2][2]+r[3][3]*e[3][2],r[3][0]*e[0][3]+r[3][1]*e[1][3]+r[3][2]*e[2][3]+r[3][3]*e[3][3]]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++){n[i]=[];for(var o=0;o<t.matr.cols(e);o++){n[i][o]=0;for(var a=0;a<t.matr.cols(r);a++)n[i][o]+=r[i][a]*e[a][o]}}return n}throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" where the numbers of columns of "matr1" must be equivalent to the number of rows of "matr2".')},r.mulKronecker=function(r,e){if(t.matr.isSizeOf(r,2)&&t.matr.isSizeOf(e,2))return t.matr.init([r[0][0]*e[0][0],r[0][0]*e[0][1],r[0][1]*e[0][0],r[0][1]*e[0][1]],[r[0][0]*e[1][0],r[0][0]*e[1][1],r[0][1]*e[1][0],r[0][1]*e[1][1]],[r[1][0]*e[0][0],r[1][0]*e[0][1],r[1][1]*e[0][0],r[1][1]*e[0][1]],[r[1][0]*e[1][0],r[1][0]*e[1][1],r[1][1]*e[1][0],r[1][1]*e[1][1]]);if(t.matr.isSizeOf(r,3)&&t.matr.isSizeOf(e,3))return t.matr.init([r[0][0]*e[0][0],r[0][0]*e[0][1],r[0][0]*e[0][2],r[0][1]*e[0][0],r[0][1]*e[0][1],r[0][1]*e[0][2],r[0][2]*e[0][0],r[0][2]*e[0][1],r[0][2]*e[0][2]],[r[0][0]*e[1][0],r[0][0]*e[1][1],r[0][0]*e[1][2],r[0][1]*e[1][0],r[0][1]*e[1][1],r[0][1]*e[1][2],r[0][2]*e[1][0],r[0][2]*e[1][1],r[0][2]*e[1][2]],[r[0][0]*e[2][0],r[0][0]*e[2][1],r[0][0]*e[2][2],r[0][1]*e[2][0],r[0][1]*e[2][1],r[0][1]*e[2][2],r[0][2]*e[2][0],r[0][2]*e[2][1],r[0][2]*e[2][2]],[r[1][0]*e[0][0],r[1][0]*e[0][1],r[1][0]*e[0][2],r[1][1]*e[0][0],r[1][1]*e[0][1],r[1][1]*e[0][2],r[1][2]*e[0][0],r[1][2]*e[0][1],r[1][2]*e[0][2]],[r[1][0]*e[1][0],r[1][0]*e[1][1],r[1][0]*e[1][2],r[1][1]*e[1][0],r[1][1]*e[1][1],r[1][1]*e[1][2],r[1][2]*e[1][0],r[1][2]*e[1][1],r[1][2]*e[1][2]],[r[1][0]*e[2][0],r[1][0]*e[2][1],r[1][0]*e[2][2],r[1][1]*e[2][0],r[1][1]*e[2][1],r[1][1]*e[2][2],r[1][2]*e[2][0],r[1][2]*e[2][1],r[1][2]*e[2][2]],[r[2][0]*e[0][0],r[2][0]*e[0][1],r[2][0]*e[0][2],r[2][1]*e[0][0],r[2][1]*e[0][1],r[2][1]*e[0][2],r[2][2]*e[0][0],r[2][2]*e[0][1],r[2][2]*e[0][2]],[r[2][0]*e[1][0],r[2][0]*e[1][1],r[2][0]*e[1][2],r[2][1]*e[1][0],r[2][1]*e[1][1],r[2][1]*e[1][2],r[2][2]*e[1][0],r[2][2]*e[1][1],r[2][2]*e[1][2]],[r[2][0]*e[2][0],r[2][0]*e[2][1],r[2][0]*e[2][2],r[2][1]*e[2][0],r[2][1]*e[2][1],r[2][1]*e[2][2],r[2][2]*e[2][0],r[2][2]*e[2][1],r[2][2]*e[2][2]]);if(t.matr.isSizeOf(r,4)&&t.matr.isSizeOf(e,4))return t.matr.init([r[0][0]*e[0][0],r[0][0]*e[0][1],r[0][0]*e[0][2],r[0][0]*e[0][3],r[0][1]*e[0][0],r[0][1]*e[0][1],r[0][1]*e[0][2],r[0][1]*e[0][3],r[0][2]*e[0][0],r[0][2]*e[0][1],r[0][2]*e[0][2],r[0][2]*e[0][3],r[0][3]*e[0][0],r[0][3]*e[0][1],r[0][3]*e[0][2],r[0][3]*e[0][3]],[r[0][0]*e[1][0],r[0][0]*e[1][1],r[0][0]*e[1][2],r[0][0]*e[1][3],r[0][1]*e[1][0],r[0][1]*e[1][1],r[0][1]*e[1][2],r[0][1]*e[1][3],r[0][2]*e[1][0],r[0][2]*e[1][1],r[0][2]*e[1][2],r[0][2]*e[1][3],r[0][3]*e[1][0],r[0][3]*e[1][1],r[0][3]*e[1][2],r[0][3]*e[1][3]],[r[0][0]*e[2][0],r[0][0]*e[2][1],r[0][0]*e[2][2],r[0][0]*e[2][3],r[0][1]*e[2][0],r[0][1]*e[2][1],r[0][1]*e[2][2],r[0][1]*e[2][3],r[0][2]*e[2][0],r[0][2]*e[2][1],r[0][2]*e[2][2],r[0][2]*e[2][3],r[0][3]*e[2][0],r[0][3]*e[2][1],r[0][3]*e[2][2],r[0][3]*e[2][3]],[r[0][0]*e[3][0],r[0][0]*e[3][1],r[0][0]*e[3][2],r[0][0]*e[3][3],r[0][1]*e[3][0],r[0][1]*e[3][1],r[0][1]*e[3][2],r[0][1]*e[3][3],r[0][2]*e[3][0],r[0][2]*e[3][1],r[0][2]*e[3][2],r[0][2]*e[3][3],r[0][3]*e[3][0],r[0][3]*e[3][1],r[0][3]*e[3][2],r[0][3]*e[3][3]],[r[1][0]*e[0][0],r[1][0]*e[0][1],r[1][0]*e[0][2],r[1][0]*e[0][3],r[1][1]*e[0][0],r[1][1]*e[0][1],r[1][1]*e[0][2],r[1][1]*e[0][3],r[1][2]*e[0][0],r[1][2]*e[0][1],r[1][2]*e[0][2],r[1][2]*e[0][3],r[1][3]*e[0][0],r[1][3]*e[0][1],r[1][3]*e[0][2],r[1][3]*e[0][3]],[r[1][0]*e[1][0],r[1][0]*e[1][1],r[1][0]*e[1][2],r[1][0]*e[1][3],r[1][1]*e[1][0],r[1][1]*e[1][1],r[1][1]*e[1][2],r[1][1]*e[1][3],r[1][2]*e[1][0],r[1][2]*e[1][1],r[1][2]*e[1][2],r[1][2]*e[1][3],r[1][3]*e[1][0],r[1][3]*e[1][1],r[1][3]*e[1][2],r[1][3]*e[1][3]],[r[1][0]*e[2][0],r[1][0]*e[2][1],r[1][0]*e[2][2],r[1][0]*e[2][3],r[1][1]*e[2][0],r[1][1]*e[2][1],r[1][1]*e[2][2],r[1][1]*e[2][3],r[1][2]*e[2][0],r[1][2]*e[2][1],r[1][2]*e[2][2],r[1][2]*e[2][3],r[1][3]*e[2][0],r[1][3]*e[2][1],r[1][3]*e[2][2],r[1][3]*e[2][3]],[r[1][0]*e[3][0],r[1][0]*e[3][1],r[1][0]*e[3][2],r[1][0]*e[3][3],r[1][1]*e[3][0],r[1][1]*e[3][1],r[1][1]*e[3][2],r[1][1]*e[3][3],r[1][2]*e[3][0],r[1][2]*e[3][1],r[1][2]*e[3][2],r[1][2]*e[3][3],r[1][3]*e[3][0],r[1][3]*e[3][1],r[1][3]*e[3][2],r[1][3]*e[3][3]],[r[2][0]*e[0][0],r[2][0]*e[0][1],r[2][0]*e[0][2],r[2][0]*e[0][3],r[2][1]*e[0][0],r[2][1]*e[0][1],r[2][1]*e[0][2],r[2][1]*e[0][3],r[2][2]*e[0][0],r[2][2]*e[0][1],r[2][2]*e[0][2],r[2][2]*e[0][3],r[2][3]*e[0][0],r[2][3]*e[0][1],r[2][3]*e[0][2],r[2][3]*e[0][3]],[r[2][0]*e[1][0],r[2][0]*e[1][1],r[2][0]*e[1][2],r[2][0]*e[1][3],r[2][1]*e[1][0],r[2][1]*e[1][1],r[2][1]*e[1][2],r[2][1]*e[1][3],r[2][2]*e[1][0],r[2][2]*e[1][1],r[2][2]*e[1][2],r[2][2]*e[1][3],r[2][3]*e[1][0],r[2][3]*e[1][1],r[2][3]*e[1][2],r[2][3]*e[1][3]],[r[2][0]*e[2][0],r[2][0]*e[2][1],r[2][0]*e[2][2],r[2][0]*e[2][3],r[2][1]*e[2][0],r[2][1]*e[2][1],r[2][1]*e[2][2],r[2][1]*e[2][3],r[2][2]*e[2][0],r[2][2]*e[2][1],r[2][2]*e[2][2],r[2][2]*e[2][3],r[2][3]*e[2][0],r[2][3]*e[2][1],r[2][3]*e[2][2],r[2][3]*e[2][3]],[r[2][0]*e[3][0],r[2][0]*e[3][1],r[2][0]*e[3][2],r[2][0]*e[3][3],r[2][1]*e[3][0],r[2][1]*e[3][1],r[2][1]*e[3][2],r[2][1]*e[3][3],r[2][2]*e[3][0],r[2][2]*e[3][1],r[2][2]*e[3][2],r[2][2]*e[3][3],r[2][3]*e[3][0],r[2][3]*e[3][1],r[2][3]*e[3][2],r[2][3]*e[3][3]],[r[3][0]*e[0][0],r[3][0]*e[0][1],r[3][0]*e[0][2],r[3][0]*e[0][3],r[3][1]*e[0][0],r[3][1]*e[0][1],r[3][1]*e[0][2],r[3][1]*e[0][3],r[3][2]*e[0][0],r[3][2]*e[0][1],r[3][2]*e[0][2],r[3][2]*e[0][3],r[3][3]*e[0][0],r[3][3]*e[0][1],r[3][3]*e[0][2],r[3][3]*e[0][3]],[r[3][0]*e[1][0],r[3][0]*e[1][1],r[3][0]*e[1][2],r[3][0]*e[1][3],r[3][1]*e[1][0],r[3][1]*e[1][1],r[3][1]*e[1][2],r[3][1]*e[1][3],r[3][2]*e[1][0],r[3][2]*e[1][1],r[3][2]*e[1][2],r[3][2]*e[1][3],r[3][3]*e[1][0],r[3][3]*e[1][1],r[3][3]*e[1][2],r[3][3]*e[1][3]],[r[3][0]*e[2][0],r[3][0]*e[2][1],r[3][0]*e[2][2],r[3][0]*e[2][3],r[3][1]*e[2][0],r[3][1]*e[2][1],r[3][1]*e[2][2],r[3][1]*e[2][3],r[3][2]*e[2][0],r[3][2]*e[2][1],r[3][2]*e[2][2],r[3][2]*e[2][3],r[3][3]*e[2][0],r[3][3]*e[2][1],r[3][3]*e[2][2],r[3][3]*e[2][3]],[r[3][0]*e[3][0],r[3][0]*e[3][1],r[3][0]*e[3][2],r[3][0]*e[3][3],r[3][1]*e[3][0],r[3][1]*e[3][1],r[3][1]*e[3][2],r[3][1]*e[3][3],r[3][2]*e[3][0],r[3][2]*e[3][1],r[3][2]*e[3][2],r[3][2]*e[3][3],r[3][3]*e[3][0],r[3][3]*e[3][1],r[3][3]*e[3][2],r[3][3]*e[3][3]]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++)for(var o=0;o<t.matr.cols(r);o++)for(var a=0;a<t.matr.rows(e);a++)for(var u=0;u<t.matr.cols(e);u++)n[i*t.matr.rows(e)+a]||(n[i*t.matr.rows(e)+a]=[]),n[i*t.matr.rows(e)+a][o*t.matr.cols(e)+u]=r[i][o]*e[a][u];return n},r.mulVector=function(r,e){if(t.vect.isDimensionOf(e,2))return 2===t.matr.rows(r)?t.matr.toVector(t.matr.mul(r,t.vect.toMatrix(e)),2):t.matr.mul(r,t.vect.toMatrix(e));if(t.vect.isDimensionOf(e,3))return 3===t.matr.rows(r)?t.matr.toVector(t.matr.mul(r,t.vect.toMatrix(e)),3):t.matr.mul(r,t.vect.toMatrix(e));if(t.vect.isDimensionOf(e,4))return 4===t.matr.rows(r)?t.matr.toVector(t.matr.mul(r,t.vect.toMatrix(e)),4):t.matr.mul(r,t.vect.toMatrix(e));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.negate=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([-r[0][0],-r[0][1]],[-r[1][0],-r[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([-r[0][0],-r[0][1],-r[0][2]],[-r[1][0],-r[1][1],-r[1][2]],[-r[2][0],-r[2][1],-r[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([-r[0][0],-r[0][1],-r[0][2],-r[0][3]],[-r[1][0],-r[1][1],-r[1][2],-r[1][3]],[-r[2][0],-r[2][1],-r[2][2],-r[2][3]],[-r[3][0],-r[3][1],-r[3][2],-r[3][3]]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e[n]=[];for(var i=0;i<t.matr.cols(r);i++)e[n][i]=-r[n][i]}return e},r.norm=function(r,e,n){if(void 0===e&&(e=2),void 0===n&&(n=2),t.matr.isSizeOf(r,2)&&2===e&&2===n)return t.real.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[1][0]*r[1][0]+r[1][1]*r[1][1]);if(t.matr.isSizeOf(r,3)&&2===e&&2===n)return t.real.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]+r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]+r[2][0]*r[2][0]+r[2][1]*r[2][1]+r[2][2]*r[2][2]);if(t.matr.isSizeOf(r,4)&&2===e&&2===n)return t.real.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]+r[0][3]*r[0][3]+r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]+r[1][3]*r[1][3]+r[2][0]*r[2][0]+r[2][1]*r[2][1]+r[2][2]*r[2][2]+r[2][3]*r[2][3]+r[3][0]*r[3][0]+r[3][1]*r[3][1]+r[3][2]*r[3][2]+r[3][3]*r[3][3]);for(var i=0,o=0;o<t.matr.rows(r);o++){for(var a=0,u=0;u<t.matr.cols(r);u++)a+=t.real.pow(r[o][u],e);i+=t.real.pow(a,n/e)}return t.real.pow(i,1/n)},r.normalize=function(r,e,n){if(void 0===e&&(e=2),void 0===n&&(n=2),t.matr.isSizeOf(r,2))return t.matr.init([r[0][0]/t.matr.norm(r,e,n),r[0][1]/t.matr.norm(r,e,n)],[r[1][0]/t.matr.norm(r,e,n),r[1][1]/t.matr.norm(r,e,n)]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0]/t.matr.norm(r,e,n),r[0][1]/t.matr.norm(r,e,n),r[0][2]/t.matr.norm(r,e,n)],[r[1][0]/t.matr.norm(r,e,n),r[1][1]/t.matr.norm(r,e,n),r[1][2]/t.matr.norm(r,e,n)],[r[2][0]/t.matr.norm(r,e,n),r[2][1]/t.matr.norm(r,e,n),r[2][2]/t.matr.norm(r,e,n)]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0]/t.matr.norm(r,e,n),r[0][1]/t.matr.norm(r,e,n),r[0][2]/t.matr.norm(r,e,n),r[0][3]/t.matr.norm(r,e,n)],[r[1][0]/t.matr.norm(r,e,n),r[1][1]/t.matr.norm(r,e,n),r[1][2]/t.matr.norm(r,e,n),r[1][3]/t.matr.norm(r,e,n)],[r[2][0]/t.matr.norm(r,e,n),r[2][1]/t.matr.norm(r,e,n),r[2][2]/t.matr.norm(r,e,n),r[2][3]/t.matr.norm(r,e,n)],[r[3][0]/t.matr.norm(r,e,n),r[3][1]/t.matr.norm(r,e,n),r[3][2]/t.matr.norm(r,e,n),r[3][3]/t.matr.norm(r,e,n)]);for(var i=t.matr.init(),o=0;o<t.matr.rows(r);o++){i[o]=[];for(var a=0;a<t.matr.cols(r);a++)i[o][a]=r[o][a]/t.matr.norm(r,e,n)}return i},r.normsq=function(r,e,n){if(void 0===e&&(e=2),void 0===n&&(n=2),t.matr.isSizeOf(r,2)&&2===e&&2===n)return r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[1][0]*r[1][0]+r[1][1]*r[1][1];if(t.matr.isSizeOf(r,3)&&2===e&&2===n)return r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]+r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]+r[2][0]*r[2][0]+r[2][1]*r[2][1]+r[2][2]*r[2][2];if(t.matr.isSizeOf(r,4)&&2===e&&2===n)return r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]+r[0][3]*r[0][3]+r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]+r[1][3]*r[1][3]+r[2][0]*r[2][0]+r[2][1]*r[2][1]+r[2][2]*r[2][2]+r[2][3]*r[2][3]+r[3][0]*r[3][0]+r[3][1]*r[3][1]+r[3][2]*r[3][2]+r[3][3]*r[3][3];for(var i=0,o=0;o<t.matr.rows(r);o++){for(var a=0,u=0;u<t.matr.cols(r);u++)a+=t.real.pow(r[o][u],e);i+=t.real.pow(a,n/e)}return i},r.nullspace=function(r){var e=r.map((function(e){return e.slice().concat(Array(t.matr.rows(r)).fill(0))}));return t.matr.Gaussian(e).filter((function(e){return e.slice(0,t.matr.rows(r)).every((function(t){return 0===t}))})).map((function(e){return e.slice(t.matr.rows(r))}))},r.perm=function(r){if(t.matr.isSquare(r)){if(1===t.matr.rows(r))return r[0][0];if(2===t.matr.rows(r))return r[0][0]*r[1][1]+r[0][1]*r[1][0];if(3===t.matr.rows(r))return r[0][0]*(r[1][1]*r[2][2]+r[1][2]*r[2][1])+r[0][1]*(r[1][0]*r[2][2]+r[1][2]*r[2][0])+r[0][2]*(r[1][0]*r[2][1]+r[1][1]*r[2][0]);if(4===t.matr.rows(r))return r[0][0]*(r[1][1]*(r[2][2]*r[3][3]+r[2][3]*r[3][2])+r[1][2]*(r[2][1]*r[3][3]+r[2][3]*r[3][1])+r[1][3]*(r[2][1]*r[3][2]+r[2][2]*r[3][1]))+r[0][1]*(r[1][0]*(r[2][2]*r[3][3]+r[2][3]*r[3][2])+r[1][2]*(r[2][0]*r[3][3]+r[2][3]*r[3][0])+r[1][3]*(r[2][0]*r[3][2]+r[2][2]*r[3][0]))+r[0][2]*(r[1][0]*(r[2][1]*r[3][3]+r[2][3]*r[3][1])+r[1][1]*(r[2][0]*r[3][3]+r[2][3]*r[3][0])+r[1][3]*(r[2][0]*r[3][1]+r[2][1]*r[3][0]))+r[0][3]*(r[1][0]*(r[2][1]*r[3][2]+r[2][2]*r[3][1])+r[1][1]*(r[2][0]*r[3][2]+r[2][2]*r[3][0])+r[1][2]*(r[2][0]*r[3][1]+r[2][1]*r[3][0]));for(var e=0,n=0;n<t.matr.rows(r);n++){var i=r[0][n]*t.matr.perm(t.matr.cofactor(r,0,n));e+=Math.abs(i)}return e}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square.')},r.pow=function(r,e){if(t.matr.isSquare(r)){if(0===e)return t.matr.identity(t.matr.rows(r));for(var n=r,i=1;i<e;i++)n=t.matr.mul(r,n);return n}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square.')},r.print=function(r){console.log(t.matr.toString(r))},r.pull=function(r,e,n){if(0===n)return r.splice(e,1),r;if(1===n){for(var i=0;i<t.matr.rows(r);i++)r[i].splice(e,1);return r}throw new TypeError('Parameter "axis" must be 0 or 1.')},r.push=function(r,e,n,i){if(0===n)return r.splice(e,0,i),r;if(1===n){for(var o=0;o<t.matr.rows(r);o++)r[o].splice(e,0,i[o]);return r}throw new TypeError('Parameter "axis" must be 0 or 1.')},r.QRdecomp=function(r){for(var e=t.matr.identity(t.matr.rows(r)),n=t.matr.copy(r),i=0;i<Math.min(t.matr.rows(r),t.matr.cols(r))-(t.matr.rows(r)>t.matr.cols(r)?0:1);i++){for(var o=0,a=i;a<t.matr.rows(r);a++)o+=n[a][i]*n[a][i];o=t.real.sqrt(o);var u=[];u[0]=o-n[i][i];var s=u[0]*u[0];for(a=1;a<t.matr.rows(r)-i;a++)u[a]=-n[a+i][i],s+=u[a]*u[a];for(s=1/t.real.sqrt(s),a=0;a<u.length;a++)u[a]*=s;for(n[i][i]=o,a=i+1;a<t.matr.rows(n);a++)n[a][i]=0;for(var c=i+1;c<t.matr.cols(n);c++){var f=0;for(a=0;a<u.length;a++)f+=u[a]*n[a+i][c];for(f*=2,a=0;a<u.length;a++)n[a+i][c]-=f*u[a]}for(c=0;c<t.matr.cols(e);c++){for(f=0,a=0;a<u.length;a++)f+=u[a]*e[c][a+i];for(f*=2,a=0;a<u.length;a++)e[c][a+i]-=f*u[a]}}return{Q:e,R:n}},r.random=function(r,e,n,i){if(void 0===i&&(i=n),2===n&&2===i)return t.matr.init([t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e)]);if(3===n&&3===i)return t.matr.init([t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)]);if(4===n&&4===i)return t.matr.init([t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)],[t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e)]);for(var o=t.matr.init(),a=0;a<n;a++){o.push([]);for(var u=0;u<i;u++)o[a].push(t.numb.random(r,e))}return o},r.rank=function(r){return t.matr.Gaussian(r).filter((function(t){return t.some((function(t){return 0!==t}))})).length},r.reciprocate=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([1/r[0][0],1/r[0][1]],[1/r[1][0],1/r[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([1/r[0][0],1/r[0][1],1/r[0][2]],[1/r[1][0],1/r[1][1],1/r[1][2]],[1/r[2][0],1/r[2][1],1/r[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([1/r[0][0],1/r[0][1],1/r[0][2],1/r[0][3]],[1/r[1][0],1/r[1][1],1/r[1][2],1/r[1][3]],[1/r[2][0],1/r[2][1],1/r[2][2],1/r[2][3]],[1/r[3][0],1/r[3][1],1/r[3][2],1/r[3][3]]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e[n]=[];for(var i=0;i<t.matr.cols(r);i++)e[n][i]=1/r[n][i]}return e},r.resize=function(r,e,n){void 0===n&&(n=e);for(var i=t.matr.init(),o=t.matr.rows(r),a=t.matr.cols(r),u=0;u<e;u++){i.push([]);for(var s=0;s<n;s++)i[u].push(u<o&&s<a?r[u][s]:0)}return i},r.rotator=function(r,e,n){if(void 0===e&&void 0===n)return t.matr.init([Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]);var i=t.matr.init([1,0,0],[0,Math.cos(r),-Math.sin(r)],[0,Math.sin(r),Math.cos(r)]),o=t.matr.init([Math.cos(e),0,Math.sin(e)],[0,1,0],[-Math.sin(e),0,Math.cos(e)]),a=t.matr.init([Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]);return t.matr.mul(t.matr.mul(a,o),i)},r.round=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([Math.round(r[0][0]),Math.round(r[0][1])],[Math.round(r[1][0]),Math.round(r[1][1])]);if(t.matr.isSizeOf(r,3))return t.matr.init([Math.round(r[0][0]),Math.round(r[0][1]),Math.round(r[0][2])],[Math.round(r[1][0]),Math.round(r[1][1]),Math.round(r[1][2])],[Math.round(r[2][0]),Math.round(r[2][1]),Math.round(r[2][2])]);if(t.matr.isSizeOf(r,4))return t.matr.init([Math.round(r[0][0]),Math.round(r[0][1]),Math.round(r[0][2]),Math.round(r[0][3])],[Math.round(r[1][0]),Math.round(r[1][1]),Math.round(r[1][2]),Math.round(r[1][3])],[Math.round(r[2][0]),Math.round(r[2][1]),Math.round(r[2][2]),Math.round(r[2][3])],[Math.round(r[3][0]),Math.round(r[3][1]),Math.round(r[3][2]),Math.round(r[3][3])]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e[n]=[];for(var i=0;i<t.matr.cols(r);i++)e[n][i]=Math.round(r[n][i])}return e},r.rows=function(t){return t.length},r.rowspace=function(r){return t.matr.Gaussian(r).filter((function(t){return t.some((function(t){return 0!==t}))}))},r.scaler=function(r){if("number"==typeof r.x&&"number"==typeof r.y&&void 0===r.z&&void 0===r.w)return t.matr.init([r.x,0],[0,r.y]);if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&void 0===r.w)return t.matr.init([r.x,0,0],[0,r.y,0],[0,0,r.z]);if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&"number"==typeof r.w)return t.matr.init([r.x,0,0,0],[0,r.y,0,0],[0,0,r.z,0],[0,0,0,r.w]);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.scl=function(r,e){if(t.matr.isSizeOf(r,2,1))return t.matr.init([r[0][0]*e],[r[1][0]*e]);if(t.matr.isSizeOf(r,2))return t.matr.init([r[0][0]*e,r[0][1]*e],[r[1][0]*e,r[1][1]*e]);if(t.matr.isSizeOf(r,3,1))return t.matr.init([r[0][0]*e],[r[1][0]*e],[r[2][0]*e]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0]*e,r[0][1]*e,r[0][2]*e],[r[1][0]*e,r[1][1]*e,r[1][2]*e],[r[2][0]*e,r[2][1]*e,r[2][2]*e]);if(t.matr.isSizeOf(r,4,1))return t.matr.init([r[0][0]*e],[r[1][0]*e],[r[2][0]*e],[r[3][0]*e]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0]*e,r[0][1]*e,r[0][2]*e,r[0][3]*e],[r[1][0]*e,r[1][1]*e,r[1][2]*e,r[1][3]*e],[r[2][0]*e,r[2][1]*e,r[2][2]*e,r[2][3]*e],[r[3][0]*e,r[3][1]*e,r[3][2]*e,r[3][3]*e]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++){n[i]=[];for(var o=0;o<t.matr.cols(r);o++)n[i][o]=r[i][o]*e}return n},r.solve=function(r,e){if(t.matr.isSquare(r)){if(t.matr.rows(r)===t.matr.rows(e)){if(0!==t.matr.det(r))return t.matr.mul(t.matr.invert(r),e);throw new TypeError('Parameter "matrA" must be of type "ChalkboardMatrix" that has a non-zero determinant.')}throw new TypeError('Parameters "matrA" and "matrB" must be of type "ChalkboardMatrix" with equivalent numbers of rows.')}throw new TypeError('Parameter "matrA" must be of type "ChalkboardMatrix" that is square.')},r.sub=function(r,e){if(t.matr.isSizeEqual(r,e)){if(t.matr.isSizeOf(r,2))return t.matr.init([r[0][0]-e[0][0],r[0][1]-e[0][1]],[r[1][0]-e[1][0],r[1][1]-e[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0]-e[0][0],r[0][1]-e[0][1],r[0][2]-e[0][2]],[r[1][0]-e[1][0],r[1][1]-e[1][1],r[1][2]-e[1][2]],[r[2][0]-e[2][0],r[2][1]-e[2][1],r[2][2]-e[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0]-e[0][0],r[0][1]-e[0][1],r[0][2]-e[0][2],r[0][3]-e[0][3]],[r[1][0]-e[1][0],r[1][1]-e[1][1],r[1][2]-e[1][2],r[1][3]-e[1][3]],[r[2][0]-e[2][0],r[2][1]-e[2][1],r[2][2]-e[2][2],r[2][3]-e[2][3]],[r[3][0]-e[3][0],r[3][1]-e[3][1],r[3][2]-e[3][2],r[3][3]-e[3][3]]);for(var n=t.matr.init(),i=0;i<t.matr.rows(r);i++){n[i]=[];for(var o=0;o<t.matr.cols(r);o++)n[i][o]=r[i][o]-e[i][o]}return n}throw new TypeError('Parameters "matr1" and "matr2" must be of type "ChalkboardMatrix" with equivalent numbers of rows and columns.')},r.symmetricBinomial=function(r){return 2===r?t.matr.init([1,1],[1,2]):3===r?t.matr.init([1,1,1],[1,2,3],[1,3,6]):4===r?t.matr.init([1,1,1,1],[1,2,3,4],[1,3,6,10],[1,4,10,20]):t.matr.mul(t.matr.lowerBinomial(r),t.matr.upperBinomial(r))},r.toArray=function(r){if(t.matr.isSizeOf(r,2))return[r[0][0],r[0][1],r[1][0],r[1][1]];if(t.matr.isSizeOf(r,3))return[r[0][0],r[0][1],r[0][2],r[1][0],r[1][1],r[1][2],r[2][0],r[2][1],r[2][2]];if(t.matr.isSizeOf(r,4))return[r[0][0],r[0][1],r[0][2],r[0][3],r[1][0],r[1][1],r[1][2],r[1][3],r[2][0],r[2][1],r[2][2],r[2][3],r[3][0],r[3][1],r[3][2],r[3][3]];for(var e=[],n=0;n<t.matr.rows(r);n++)for(var i=0;i<t.matr.cols(r);i++)e.push(r[n][i]);return e},r.toObject=function(r){if(t.matr.isSizeOf(r,2))return{i1:{j1:r[0][0],j2:r[0][1]},i2:{j1:r[1][0],j2:r[1][1]}};if(t.matr.isSizeOf(r,3))return{i1:{j1:r[0][0],j2:r[0][1],j3:r[0][2]},i2:{j1:r[1][0],j2:r[1][1],j3:r[1][2]},i3:{j1:r[2][0],j2:r[2][1],j3:r[2][2]}};if(t.matr.isSizeOf(r,4))return{i1:{j1:r[0][0],j2:r[0][1],j3:r[0][2],j4:r[0][3]},i2:{j1:r[1][0],j2:r[1][1],j3:r[1][2],j4:r[1][3]},i3:{j1:r[2][0],j2:r[2][1],j3:r[2][2],j4:r[2][3]},i4:{j1:r[3][0],j2:r[3][1],j3:r[3][2],j4:r[3][3]}};for(var e={},n=0;n<t.matr.rows(r);n++){e["i"+(n+1)]={};for(var i=0;i<t.matr.cols(r);i++)e["i"+(n+1)]["j"+(i+1)]=r[n][i]}return e},r.toSet=function(r){return t.abal.set(t.matr.toArray(r))},r.toString=function(r){if(t.matr.isSizeOf(r,2))return"[ "+r[0][0].toString()+" "+r[0][1].toString()+" ]\n[ "+r[1][0].toString()+" "+r[1][1].toString()+" ]";if(t.matr.isSizeOf(r,3))return"[ "+r[0][0].toString()+" "+r[0][1].toString()+" "+r[0][2].toString()+" ]\n[ "+r[1][0].toString()+" "+r[1][1].toString()+" "+r[1][2].toString()+" ]\n[ "+r[2][0].toString()+" "+r[2][1].toString()+" "+r[2][2].toString()+" ]";if(t.matr.isSizeOf(r,4))return"[ "+r[0][0].toString()+" "+r[0][1].toString()+" "+r[0][2].toString()+" "+r[0][3].toString()+" ]\n[ "+r[1][0].toString()+" "+r[1][1].toString()+" "+r[1][2].toString()+" "+r[1][3].toString()+" ]\n[ "+r[2][0].toString()+" "+r[2][1].toString()+" "+r[2][2].toString()+" "+r[2][3].toString()+" ]\n[ "+r[3][0].toString()+" "+r[3][1].toString()+" "+r[3][2].toString()+" "+r[3][3].toString()+" ]";for(var e="",n=0;n<t.matr.rows(r);n++){e+="[ ";for(var i=0;i<t.matr.cols(r);i++)e+=r[n][i].toString()+" ";e=e.trimEnd()+" ]\n"}return e},r.toTensor=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return i=Array.isArray(i[0])?i[0]:i,(n=t.tens).resize.apply(n,e([r],i,!1))},r.toVector=function(r,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=0),2===e){if(0===i)return t.vect.init(r[0][n],r[1][n]);if(1===i)return t.vect.init(r[n][0],r[n][1]);throw new TypeError('Parameter "axis" must be 0 or 1.')}if(3===e){if(0===i)return t.vect.init(r[0][n],r[1][n],r[2][n]);if(1===i)return t.vect.init(r[n][0],r[n][1],r[n][2]);throw new TypeError('Parameter "axis" must be 0 or 1.')}if(4===e){if(0===i)return t.vect.init(r[0][n],r[1][n],r[2][n],r[3][n]);if(1===i)return t.vect.init(r[n][0],r[n][1],r[n][2],r[n][3]);throw new TypeError('Parameter "axis" must be 0 or 1.')}throw new TypeError('Parameter "dimension" must be 2, 3, or 4.')},r.trace=function(r){if(t.matr.isSquare(r)){if(2===t.matr.rows(r))return r[0][0]+r[1][1];if(3===t.matr.rows(r))return r[0][0]+r[1][1]+r[2][2];if(4===t.matr.rows(r))return r[0][0]+r[1][1]+r[2][2]+r[3][3];for(var e=0,n=0;n<t.matr.rows(r);n++)e+=r[n][n];return e}throw new TypeError('Parameter "matr" must be of type "ChalkboardMatrix" that is square.')},r.transpose=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([r[0][0],r[1][0]],[r[0][1],r[1][1]]);if(t.matr.isSizeOf(r,3))return t.matr.init([r[0][0],r[1][0],r[2][0]],[r[0][1],r[1][1],r[2][1]],[r[0][2],r[1][2],r[2][2]]);if(t.matr.isSizeOf(r,4))return t.matr.init([r[0][0],r[1][0],r[2][0],r[3][0]],[r[0][1],r[1][1],r[2][1],r[3][1]],[r[0][2],r[1][2],r[2][2],r[3][2]],[r[0][3],r[1][3],r[2][3],r[3][3]]);for(var e=t.matr.init(),n=0;n<t.matr.cols(r);n++){e[n]=[];for(var i=0;i<t.matr.rows(r);i++)e[n][i]=r[i][n]}return e},r.translator=function(r){if("number"==typeof r.x&&"number"==typeof r.y&&void 0===r.z&&void 0===r.w)return t.matr.init([1,0,r.x],[0,1,r.y],[0,0,1]);if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&void 0===r.w)return t.matr.init([1,0,0,r.x],[0,1,0,r.y],[0,0,1,r.z],[0,0,0,1]);if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&"number"==typeof r.w)return t.matr.init([1,0,0,0,r.x],[0,1,0,0,r.y],[0,0,1,0,r.z],[0,0,0,1,r.w],[0,0,0,0,1]);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.upperBinomial=function(r){if(2===r)return t.matr.init([1,1],[0,1]);if(3===r)return t.matr.init([1,2,1],[0,1,1],[0,0,1]);if(4===r)return t.matr.init([1,3,3,1],[0,1,2,1],[0,0,1,1],[0,0,0,1]);for(var e=t.matr.init(),n=0;n<r;n++){e.push([]);for(var i=0;i<r;i++)e[n].push(t.numb.binomial(i,n))}return e},r.upperShift=function(r){if(2===r)return t.matr.init([0,1],[0,0]);if(3===r)return t.matr.init([0,1,0],[0,0,1],[0,0,0]);if(4===r)return t.matr.init([0,1,0,0],[0,0,1,0],[0,0,0,1],[0,0,0,0]);for(var e=t.matr.init(),n=0;n<r;n++){e[n]=[];for(var i=0;i<r;i++)e[n][i]=t.numb.Kronecker(n+1,i)}return e},r.upperTriangular=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(2===r)return t.matr.init([e[0]||0,e[1]||0],[0,e[2]||0]);if(3===r)return t.matr.init([e[0]||0,e[1]||0,e[2]||0],[0,e[3]||0,e[4]||0],[0,0,e[5]||0]);if(4===r)return t.matr.init([e[0]||0,e[1]||0,e[2]||0,e[3]||0],[0,e[4]||0,e[5]||0,e[6]||0],[0,0,e[7]||0,e[8]||0],[0,0,0,e[9]||0]);e=Array.isArray(e[0])?e[0]:e;for(var i=t.matr.init(),o=0,a=0;a<r;a++){i[a]=[];for(var u=0;u<r;u++)i[a][u]=u>=a&&e[o++]||0}return i},r.zero=function(r){if(t.matr.isSizeOf(r,2))return t.matr.init([0,0],[0,0]);if(t.matr.isSizeOf(r,3))return t.matr.init([0,0,0],[0,0,0],[0,0,0]);if(t.matr.isSizeOf(r,4))return t.matr.init([0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]);for(var e=t.matr.init(),n=0;n<t.matr.rows(r);n++){e[n]=[];for(var i=0;i<t.matr.cols(r);i++)e[n][i]=0}return e}}(t||(t={})),function(t){!function(r){r.Bernoullian=function(t){return void 0===t&&(t=.5),Math.random()<t?1:0},r.binomial=function(t,r){if(r<0||r>t)return 0;if(0===r||r===t)return 1;if(1===r||r===t-1)return t;t-r<r&&(r=t-r);for(var e=t,n=2;n<=r;n++)e*=(t-n+1)/n;return Math.round(e)},r.change=function(t,r){return(r-t)/t},r.combination=function(r,e){return t.numb.factorial(r)/(t.numb.factorial(r-e)*t.numb.factorial(e))},r.compositeArr=function(r,e){for(var n=[],i=r;i<=e;i++)t.numb.isPrime(i)||n.push(i);return n},r.compositeCount=function(r,e){return t.numb.compositeArr(r,e).length},r.constrain=function(t,r){return void 0===r&&(r=[0,1]),Math.max(Math.min(t,r[1]),r[0])},r.divisors=function(t){for(var r=[],e=1;e<=t;e++)t%e==0&&r.push(e);return r},r.Euler=function(r){if(r>0){for(var e=t.numb.factors(r),n=0;n<e.length;n++)r*=(e[n]-1)/e[n];return r}},r.exponential=function(t){return void 0===t&&(t=1),t<=0?0:-Math.log(Math.random())/t},r.factorial=function(t){for(var r=1,e=1;e<=t;e++)r*=e;return r},r.factors=function(r){for(var e=[];r%2==0;)e.push(2),r/=2;for(var n=3;n<=t.real.sqrt(r);n+=2)for(;r%n==0;)e.push(n),r/=n;return r>2&&e.push(r),e},r.Fibonacci=function(r){var e=[0,1];return void 0===e[r]&&e.push(t.numb.Fibonacci(r-1)+e[r-2]),e[r]},r.Gaussian=function(r,e,n){var i=Math.random(),o=Math.random();return t.real.sqrt(-2*t.real.ln(i))*t.trig.cos(t.PI(2)*o)*r*t.real.sqrt(n)+e},r.gcd=function(r,e){return 0===e?r:t.numb.gcd(e,r%e)},r.Goldbach=function(r){if(r%2==0){if(4!==r){var e=r/2,n=r/2;for(e%2==0&&(e--,n++);e>=3;){if(t.numb.isPrime(e)&&t.numb.isPrime(n))return[e,n];e-=2,n+=2}return}return[2,2]}},r.isApproxEqual=function(t,r,e){return void 0===e&&(e=1e-6),Math.abs(t-r)<e},r.isPrime=function(r){for(var e=2;e<=t.real.sqrt(r);e++)if(r%e==0)return!1;return r>1},r.isRational=function(r,e){if(void 0===e&&(e=1e-8),!isFinite(r))return!1;try{var n=t.numb.toFraction(r,e),i=n[0],o=n[1];return Math.abs(r-i/o)<e}catch(t){return!1}},r.Kronecker=function(t,r){return t===r?1:0},r.lcm=function(r,e){return r*(e/t.numb.gcd(r,e))},r.map=function(t,r,e){return e[0]+(e[1]-e[0])*((t-r[0])/(r[1]-r[0]))},r.mod=function(t,r){return(t%r+r)%r},r.mul=function(r,e,n){for(var i=1,o=t.real.parse("n => "+r),a=e;a<=n;a++)i*=o(a);return i},r.nextPrime=function(r){for(var e=r+1;!t.numb.isPrime(e);)e++;return e},r.permutation=function(r,e){return t.numb.factorial(r)/t.numb.factorial(r-e)},r.Poissonian=function(r){if(void 0===r&&(r=1),r>0){for(var e=t.E(-r),n=1,i=0;n>e;++i)n*=Math.random();return i-1}return 0},r.prime=function(r){if(2===r)return 2;for(var e=1,n=3;e<r;)t.numb.isPrime(n)&&e++,e<r&&(n+=2);return n},r.primeArr=function(r,e){for(var n=[],i=r;i<=e;i++)t.numb.isPrime(i)&&n.push(i);return n},r.primeCount=function(r,e){return t.numb.primeArr(r,e).length},r.primeGap=function(r,e){for(var n=null,i=0,o=r;o<=e;o++)if(t.numb.isPrime(o)){if(null!==n){var a=o-n;a>i&&(i=a)}n=o}return i},r.random=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=1),t+(r-t)*Math.random()},r.roundTo=function(t,r){return Math.round(t/r)*r},r.sgn=function(t){return t>0?1:t<0?-1:0},r.sum=function(r,e,n){for(var i=0,o=t.real.parse("n => "+r),a=e;a<=n;a++)i+=o(a);return i},r.toBinary=function(t,r){if(void 0===r&&(r=!1),!Number.isInteger(t))throw new Error('Parameter "num" must be an integer.');return(r?"0b":"")+(t<0?"-":"")+Math.abs(t).toString(2)},r.toDecimal=function(t,r){if(r<2||r>36)throw new Error('Parameter "base" must be between 2 and 36.');t=t.toLowerCase(),2===r&&t.startsWith("0b")&&(t=t.substring(2)),8===r&&t.startsWith("0o")&&(t=t.substring(2)),16===r&&t.startsWith("0x")&&(t=t.substring(2)),t.startsWith("-")&&(t=t.substring(1));for(var e="0123456789abcdefghijklmnopqrstuvwxyz".substring(0,r),n=0,i=t;n<i.length;n++){var o=i[n];if(!e.includes(o))throw new Error('Invalid character "'.concat(o,'" for base ').concat(r,"."))}var a=parseInt(t,r);return t.startsWith("-")?-a:a},r.toFraction=function(r,e){if(void 0===e&&(e=1e-8),!isFinite(r))throw new Error('The parameter "num" must be finite to be converted to a fraction.');var n=t.numb.sgn(r);if(r*=n,Number.isInteger(r))return[n*r,1];for(var i=1,o=0,a=0,u=1,s=r;;){var c=Math.floor(s),f=c*i+o,l=c*a+u,m=f/l;if(Math.abs(r-m)<e){var d=t.numb.gcd(f,l);return[n*(f/d),l/d]}o=i,i=f,u=a,a=l,s=1/(s-c)}},r.toHexadecimal=function(t,r,e){if(void 0===r&&(r=!1),void 0===e&&(e=!1),!Number.isInteger(t))throw new Error('The parameter "num" must be an integer.');var n=Math.abs(t).toString(16);return e&&(n=n.toUpperCase()),(r?"0x":"")+(t<0?"-":"")+n},r.toOctal=function(t,r){if(void 0===r&&(r=!1),!Number.isInteger(t))throw new Error('The parameter "num" must be an integer.');return(r?"0o":"")+(t<0?"-":"")+Math.abs(t).toString(8)}}(t.numb||(t.numb={}))}(t||(t={})),function(t){!function(r){r.absolute=function(r){if("expl"===r.type||"inve"===r.type||"pola"===r.type||"mult"===r.type)return t.real.define("Math.abs(".concat(r.definition,")"),r.type);if("curv"===r.type&&Array.isArray(r.definition)){if(2===r.definition.length)return t.real.define(["Math.abs(".concat(r.definition[0],")"),"Math.abs(".concat(r.definition[1],")")],"curv");if(3===r.definition.length)return t.real.define(["Math.abs(".concat(r.definition[0],")"),"Math.abs(".concat(r.definition[1],")"),"Math.abs(".concat(r.definition[2],")")],"curv")}else if("surf"===r.type&&Array.isArray(r.definition))return t.real.define(["Math.abs(".concat(r.definition[0],")"),"Math.abs(".concat(r.definition[1],")"),"Math.abs(".concat(r.definition[2],")")],"surf");throw new TypeError('Property "type" of "func" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.add=function(r,e){if("expl"===r.type&&"expl"===e.type||"inve"===r.type&&"inve"===e.type||"pola"===r.type&&"pola"===e.type||"mult"===r.type&&"mult"===e.type)return t.real.define("(".concat(r.definition,") + (").concat(e.definition,")"),r.type);if("curv"===r.type&&"curv"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition)){if(2===r.definition.length&&2===e.definition.length)return t.real.define(["(".concat(r.definition[0],") + (").concat(e.definition[0],")"),"(".concat(r.definition[1],") + (").concat(e.definition[1],")")],"curv");if(3===r.definition.length&&3===e.definition.length)return t.real.define(["(".concat(r.definition[0],") + (").concat(e.definition[0],")"),"(".concat(r.definition[1],") + (").concat(e.definition[1],")"),"(".concat(r.definition[2],") + (").concat(e.definition[2],")")],"curv")}else if("surf"===r.type&&"surf"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition))return t.real.define(["(".concat(r.definition[0],") + (").concat(e.definition[0],")"),"(".concat(r.definition[1],") + (").concat(e.definition[1],")"),"(".concat(r.definition[2],") + (").concat(e.definition[2],")")],"surf");throw new TypeError('Property "type" of "func1" and "func2" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.compose=function(r,e){if("expl"===r.type&&"expl"===e.type)return t.real.define("(".concat(r.definition.toString().replace(/x/g,"(".concat(e.definition,")")),")"),"expl");if("inve"===r.type&&"inve"===e.type)return t.real.define("(".concat(r.definition.toString().replace(/y/g,"(".concat(e.definition,")")),")"),"inve");if("pola"===r.type&&"pola"===e.type)return t.real.define("(".concat(r.definition.toString().replace(/O/g,"(".concat(e.definition,")")),")"),"pola");if("curv"===r.type&&"curv"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition)){if(2===r.definition.length&&2===e.definition.length)return t.real.define(["(".concat(r.definition[0].toString().replace(/x/g,"(".concat(e.definition[0],")")),")"),"(".concat(r.definition[1].toString().replace(/y/g,"(".concat(e.definition[1],")")),")")],"curv");if(3===r.definition.length&&3===e.definition.length)return t.real.define(["(".concat(r.definition[0].toString().replace(/x/g,"(".concat(e.definition[0],")")),")"),"(".concat(r.definition[1].toString().replace(/y/g,"(".concat(e.definition[1],")")),")"),"(".concat(r.definition[2].toString().replace(/z/g,"(".concat(e.definition[2],")")),")")],"curv")}else if("surf"===r.type&&"surf"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition))return t.real.define(["(".concat(r.definition[0].toString().replace(/x/g,"(".concat(e.definition[0],")")),")"),"(".concat(r.definition[1].toString().replace(/y/g,"(".concat(e.definition[1],")")),")"),"(".concat(r.definition[2].toString().replace(/z/g,"(".concat(e.definition[2],")")),")")],"surf");throw new TypeError('Property "type" of "func1" and "func2" must be either "expl", "inve", "pola", "curv", or "surf".')},r.define=function(t,r){if(void 0===r&&(r="expl"),"expl"===r||"inve"===r||"pola"===r||"mult"===r)return{definition:t,type:r};if("curv"===r&&Array.isArray(t))return{definition:2===t.length?[t[0],t[1]]:[t[0],t[1],t[2]],type:r};if("surf"===r&&Array.isArray(t))return{definition:[t[0],t[1],t[2]],type:r};throw new TypeError('Parameter "type" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.Dirac=function(t,r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t===r?e:0},r.discriminant=function(t,r,e,n){if(void 0===n&&(n="stan"),"stan"===n)return r*r-4*t*e;if("vert"===n)return 2*t*r*(2*t*r)-4*t*e;throw new TypeError('Parameter "form" must be "stan" or "vert".')},r.div=function(r,e){if("expl"===r.type&&"expl"===e.type||"inve"===r.type&&"inve"===e.type||"pola"===r.type&&"pola"===e.type||"mult"===r.type&&"mult"===e.type)return t.real.define("(".concat(r.definition,") / (").concat(e.definition,")"),r.type);if("curv"===r.type&&"curv"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition)){if(2===r.definition.length)return t.real.define(["(".concat(r.definition[0],") / (").concat(e.definition[0],")"),"(".concat(r.definition[1],") / (").concat(e.definition[1],")")],"curv");if(3===r.definition.length)return t.real.define(["(".concat(r.definition[0],") / (").concat(e.definition[0],")"),"(".concat(r.definition[1],") / (").concat(e.definition[1],")"),"(".concat(r.definition[2],") / (").concat(e.definition[2],")")],"curv")}else if("surf"===r.type&&"surf"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition))return t.real.define(["(".concat(r.definition[0],") / (").concat(e.definition[0],")"),"(".concat(r.definition[1],") / (").concat(e.definition[1],")"),"(".concat(r.definition[2],") / (").concat(e.definition[2],")")],"surf");throw new TypeError('Property "type" of "func1" and "func2" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.Heaviside=function(t,r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t>=r?e:0},r.lerp=function(t,r){return(t[1]-t[0])*r+t[0]},r.linear=function(r,e,n,i){return t.real.define(t.real.slope(r,e,n,i).toString()+" * (x - "+n.toString()+") + "+i.toString())},r.linearFormula=function(r,e,n,i){return void 0===n&&void 0===i?-e/r:"number"==typeof n&&void 0===i?n/r:-e/t.real.slope(r,e,n,i)+r},r.ln=function(r){return t.calc.fxdx(t.real.define("1 / x"),1,r)},r.log=function(r,e){return t.real.ln(e)/t.real.ln(r)},r.log10=function(r){return t.real.log(10,r)},r.mul=function(r,e){if("expl"===r.type&&"expl"===e.type||"inve"===r.type&&"inve"===e.type||"pola"===r.type&&"pola"===e.type||"mult"===r.type&&"mult"===e.type)return t.real.define("(".concat(r.definition,") * (").concat(e.definition,")"),r.type);if("curv"===r.type&&"curv"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition)){if(2===r.definition.length)return t.real.define(["(".concat(r.definition[0],") * (").concat(e.definition[0],")"),"(".concat(r.definition[1],") * (").concat(e.definition[1],")")],"curv");if(3===r.definition.length)return t.real.define(["(".concat(r.definition[0],") * (").concat(e.definition[0],")"),"(".concat(r.definition[1],") * (").concat(e.definition[1],")"),"(".concat(r.definition[2],") * (").concat(e.definition[2],")")],"curv")}else if("surf"===r.type&&"surf"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition))return t.real.define(["(".concat(r.definition[0],") * (").concat(e.definition[0],")"),"(".concat(r.definition[1],") * (").concat(e.definition[1],")"),"(".concat(r.definition[2],") * (").concat(e.definition[2],")")],"surf");throw new TypeError('Property "type" of "func1" and "func2" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.negate=function(r){return t.real.scl(r,-1)},r.parse=function(r){return Function('"use strict"; '+t.PARSEPREFIX+" return ("+r+")")()},r.pingpong=function(t,r,e){return void 0===r&&(r=0),void 0===e&&(e=1),(t+r)%(2*e)<e?(t+r)%e:e-(t+r)%e},r.polynomial=function(){for(var r,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r=1===e.length&&Array.isArray(e[0])?e[0]:e;for(var i="",o=0;o<r.length;o++){var a=r[o],u=r.length-o-1;if(0!==a||0===u){""!==i?i+=a>=0?" + ":" - ":a<0&&(i+="-");var s=Math.abs(a);i+="("+(0===u?s.toString():1===u?(1===s?"":s+" * ")+"x":(1===s?"":s+" * ")+"x ** "+u)+")"}}return""===i&&(i="0"),t.real.define(i,"expl")},r.pow=function(r,e){if("number"==typeof r)return 0===r&&0===e?1:Math.exp(e*Math.log(r));var n=r;if("expl"===n.type||"inve"===n.type||"pola"===n.type||"mult"===n.type)return t.real.define("(".concat(n.definition,") ** ").concat(e),n.type);if("curv"===n.type&&Array.isArray(n.definition)){if(2===n.definition.length)return t.real.define(["(".concat(n.definition[0],") ** ").concat(e),"(".concat(n.definition[1],") ** ").concat(e)],"curv");if(3===n.definition.length)return t.real.define(["(".concat(n.definition[0],") ** ").concat(e),"(".concat(n.definition[1],") ** ").concat(e),"(".concat(n.definition[2],") ** ").concat(e)],"curv")}else if("surf"===n.type&&Array.isArray(n.definition))return t.real.define(["(".concat(n.definition[0],") ** ").concat(e),"(".concat(n.definition[1],") ** ").concat(e),"(".concat(n.definition[2],") ** ").concat(e)],"surf");throw new TypeError('Property "type" of "base" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.qerp=function(t,r,e,n){return(t[1]/((t[0]-r[0])*(t[0]-e[0]))+r[1]/((r[0]-t[0])*(r[0]-e[0]))+e[1]/((e[0]-t[0])*(e[0]-r[0])))*n*n+(-t[1]*(r[0]+e[0])/((t[0]-r[0])*(t[0]-e[0]))-r[1]*(t[0]+e[0])/((r[0]-t[0])*(r[0]-e[0]))-e[1]*(t[0]+r[0])/((e[0]-t[0])*(e[0]-r[0])))*n+(t[1]*r[0]*e[0]/((t[0]-r[0])*(t[0]-e[0]))+r[1]*t[0]*e[0]/((r[0]-t[0])*(r[0]-e[0]))+e[1]*t[0]*r[0]/((e[0]-t[0])*(e[0]-r[0])))},r.quadratic=function(r,e,n,i){if(void 0===i&&(i="stan"),"stan"===i)return t.real.define(r.toString()+"* x * x + "+e.toString()+" * x +"+n.toString());if("vert"===i)return t.real.define(r.toString()+" * ((x - "+e.toString()+") * (x - "+e.toString()+")) +"+n.toString());throw new TypeError('Parameter "form" must be "stan" or "vert".')},r.quadraticFormula=function(r,e,n,i){if(void 0===i&&(i="stan"),"stan"===i)return[(-e+t.real.sqrt(t.real.discriminant(r,e,n,"stan")))/(2*r),(-e-Math.sqrt(t.real.discriminant(r,e,n,"stan")))/(2*r)];if("vert"===i)return[e+t.real.sqrt(-n/r),e-t.real.sqrt(-n/r)];throw new TypeError('Parameter "form" must be "stan" or "vert".')},r.ramp=function(t,r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t>=r?t*e:0},r.randomPolynomial=function(r,e,n){var i;return void 0===e&&(e=0),void 0===n&&(n=1),(i=t.real).polynomial.apply(i,t.stat.random(r+1,e,n))},r.reciprocate=function(r){if("expl"===r.type||"inve"===r.type||"pola"===r.type||"mult"===r.type)return t.real.define("1 / (".concat(r.definition,")"),r.type);if("curv"===r.type&&Array.isArray(r.definition)){if(2===r.definition.length)return t.real.define(["1 / (".concat(r.definition[0],")"),"1 / (".concat(r.definition[1],")")],"curv");if(3===r.definition.length)return t.real.define(["1 / (".concat(r.definition[0],")"),"1 / (".concat(r.definition[1],")"),"1 / (".concat(r.definition[2],")")],"curv")}else if("surf"===r.type&&Array.isArray(r.definition))return t.real.define(["1 / (".concat(r.definition[0],")"),"1 / (".concat(r.definition[1],")"),"1 / (".concat(r.definition[2],")")],"surf");throw new TypeError('Property "type" of "func" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.rect=function(t,r,e,n){return void 0===r&&(r=0),void 0===e&&(e=2),void 0===n&&(n=1),t>r+e/2||t<r-e/2?0:n},r.root=function(t,r){return void 0===r&&(r=3),Math.exp(Math.log(t)/r)},r.scl=function(r,e){if("expl"===r.type||"inve"===r.type||"pola"===r.type||"mult"===r.type)return t.real.define("".concat(e," * (").concat(r.definition,")"),r.type);if("curv"===r.type&&Array.isArray(r.definition)){if(2===r.definition.length)return t.real.define(["".concat(e," * (").concat(r.definition[0],")"),"".concat(e," * (").concat(r.definition[1],")")],"curv");if(3===r.definition.length)return t.real.define(["".concat(e," * (").concat(r.definition[0],")"),"".concat(e," * (").concat(r.definition[1],")"),"".concat(e," * (").concat(r.definition[2],")")],"curv")}else if("surf"===r.type&&Array.isArray(r.definition))return t.real.define(["".concat(e," * (").concat(r.definition[0],")"),"".concat(e," * (").concat(r.definition[1],")"),"".concat(e," * (").concat(r.definition[2],")")],"surf");throw new TypeError('Property "type" of "func" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.slope=function(t,r,e,n){return(n-r)/(e-t)},r.sqrt=function(t){return t>=0?Math.exp(Math.log(t)/2):NaN},r.sub=function(r,e){if("expl"===r.type&&"expl"===e.type||"inve"===r.type&&"inve"===e.type||"pola"===r.type&&"pola"===e.type||"mult"===r.type&&"mult"===e.type)return t.real.define("(".concat(r.definition,") - (").concat(e.definition,")"),r.type);if("curv"===r.type&&"curv"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition)){if(2===r.definition.length&&2===e.definition.length)return t.real.define(["(".concat(r.definition[0],") - (").concat(e.definition[0],")"),"(".concat(r.definition[1],") - (").concat(e.definition[1],")")],"curv");if(3===r.definition.length&&3===e.definition.length)return t.real.define(["(".concat(r.definition[0],") - (").concat(e.definition[0],")"),"(".concat(r.definition[1],") - (").concat(e.definition[1],")"),"(".concat(r.definition[2],") - (").concat(e.definition[2],")")],"curv")}else if("surf"===r.type&&"surf"===e.type&&Array.isArray(r.definition)&&Array.isArray(e.definition))return t.real.define(["(".concat(r.definition[0],") - (").concat(e.definition[0],")"),"(".concat(r.definition[1],") - (").concat(e.definition[1],")"),"(".concat(r.definition[2],") - (").concat(e.definition[2],")")],"surf");throw new TypeError('Property "type" of "func1" and "func2" must be either "expl", "inve", "pola", "curv", "surf", or "mult".')},r.tetration=function(r,e){return 0===e?1:e>0?Math.pow(r,t.real.tetration(r,e-1)):void 0},r.translate=function(r,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),"expl"===r.type)return 0!==e&&0!==n?t.real.define("(".concat(r.definition.toString().replace(/x/g,"(x - ".concat(e,")")),") + ").concat(n),"expl"):0!==e?t.real.define("".concat(r.definition.toString().replace(/x/g,"(x - ".concat(e,")"))),"expl"):0!==n?t.real.define("(".concat(r.definition,") + ").concat(n),"expl"):r;throw new TypeError('Property "type" of "func" must be "expl".')},r.val=function(r,e){if("expl"===r.type)return t.real.parse("x => "+r.definition)(e);if("inve"===r.type)return t.real.parse("y => "+r.definition)(e);if("pola"===r.type)return t.real.parse("O => "+r.definition)(e);if("curv"===r.type){if(2===r.definition.length){var n=t.real.parse("t => "+r.definition[0]),i=t.real.parse("t => "+r.definition[1]);return t.vect.init(n(e),i(e))}n=t.real.parse("t => "+r.definition[0]),i=t.real.parse("t => "+r.definition[1]);var o=t.real.parse("t => "+r.definition[2]);return t.vect.init(n(e),i(e),o(e))}if("surf"===r.type){var a=e;n=t.real.parse("(s, t) => "+r.definition[0]),i=t.real.parse("(s, t) => "+r.definition[1]),o=t.real.parse("(s, t) => "+r.definition[2]);return t.vect.init(n(a.x,a.y),i(a.x,a.y),o(a.x,a.y))}if("mult"===r.type&&"number"!=typeof e){var u=e;return t.real.parse("(x, y) => "+r.definition)(u.x,u.y)}throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a "type" property of "expl", "pola", "curv", "surf", or "mult".')}}(t.real||(t.real={}))}(t||(t={})),function(t){!function(r){var e=function(){try{return t.real.parse(t.CONTEXT)}catch(t){throw new Error("Cannot initialize canvas context. Make sure an HTML <canvas> element exists in the webpage before using Chalkboard.plot functions.")}};r.autocorrelation=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath();for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)n.context.lineTo(o,-t.calc.autocorrelation(r,o*n.size)/n.size),i.push([o,t.calc.autocorrelation(r,o)]);return n.context.stroke(),n.context.restore(),i},r.barplot=function(r,n,i){(i={x:(i=i||{}).x||e().canvas.width/2,y:i.y||e().canvas.height/2,size:i.size||1,fillStyle:i.fillStyle||"white",strokeStyle:i.strokeStyle||"black",lineWidth:i.lineWidth||2,context:i.context||e()}).size/=100,i.context.save(),i.context.translate(i.x,i.y),i.context.lineWidth=i.lineWidth,i.context.strokeStyle=i.strokeStyle,i.context.fillStyle=i.fillStyle;for(var o=[],a=0;a<n.length;a++)0===a?o.push(t.stat.lt(r,n[0],!0)):a===n.length?o.push(t.stat.gt(r,n[n.length-1],!0)):o.push(t.stat.ineq(r,n[a-1],n[a],!1,!0));var u=[];for(a=0;a<o.length;a++)u.push(o[a].length);var s=0,c=u.length/(2*i.size);for(a=0;a<u.length;a++)i.context.fillRect(s-c,0,1/i.size,-u[a]/i.size),i.context.strokeRect(s-c,0,1/i.size,-u[a]/i.size),s+=1/i.size;return i.context.restore(),o},r.comp=function(r,n){return(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,fillStyle:n.fillStyle||"black",lineWidth:n.lineWidth||5,context:n.context||e()}).size/=100,n.context.fillStyle=n.fillStyle,n.context.save(),n.context.translate(n.x,n.y),n.context.beginPath(),n.context.ellipse(r.a/n.size,-r.b/n.size,n.lineWidth,n.lineWidth,0,0,t.PI(2)),n.context.fill(),n.context.restore(),[[r.a],[r.b]]},r.convolution=function(r,n,i){(i={x:(i=i||{}).x||e().canvas.width/2,y:i.y||e().canvas.height/2,size:i.size||1,strokeStyle:i.strokeStyle||"black",lineWidth:i.lineWidth||2,domain:i.domain||[-10,10],res:i.res||25,context:i.context||e()}).size/=100;var o=[];i.context.save(),i.context.translate(i.x,i.y),i.context.lineWidth=i.lineWidth,i.context.strokeStyle=i.strokeStyle,i.context.beginPath();for(var a=i.domain[0]/i.size;a<=i.domain[1]/i.size;a+=i.res)i.context.lineTo(a,-t.calc.convolution(r,n,a*i.size)/i.size),o.push([a,t.calc.convolution(r,n,a)]);return i.context.stroke(),i.context.restore(),o},r.correlation=function(r,n,i){(i={x:(i=i||{}).x||e().canvas.width/2,y:i.y||e().canvas.height/2,size:i.size||1,strokeStyle:i.strokeStyle||"black",lineWidth:i.lineWidth||2,domain:i.domain||[-10,10],res:i.res||25,context:i.context||e()}).size/=100;var o=[];i.context.save(),i.context.translate(i.x,i.y),i.context.lineWidth=i.lineWidth,i.context.strokeStyle=i.strokeStyle,i.context.beginPath();for(var a=i.domain[0]/i.size;a<=i.domain[1]/i.size;a+=i.res)i.context.lineTo(a,-t.calc.correlation(r,n,a*i.size)/i.size),o.push([a,t.calc.correlation(r,n,a)]);return i.context.stroke(),i.context.restore(),o},r.definition=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||("comp"===r.type?[[-10,10],[-10,10]]:[-10,10]),context:n.context||e()}).size/=100;var i=n.domain,o=n.domain,a=[];if(n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath(),"expl"===r.type)for(var u=t.real.parse("x => "+r.definition),s=i[0]/n.size;s<=i[1]/n.size;s++)n.context.lineTo(s,-u(s*n.size)/n.size),a.push([s,u(s)]);else if("inve"===r.type)for(u=t.real.parse("y => "+r.definition),s=i[0]/n.size;s<=i[1]/n.size;s++)n.context.lineTo(u(s*n.size)/n.size,-s),a.push([u(s),s]);else if("pola"===r.type){var c=t.real.parse("O => "+r.definition);for(s=i[0]/n.size;s<=i[1]/n.size;s++)n.context.lineTo(c(s*n.size)/n.size*t.trig.cos(s*n.size),-c(s*n.size)/n.size*t.trig.sin(s*n.size)),a.push([s,c(s)])}else if("curv"===r.type){var f=t.real.parse("t => "+r.definition[0]),l=t.real.parse("t => "+r.definition[1]);for(s=i[0]/n.size;s<=i[1]/n.size;s++)n.context.lineTo(f(s*n.size)/n.size,-l(s*n.size)/n.size),a.push([f(s),l(s)])}else{if("comp"!==r.type)throw new TypeError('Parameter "func" must be of type "ChalkboardFunction" with a property "type" of "expl", "inve", "pola", "curv", or "comp".');var m=t.comp.parse("(a, b) => "+r.definition[0]),d=t.comp.parse("(a, b) => "+r.definition[1]);for(s=o[0][0]/n.size;s<=o[0][1]/n.size;s+=5)for(var p=o[1][0]/n.size;p<=o[1][1]/n.size;p+=5){var h=t.comp.init(m(s*n.size,p*n.size)/n.size,d(s*n.size,p*n.size)/n.size);0===h.a&&0===h.b?n.context.fillStyle="rgb(0, 0, 0)":h.a===1/0&&h.b===1/0?n.context.fillStyle="rgb(255, 255, 255)":n.context.fillStyle="hsl("+t.trig.toDeg(t.comp.arg(h))+", 100%, "+100*(t.trig.tanh(t.comp.mag(h)/t.real.pow(10,20))+.5)+"%)",n.context.fillRect(s,p,5,5),a.push([m(s,p),d(s,p)])}}return n.context.stroke(),n.context.restore(),a},r.dfdx=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath();for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)"expl"===r.type?(n.context.lineTo(o,-t.calc.dfdx(r,o*n.size)/n.size),i.push([o,t.calc.dfdx(r,o)])):"inve"===r.type&&(n.context.lineTo(t.calc.dfdx(r,o*n.size)/n.size,-o),i.push([t.calc.dfdx(r,o),o]));return n.context.stroke(),n.context.restore(),i},r.d2fdx2=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath();for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)"expl"===r.type?(n.context.lineTo(o,-t.calc.d2fdx2(r,o*n.size)/n.size),i.push([o,t.calc.d2fdx2(r,o)])):"inve"===r.type&&(n.context.lineTo(t.calc.d2fdx2(r,o*n.size)/n.size,-o),i.push([t.calc.d2fdx2(r,o),o]));return n.context.stroke(),n.context.restore(),i},r.field=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[[-10,10],[-10,10]],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.strokeStyle=n.strokeStyle,n.context.lineWidth=n.lineWidth,n.context.save(),n.context.translate(n.x,n.y);for(var o=n.domain[0][0]/n.size;o<=n.domain[0][1]/n.size;o+=n.res)for(var a=n.domain[1][0]/n.size;a<=n.domain[1][1]/n.size;a+=n.res){var u=t.vect.fromField(r,t.vect.init(o,a));n.context.beginPath(),n.context.moveTo(o,a),n.context.lineTo(o+u.x,a+u.y),n.context.stroke(),i.push([o+u.x,a+u.y])}return n.context.restore(),i},r.Fourier=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath();for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)n.context.lineTo(o,-t.calc.Fourier(r,o*n.size)/n.size),i.push([o,t.calc.Fourier(r,o)]);return n.context.stroke(),n.context.restore(),i},r.fxdx=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath();for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)"expl"===r.type?(n.context.lineTo(o,-t.calc.fxdx(r,0,o*n.size)/n.size),i.push([o,t.calc.fxdx(r,0,o)])):"inve"===r.type&&(n.context.lineTo(t.calc.fxdx(r,0,o*n.size)/n.size,-o),i.push([t.calc.fxdx(r,0,o),o]));return n.context.stroke(),n.context.restore(),i},r.Laplace=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],res:n.res||25,context:n.context||e()}).size/=100;var i=[];if(n.context.save(),n.context.translate(n.x,n.y),n.context.lineWidth=n.lineWidth,n.context.strokeStyle=n.strokeStyle,n.context.beginPath(),n.domain[0]>=0)for(var o=n.domain[0]/n.size;o<=n.domain[1]/n.size;o+=n.res)n.context.lineTo(o,-t.calc.Laplace(r,o*n.size)/n.size),i.push([o,t.calc.Laplace(r,o)]);else for(o=0;o<=n.domain[1]/n.size;o+=n.res)n.context.lineTo(o,-t.calc.Laplace(r,o*n.size)/n.size),i.push([o,t.calc.Laplace(r,o)]);return n.context.stroke(),n.context.restore(),i},r.lineplot=function(r,n,i){(i={x:(i=i||{}).x||e().canvas.width/2,y:i.y||e().canvas.height/2,size:i.size||1,strokeStyle:i.strokeStyle||"black",lineWidth:i.lineWidth||2,context:i.context||e()}).size/=100,i.context.save(),i.context.translate(i.x,i.y),i.context.lineWidth=i.lineWidth,i.context.strokeStyle=i.strokeStyle;for(var o=[],a=0;a<n.length;a++)0===a?o.push(t.stat.lt(r,n[0],!0)):a===n.length?o.push(t.stat.gt(r,n[n.length-1],!0)):o.push(t.stat.ineq(r,n[a-1],n[a],!1,!0));var u=[];for(a=0;a<o.length;a++)u.push(o[a].length);i.context.beginPath();for(a=0;a<u.length;a++)i.context.lineTo(a/i.size,-u[a]/i.size);return i.context.stroke(),i.context.restore(),o},r.matr=function(r,n){(n={x:(n=n||{}).x||e().canvas.width/2,y:n.y||e().canvas.height/2,size:n.size||1,strokeStyle:n.strokeStyle||"black",lineWidth:n.lineWidth||2,domain:n.domain||[-10,10],context:n.context||e()}).size/=100;for(var i=n.domain[0];i<=n.domain[1];i++)t.plot.vect(t.vect.init(r[0][0],r[1][0]),{x:n.x,y:n.y+i/n.size*r[1][1],size:n.size,strokeStyle:n.strokeStyle,lineWidth:n.lineWidth/4,context:n.context}),t.plot.vect(t.vect.init(-r[0][0],-r[1][0]),{x:n.x,y:n.y+i/n.size*r[1][1],size:n.size,strokeStyle:n.strokeStyle,lineWidth:n.lineWidth/4,context:n.context}),t.plot.vect(t.vect.init(r[0][1],r[1][1]),{x:n.x+i/n.size*r[0][0],y:n.y,size:n.size,strokeStyle:n.strokeStyle,lineWidth:n.lineWidth/4,context:n.context}),t.plot.vect(t.vect.init(-r[0][1],-r[1][1]),{x:n.x+i/n.size*r[0][0],y:n.y,size:n.size,strokeStyle:n.strokeStyle,lineWidth:n.lineWidth/4,context:n.context});return t.plot.vect(t.vect.init(r[0][0],r[1][0]),n),t.plot.vect(t.vect.init(-r[0][0],-r[1][0]),n),t.plot.vect(t.vect.init(r[0][1],r[1][1]),n),t.plot.vect(t.vect.init(-r[0][1],-r[1][1]),n),r},r.rOplane=function(r){(r={x:(r=r||{}).x||e().canvas.width/2,y:r.y||e().canvas.height/2,size:r.size||1,strokeStyle:r.strokeStyle||"black",lineWidth:r.lineWidth||2,context:r.context||e()}).size/=100;var n=e().canvas.width;r.context.save(),r.context.translate(r.x,r.y),r.context.strokeStyle=r.strokeStyle,r.context.lineWidth=r.lineWidth/4,r.context.beginPath();for(var i=0;i<=r.size*n/2;i++)r.context.ellipse(0,0,i/r.size,i/r.size,0,0,t.PI(2));r.context.stroke(),r.context.lineWidth=r.lineWidth,r.context.beginPath(),r.context.moveTo(-r.x,0),r.context.lineTo(n-r.x,0),r.context.stroke(),r.context.beginPath(),r.context.moveTo(0,-r.y),r.context.lineTo(0,n-r.y),r.context.stroke(),r.context.restore()},r.scatterplot=function(r,n,i){(i={x:(i=i||{}).x||e().canvas.width/2,y:i.y||e().canvas.height/2,size:i.size||1,fillStyle:i.fillStyle||"black",lineWidth:i.lineWidth||5,context:i.context||e()}).size/=100;var o=[];if(i.context.save(),i.context.translate(i.x,i.y),i.context.fillStyle=i.fillStyle,r.length===n.length)for(var a=0;a<r.length;a++)i.context.beginPath(),i.context.ellipse(r[a]/i.size-r.length/(2*i.size),-n[a]/i.size+r.length/(2*i.size),i.lineWidth,i.lineWidth,0,0,t.PI(2)),i.context.fill(),o.push([r[a],n[a]]);return i.context.restore(),o},r.Taylor=function(r,n,i,o){(o={x:(o=o||{}).x||e().canvas.width/2,y:o.y||e().canvas.height/2,size:o.size||1,strokeStyle:o.strokeStyle||"black",lineWidth:o.lineWidth||2,domain:o.domain||[-10,10],res:o.res||25,context:o.context||e()}).size/=100;var a=[];o.context.save(),o.context.translate(o.x,o.y),o.context.lineWidth=o.lineWidth,o.context.strokeStyle=o.strokeStyle,o.context.beginPath();for(var u=o.domain[0]/o.size;u<=o.domain[1]/o.size;u+=o.res)o.context.lineTo(u,-t.calc.Taylor(r,u*o.size,n,i)/o.size),a.push([u,t.calc.Taylor(r,u,n,i)]);return o.context.stroke(),o.context.restore(),a},r.vect=function(t,r){return(r={x:(r=r||{}).x||e().canvas.width/2,y:r.y||e().canvas.height/2,size:r.size||1,strokeStyle:r.strokeStyle||"black",lineWidth:r.lineWidth||5,context:r.context||e()}).size/=100,r.context.strokeStyle=r.strokeStyle,r.context.lineWidth=r.lineWidth,r.context.save(),r.context.translate(r.x,r.y),r.context.beginPath(),r.context.moveTo(0,0),r.context.lineTo(t.x/r.size,-t.y/r.size),r.context.stroke(),r.context.restore(),[[t.x],[t.y]]},r.xyplane=function(t){(t={x:(t=t||{}).x||e().canvas.width/2,y:t.y||e().canvas.height/2,size:t.size||1,strokeStyle:t.strokeStyle||"black",lineWidth:t.lineWidth||2,context:t.context||e()}).size/=100;var r=e().canvas.width;t.context.save(),t.context.translate(t.x,t.y),t.context.strokeStyle=t.strokeStyle,t.context.lineWidth=t.lineWidth/4,t.context.beginPath();for(var n=Math.floor(-t.x/t.size);n<=(r-t.x)/t.size;n++)t.context.moveTo(n/t.size,-t.y),t.context.lineTo(n/t.size,r-t.y);t.context.stroke(),t.context.beginPath();for(n=Math.floor(-t.y/t.size);n<=(r-t.y)/t.size;n++)t.context.moveTo(-t.x,n/t.size),t.context.lineTo(r-t.x,n/t.size);t.context.stroke(),t.context.lineWidth=t.lineWidth,t.context.beginPath(),t.context.moveTo(-t.x,0),t.context.lineTo(r-t.x,0),t.context.stroke(),t.context.beginPath(),t.context.moveTo(0,-t.y),t.context.lineTo(0,r-t.y),t.context.stroke(),t.context.restore()}}(t.plot||(t.plot={}))}(t||(t={})),function(t){var r;(r=t.quat||(t.quat={})).absolute=function(r){return t.quat.init(Math.abs(r.a),Math.abs(r.b),Math.abs(r.c),Math.abs(r.d))},r.add=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),t.quat.init(r.a+e.a,r.b+e.b,r.c+e.c,r.d+e.d)},r.conjugate=function(r){return t.quat.init(r.a,-r.b,-r.c,-r.d)},r.constrain=function(r,e){return void 0===e&&(e=[0,1]),t.quat.init(t.numb.constrain(r.a,e),t.numb.constrain(r.b,e),t.numb.constrain(r.c,e),t.numb.constrain(r.d,e))},r.copy=function(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))},r.dist=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),t.real.sqrt((e.a-r.a)*(e.a-r.a)+(e.b-r.b)*(e.b-r.b)+(e.c-r.c)*(e.c-r.c)+(e.d-r.d)*(e.d-r.d))},r.distsq=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),(e.a-r.a)*(e.a-r.a)+(e.b-r.b)*(e.b-r.b)+(e.c-r.c)*(e.c-r.c)+(e.d-r.d)*(e.d-r.d)},r.div=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),t.quat.init((r.a*e.a+r.b*e.b+r.c*e.c+r.d*e.d)/t.quat.magsq(e),(r.b*e.a-r.a*e.b-r.d*e.c+r.c*e.d)/t.quat.magsq(e),(r.c*e.a+r.d*e.b-r.a*e.c-r.b*e.d)/t.quat.magsq(e),(r.d*e.a-r.c*e.b+r.b*e.c-r.a*e.d)/t.quat.magsq(e))},r.fromAxis=function(r,e){if(void 0!==r.z)return t.quat.init(t.trig.cos(e/2),r.x*t.trig.sin(e/2),r.y*t.trig.sin(e/2),r.z*t.trig.sin(e/2));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" that has properties "x", "y", and "z".')},r.init=function(t,r,e,n){return void 0===r&&(r=0),void 0===e&&(e=0),void 0===n&&(n=0),{a:t,b:r,c:e,d:n}},r.invert=function(r){return t.quat.init(r.a/t.quat.magsq(r),-r.b/t.quat.magsq(r),-r.c/t.quat.magsq(r),-r.d/t.quat.magsq(r))},r.mag=function(r){return t.real.sqrt(r.a*r.a+r.b*r.b+r.c*r.c+r.d*r.d)},r.magset=function(r,e){return t.quat.scl(t.quat.normalize(r),e)},r.magsq=function(t){return t.a*t.a+t.b*t.b+t.c*t.c+t.d*t.d},r.mul=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),t.quat.init(r.a*e.a-r.b*e.b-r.c*e.c-r.d*e.d,r.a*e.b+r.b*e.a+r.c*e.d-r.d*e.c,r.a*e.c-r.b*e.d+r.c*e.a+r.d*e.b,r.a*e.d+r.b*e.c-r.c*e.b+r.d*e.a)},r.negate=function(r){return t.quat.init(-r.a,-r.b,-r.c,-r.d)},r.normalize=function(r){return t.quat.init(r.a/t.quat.mag(r),r.b/t.quat.mag(r),r.c/t.quat.mag(r),r.d/t.quat.mag(r))},r.print=function(r){console.log(t.quat.toString(r))},r.random=function(r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t.quat.init(t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e))},r.reciprocate=function(r){return t.quat.init(1/r.a,1/r.b,1/r.c,1/r.d)},r.round=function(r){return t.quat.init(Math.round(r.a),Math.round(r.b),Math.round(r.c),Math.round(r.d))},r.scl=function(r,e){return t.quat.init(r.a*e,r.b*e,r.c*e,r.d*e)},r.sub=function(r,e){return"number"==typeof r&&(r=t.quat.init(r,0,0,0)),"number"==typeof e&&(e=t.quat.init(e,0,0,0)),t.quat.init(r.a-e.a,r.b-e.b,r.c-e.c,r.d-e.d)},r.toArray=function(t){return[t.a,t.b,t.c,t.d]},r.toMatrix=function(r){return t.matr.init([r.a,-r.b,-r.c,-r.d],[r.b,r.a,-r.d,r.c],[r.c,r.d,r.a,-r.b],[r.d,-r.c,r.b,r.a])},r.toRotation=function(r,e){var n=t.vect.toQuaternion(e),i=t.quat.invert(r),o=t.quat.mul(r,t.quat.mul(n,i));return t.vect.init(o.b,o.c,o.d)},r.toString=function(t){var r="",e="",n="";return t.b>=0?r=" + "+t.b.toString()+"i ":t.b<0&&(r=" - "+Math.abs(t.b).toString()+"i "),t.c>=0?e="+ "+t.c.toString()+"j ":t.c<0&&(e="- "+Math.abs(t.c).toString()+"j "),t.d>=0?n="+ "+t.d.toString()+"k ":t.d<0&&(n="- "+Math.abs(t.d).toString()+"k "),t.a.toString()+r+e+n},r.toVector=function(r){return t.vect.init(r.a,r.b,r.c,r.d)},r.zero=function(r){return t.quat.init(0,0,0,0)}}(t||(t={})),function(t){!function(r){r.absolute=function(t){for(var r=[],e=0;e<t.length;e++)r.push(Math.abs(t[e]));return r},r.add=function(t,r){if(t.length!==r.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var e=[],n=0;n<t.length;n++)e.push(t[n]+r[n]);return e},r.array=function(t,r,e){void 0===e&&(e=r-t+1);for(var n=[],i=(r-t)/(e-1),o=0;o<e;o++)n.push(t+i*o);return n},r.autocorrelation=function(r){return t.stat.correlation(r,r)},r.Bayes=function(t,r,e){if(t<0||t>1||r<0||r>1||e<0||e>1)throw new RangeError("All probabilities must be between 0 and 1.");return r*t/(r*t+e*(1-t))},r.change=function(r,e){if(r.length!==e.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var n=[],i=0;i<r.length;i++)n.push(t.numb.change(r[i],e[i]));return n},r.chiSquared=function(t,r){if(t.length!==r.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var e=[],n=0;n<t.length;n++)e.push((t[n]-r[n])*(t[n]-r[n])/r[n]);return e},r.confidenceInterval=function(r,e){if(void 0===e&&(e=.95),e<=0||e>=1)throw new RangeError('Parameter "confidence" must be between 0 and 1 (exclusive).');var n=t.stat.inormal(1-(1-e)/2),i=t.stat.mean(r),o=t.stat.error(r);return[i-n*o,i+n*o]},r.constrain=function(r,e){void 0===e&&(e=[0,1]);for(var n=[],i=0;i<r.length;i++)n.push(t.numb.constrain(r[i],e));return n},r.convolution=function(t,r){for(var e=[],n=0;n<t.length+r.length-1;n++){for(var i=0,o=Math.max(0,n-r.length+1);o<Math.min(t.length,n+1);o++)i+=t[o]*r[n-o];e.push(i)}return e},r.correlation=function(t,r){for(var e=[],n=0;n<t.length+r.length-1;n++){for(var i=0,o=Math.max(0,n-r.length+1);o<Math.min(t.length,n+1);o++)i+=t[o]*r[r.length-1-n+o];e.push(i)}return e},r.correlationCoefficient=function(r,e){return t.stat.covariance(r,e)/(t.stat.deviation(r)*t.stat.deviation(e))},r.covariance=function(r,e){if(r.length!==e.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var n=t.stat.mean(r),i=t.stat.mean(e),o=0,a=0;a<r.length;a++)o+=(r[a]-n)*(e[a]-i);return o/r.length},r.cummax=function(t){for(var r=[],e=-1/0,n=0,i=t;n<i.length;n++){var o=i[n];e=Math.max(e,o),r.push(e)}return r},r.cummin=function(t){for(var r=[],e=1/0,n=0,i=t;n<i.length;n++){var o=i[n];e=Math.min(e,o),r.push(e)}return r},r.cummul=function(t){for(var r=[],e=0,n=0;n<t.length;n++)e*=t[n],r.push(e);return r},r.cumsum=function(t){for(var r=[],e=0,n=0;n<t.length;n++)e+=t[n],r.push(e);return r},r.deviation=function(r){for(var e=0,n=0;n<r.length;n++)e+=(r[n]-t.stat.mean(r))*(r[n]-t.stat.mean(r));return t.real.sqrt(e/r.length)},r.dot=function(t,r){if(t.length!==r.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var e=0,n=0;n<t.length;n++)e+=t[n]*r[n];return e},r.error=function(r){return t.stat.deviation(r)/t.real.sqrt(r.length)},r.eq=function(t,r){var e=[];if(Array.isArray(r)){if(t.length===r.length)for(var n=0;n<t.length;n++)t[n]===r[n]&&e.push(t[n])}else for(n=0;n<t.length;n++)t[n]===r&&e.push(t[n]);return e},r.expected=function(t,r){if(r||(r=Array(t.length).fill(1/t.length)),t.length!==r.length)throw new RangeError('Parameters "values" and "probabilities" must have the same length.');for(var e=0,n=0;n<t.length;n++)e+=t[n]*r[n];return e},r.Gaussian=function(r,e,n){return t.real.define(r.toString()+" * Math.exp(-((x - "+e.toString()+") * (x - "+e.toString()+")) / (2 * "+n.toString()+" * "+n.toString()+"))")},r.gt=function(t,r,e){void 0===e&&(e=!1);var n=[];if(Array.isArray(r)){if(t.length===r.length)for(var i=0;i<t.length;i++)e?t[i]>=r[i]&&n.push(t[i]):t[i]>r[i]&&n.push(t[i])}else for(i=0;i<t.length;i++)e?t[i]>=r&&n.push(t[i]):t[i]>r&&n.push(t[i]);return n},r.ineq=function(t,r,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var o=[];if(Array.isArray(r)&&Array.isArray(e)){if(t.length===r.length&&t.length===e.length)for(var a=0;a<t.length;a++)n?i?t[a]>=r[a]&&t[a]<=e[a]&&o.push(t[a]):t[a]>=r[a]&&t[a]<e[a]&&o.push(t[a]):i?t[a]>r[a]&&t[a]<=e[a]&&o.push(t[a]):t[a]>r[a]&&t[a]<e[a]&&o.push(t[a])}else for(a=0;a<t.length;a++)n?i?t[a]>=r&&t[a]<=e&&o.push(t[a]):t[a]>=r&&t[a]<e&&o.push(t[a]):i?t[a]>r&&t[a]<=e&&o.push(t[a]):t[a]>r&&t[a]<e&&o.push(t[a]);return o},r.inormal=function(t){if(t<=0||t>=1)throw new RangeError('Parameter "p" must be between 0 and 1 (exclusive).');var r=[2.50662823884,-18.61500062529,41.39119773534,-25.44106049637],e=[-8.4735109309,23.08336743743,-21.06224101826,3.13082909833],n=[.3374754822726147,.9761690190917186,.1607979714918209,.0276438810333863,.0038405729373609,.0003951896511919,321767881768e-16,2.888167364e-7,3.960315187e-7],i=t-.5;if(Math.abs(i)<.42)return i*(((r[3]*(o=i*i)+r[2])*o+r[1])*o+r[0])/((((e[3]*o+e[2])*o+e[1])*o+e[0])*o+1);for(var o=t<.5?t:1-t,a=Math.log(-Math.log(o)),u=n[0],s=1;s<n.length;s++)u+=n[s]*Math.pow(a,s);return t<.5?-u:u},r.interpolate=function(r,e){void 0===e&&(e="linear");for(var n=r.slice(),i=0;i<n.length;i++)if(null==n[i]){for(var o=i-1,a=i+1;o>=0&&null==n[o];)o--;for(;a<n.length&&null==n[a];)a++;var u=o>=0?n[o]:0,s=a<n.length?n[a]:0;if("linear"===e){var c=(i-o)/(a-o);n[i]=t.real.lerp([u,s],c)}else if("quadratic"===e&&o>0&&a<n.length){var f=o-1,l=f>=0?n[f]:u;c=(i-o)/(a-o);n[i]=t.real.qerp([f,l],[o,u],[a,s],o+c*(a-o))}else{c=(i-o)/(a-o);n[i]=t.real.lerp([u,s],c)}}return n},r.interquartileRange=function(r){return t.stat.quartile(r,"Q3")-t.stat.quartile(r,"Q1")},r.kurtosis=function(r){for(var e=0,n=t.stat.mean(r),i=t.stat.deviation(r),o=0;o<r.length;o++)e+=(r[o]-n)*(r[o]-n)*(r[o]-n)*(r[o]-n);return e/(i*i*i*i)-3},r.lt=function(t,r,e){void 0===e&&(e=!1);var n=[];if(Array.isArray(r)){if(t.length===r.length)for(var i=0;i<t.length;i++)e?t[i]<=r[i]&&n.push(t[i]):t[i]<r[i]&&n.push(t[i])}else for(i=0;i<t.length;i++)e?t[i]<=r&&n.push(t[i]):t[i]<r&&n.push(t[i]);return n},r.mad=function(r){for(var e=0,n=0;n<r.length;n++)e+=Math.abs(r[n]-t.stat.mean(r));return e/r.length},r.max=function(t){for(var r=t[0],e=0;e<t.length;e++)t[e]>r&&(r=t[e]);return r},r.mean=function(r,e){void 0===e&&(e="arithmetic");var n=0;if("arithmetic"===e){for(var i=0;i<r.length;i++)n+=r[i];return n/r.length}if("geometric"===e){for(i=0;i<r.length;i++)n*=r[i];return t.real.root(Math.abs(n),r.length)}if("harmonic"===e){for(i=0;i<r.length;i++)n+=1/r[i];return r.length/n}throw new TypeError('Parameter "type" must be "arithmetic", "geometric", or "harmonic".')},r.meanMoving=function(r,e){if(e<=0||e>r.length)throw new RangeError('Parameter "windowSize" must be greater than 0 and less than or equal to the array length.');for(var n=[],i=0;i<=r.length-e;i++){var o=r.slice(i,i+e);n.push(t.stat.sum(o)/e)}return n},r.meanWeighted=function(t,r){if(t.length!==r.length)throw new RangeError('Parameters "values" and "weights" must have the same length.');for(var e=0,n=0,i=0;i<t.length;i++)e+=t[i]*r[i],n+=r[i];return e/n},r.median=function(t){var r=t.slice().sort((function(t,r){return t-r}));return r.length%2==1?r[Math.floor(r.length/2)]:(r[r.length/2]+r[r.length/2-1])/2},r.min=function(t){for(var r=t[0],e=0;e<t.length;e++)t[e]<r&&(r=t[e]);return r},r.mode=function(t){for(var r=t.slice().sort((function(t,r){return t-r})),e=1,n=1,i=r[0],o=r[0],a=1;a<r.length;a++)r[a-1]!==r[a]&&(n>e&&(e=n,i=o),n=0,o=r[a]),n++;return n>e?o:i},r.mul=function(t){for(var r=0,e=0;e<t.length;e++)r*=t[e];return r},r.negate=function(t){for(var r=[],e=0;e<t.length;e++)r.push(-t[e]);return r},r.norm=function(r,e){void 0===e&&(e="L2");var n=0;if("L0"===e){for(var i=0;i<r.length;i++)0!==r[i]&&(n+=1);return n}if("L1"===e){for(i=0;i<r.length;i++)n+=Math.abs(r[i]);return n}if("L2"===e){for(i=0;i<r.length;i++)n+=r[i]*r[i];return t.real.sqrt(n)}if("LInfinity"===e)return Math.abs(t.stat.max(r));throw new TypeError('Parameter "type" must be "L0", "L1", "L2", or "LInfinity".')},r.normal=function(r){var e=t.real.define("1 / Math.sqrt(2 * Math.PI) * Math.exp(-0.5 * x * x)");return t.real.val(e,r)},r.normalize=function(r,e){void 0===e&&(e="L2");for(var n=[],i=t.stat.norm(r,e),o=0;o<r.length;o++)n.push(r[o]/i);return n},r.normsq=function(r,e){void 0===e&&(e="L2");var n=0;if("L0"===e){for(var i=0;i<r.length;i++)0!==r[i]&&(n+=1);return n*n}if("L1"===e){for(i=0;i<r.length;i++)n+=Math.abs(r[i]);return n*n}if("L2"===e){for(i=0;i<r.length;i++)n+=r[i]*r[i];return n}if("LInfinity"===e)return Math.abs(t.stat.max(r))*Math.abs(t.stat.max(r));throw new TypeError('Parameter "type" must be "L0", "L1", "L2", or "LInfinity".')},r.pad=function(t,r,e){void 0===e&&(e=0);for(var n=t.slice();n.length<r;)n.push(e);return n},r.percentile=function(t,r){for(var e=0,n=0;n<t.length;n++)r>=t[n]&&e++;return e/t.length*100},r.print=function(r){console.log(t.stat.toString(r))},r.quartile=function(r,e){var n=r.slice().sort((function(t,r){return t-r})),i=n.slice(0,Math.floor(n.length/2)),o=n.slice(Math.ceil(n.length/2));if("Q1"===e)return t.stat.median(i);if("Q2"===e)return t.stat.median(r);if("Q3"===e)return t.stat.median(o);throw new TypeError('Parameter "type" must be "Q1", "Q2", or "Q3".')},r.random=function(r,e,n){void 0===e&&(e=0),void 0===n&&(n=1);for(var i=[],o=0;o<r;o++)i.push(t.numb.random(e,n));return i},r.range=function(r){return t.stat.max(r)-t.stat.min(r)},r.regression=function(r,e,n){if(void 0===e&&(e="linear"),void 0===n&&(n=2),"linear"===e){for(var i=0,o=0,a=0,u=0,s=0;s<r.length;s++)i+=r[s][0],o+=r[s][1],a+=r[s][0]*r[s][0],u+=r[s][0]*r[s][1];var c=(r.length*u-i*o)/(r.length*a-i*i),f=o/r.length-c*i/r.length;return t.real.define(c+" * x + "+f)}if("polynomial"===e){var l=t.matr.init();for(s=0;s<r.length;s++){l.push([]);for(var m=0;m<=n;m++)l[s].push(t.real.pow(r[s][0],m))}var d=t.matr.transpose(l),p=t.matr.init();for(s=0;s<r.length;s++)p.push([r[s][1]]);var h=t.matr.mul(d,l),v=t.matr.invert(h),y=(i=t.matr.mul(t.matr.mul(v,d),p),[]);for(s=0;s<i.length;s++)y.push(i[s][0]);var b=y[0].toString()+" + "+y[1].toString()+" * x";for(s=2;s<=n;s++)b+=" + "+y[s].toString()+" * Math.pow(x, "+s+")";return t.real.define(b)}if("power"===e){var g=[0,0,0,0];for(s=0;s<r.length;s++)g[0]+=t.real.ln(r[s][0]),g[1]+=r[s][1]*t.real.ln(r[s][0]),g[2]+=r[s][1],g[3]+=t.real.ln(r[s][0])*t.real.ln(r[s][0]);c=t.E((g[2]-(r.length*g[1]-g[2]*g[0])/(r.length*g[3]-g[0]*g[0])*g[0])/r.length),f=(r.length*g[1]-g[2]*g[0])/(r.length*g[3]-g[0]*g[0]);return t.real.define(c+" * Math.pow(x, "+f+")")}if("exponential"===e){for(g=[0,0,0,0,0,0],s=0;s<r.length;s++)g[0]+=r[s][0],g[1]+=r[s][1],g[2]+=r[s][0]*r[s][0]*r[s][1],g[3]+=r[s][1]*t.real.ln(r[s][1]),g[4]+=r[s][0]&r[s][1]*t.real.ln(r[s][1]),g[5]+=r[s][0]*r[s][1];c=t.E((g[2]*g[3]-g[5]*g[4])/(g[1]*g[2]-g[5]*g[5])),f=(g[1]*g[4]-g[5]*g[3])/(g[1]*g[2]-g[5]*g[5]);return t.real.define(c+"* Math.exp("+f+" * x)")}if("logarithmic"===e){for(g=[0,0,0,0],s=0;s<r.length;s++)g[0]+=t.real.ln(r[s][0]),g[1]+=r[s][1]*t.real.ln(r[s][0]),g[2]+=r[s][1],g[3]+=t.real.ln(r[s][0])*t.real.ln(r[s][0]);c=(g[2]-(r.length*g[1]-g[2]*g[0])/(r.length*g[3]-g[0]*g[0])*g[0])/r.length,f=(r.length*g[1]-g[2]*g[0])/(r.length*g[3]-g[0]*g[0]);return t.real.define(c+" + "+f+" * Math.log(x)")}throw new TypeError('Parameter "type" must be "linear", "polynomial", "power", "exponential", or "logarithmic".')},r.resampling=function(t,r,e){if(void 0===e&&(e="bootstrap"),"bootstrap"===e){for(var n=null!=r?r:100,i=[],o=0;o<n;o++){for(var a=[],u=0;u<t.length;u++)a.push(t[Math.floor(Math.random()*t.length)]);i.push(a)}return i}if("jackknife"===e){n=null!=r?r:t.length;var s=[];for(o=0;o<t.length;o++)s.push(t.slice(0,o).concat(t.slice(o+1)));if(n<s.length){for(var c=[],f=new Set;c.length<n;){var l=Math.floor(Math.random()*s.length);f.has(l)||(f.add(l),c.push(s[l]))}return c}return s}throw new TypeError('Parameter "type" must be "bootstrap" or "jackknife".')},r.reverse=function(t){for(var r=[],e=t.length-1;e>=0;e--)r.push(t[e]);return r},r.scl=function(t,r){for(var e=[],n=0;n<t.length;n++)e.push(t[n]*r);return e},r.shuffle=function(r){var e,n,i;for(e=r.length-1;e>0;e--)i=Math.floor(t.numb.random(0,e+1)),n=r[e],r[e]=r[i],r[i]=n;return r},r.skewness=function(r){for(var e=0,n=t.stat.mean(r),i=t.stat.deviation(r),o=0;o<r.length;o++)e+=(r[o]-n)*(r[o]-n)*(r[o]-n);return e/((r.length-1)*(i*i*i))},r.sub=function(t,r){if(t.length!==r.length)throw new RangeError('Parameters "arr1" and "arr2" must have the same length.');for(var e=[],n=0;n<t.length;n++)e.push(t[n]-r[n]);return e},r.subsets=function(t){var r=[[]];t.sort();for(var e=0;e<t.length;e++)if(0===e||t[e]!==t[e-1]){for(var n=t[e],i=[],o=0;o<r.length;o++){var a=r[o].slice();a.push(n),i.push(a)}r=r.concat(i)}return r},r.sum=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r},r.toMatrix=function(r,e,n){void 0===n&&(n=e);for(var i=t.matr.init(),o=0,a=0;a<e;a++){i[a]=[];for(var u=0;u<n;u++)o<r.length?i[a].push(r[o]):i[a].push(0),o++}return i},r.toObject=function(t){for(var r={},e=0;e<t.length;e++)r["_"+e.toString()]=t[e];return r},r.toSet=function(r){return t.abal.set(r)},r.toString=function(t){return"["+t.join(", ")+"]"},r.toTensor=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return Array.isArray(i[0])&&(i=i[0]),(n=t.tens).resize.apply(n,e([r],i,!1))},r.toVector=function(r,e,n){if(void 0===n&&(n=0),2===e)return t.vect.init(r[n],r[n+1]);if(3===e)return t.vect.init(r[n],r[n+1],r[n+2]);if(4===e)return t.vect.init(r[n],r[n+1],r[n+2],r[n+3]);throw new RangeError('Parameter "dimension" must be 2, 3, or 4.')},r.unique=function(t){for(var r=function(t){return JSON.stringify(t,(function(t,r){if(null!==r&&"object"==typeof r&&!Array.isArray(r)){var e={};return Object.keys(r).sort().forEach((function(t){e[t]=r[t]})),e}return r}))},e=function(t){var e,n;return null===t?(e="null",n=r(t)):Array.isArray(t)?(e="array",n=r(t)):"object"==typeof t?(e="object",n=r(t)):"number"==typeof t?(e="number",n=Number.isNaN(t)?"NaN":t===1/0?"Infinity":t===-1/0?"-Infinity":JSON.stringify(t)):void 0===t?(e="undefined",n=""):(e=typeof t,n=r(t)),"".concat(e,":").concat(n)},n=new Map,i=0,o=t;i<o.length;i++){var a=o[i],u=e(a);n.has(u)||n.set(u,a)}return Array.from(n.values())},r.variance=function(r){for(var e=0,n=0;n<r.length;n++)e+=(r[n]-t.stat.mean(r))*(r[n]-t.stat.mean(r));return e/r.length},r.zscored=function(r){for(var e=[],n=t.stat.mean(r),i=t.stat.deviation(r),o=0;o<r.length;o++)e.push((r[o]-n)/i);return e}}(t.stat||(t.stat={}))}(t||(t={})),function(t){var r;(r=t.tens||(t.tens={})).absolute=function(r){var e=t.tens.init();if(Array.isArray(r)){for(var n=0;n<r.length;n++)e[n]=t.tens.absolute(r[n]);return e}return Math.abs(r)},r.add=function(r,e){var n=t.tens.init();if(Array.isArray(r)&&Array.isArray(e)){for(var i=0;i<Math.max(r.length,e.length);i++)n[i]=t.tens.add(void 0!==r[i]?r[i]:0,void 0!==e[i]?e[i]:0);return n}return r+e},r.concat=function(r,e,n){void 0===n&&(n=1);var i=function(r,e,o){return o===n?t.tens.init(r.concat(e)):r.map((function(t,r){return i(t,e[r],o)}))};return i(r,e,1)},r.constrain=function(r,e){void 0===e&&(e=[0,1]);var n=t.tens.init();if(Array.isArray(r)){for(var i=0;i<r.length;i++)n[i]=t.tens.constrain(r[i],e);return n}return t.numb.constrain(r,e)},r.contract=function(r){return t.tens.rank(r)>2?t.tens.resize(r,t.tens.size(r)[0],t.tens.size(r).slice(1).reduce((function(t,r){return t*r}))/t.tens.size(r)[0]):2===t.tens.rank(r)?t.matr.trace(r):r},r.copy=function(r){if(Array.isArray(r)){for(var e=t.tens.init(),n=0;n<r.length;n++)e[n]=t.tens.copy(r[n]);return e}return r},r.empty=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t=Array.isArray(t[0])?t[0]:t;var e=function(t){if(0===t.length)return null;for(var r=t[0],n=t.slice(1),i=[],o=0;o<r;o++)i[o]=e(n);return i};return e(t)},r.fill=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];r=Array.isArray(r[0])?r[0]:r;var n=function(r){if(0===r.length)return t;for(var e=r[0],i=r.slice(1),o=[],a=0;a<e;a++)o[a]=n(i);return o};return n(r)},r.init=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)return[];1===t.length&&Array.isArray(t[0])&&(t=t[0]);var e=function(t){return t.map((function(t){return Array.isArray(t)?e(t):t}))};return e(t)},r.isEqual=function(r,e){if(t.tens.isSizeEqual(r,e)){r=r,e=e;for(var n=0;n<r.length;n++)if(Array.isArray(r[n])&&Array.isArray(e[n])){if(!t.tens.isEqual(r[n],e[n]))return!1}else if(r[n]!==e[n])return!1;return!0}return!1},r.isRankEqual=function(r,e){return t.tens.rank(r)===t.tens.rank(e)},r.isRankOf=function(r,e){return t.tens.rank(r)===e},r.isSizeEqual=function(r,e){if(t.tens.isRankEqual(r,e)){for(var n=0,i=0;i<t.tens.rank(r);i++)t.tens.size(r)[i]!==t.tens.size(e)[i]&&n++;return 0===n}return!1},r.isSizeOf=function(r){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return n=Array.isArray(n[0])?n[0]:n,t.tens.isSizeEqual(r,(e=t.tens).empty.apply(e,n))},r.isSizeUniform=function(r){for(var e=0,n=0;n<t.tens.rank(r);n++)t.tens.size(r)[n]!==t.tens.size(r)[0]&&e++;return 0===e},r.mul=function(r,e){var n=t.tens.init();if(Array.isArray(r)&&Array.isArray(e)){for(var i=0;i<r.length;i++){for(var o=t.tens.init(),a=0;a<e.length;a++)o[a]=t.tens.mul(r[i],e[a]);n.push(o)}return n}return r*e},r.negate=function(r){var e=t.tens.init();if(Array.isArray(r)){for(var n=0;n<r.length;n++)e[n]=t.tens.negate(r[n]);return e}return-r},r.print=function(r){console.log(t.tens.toString(r))},r.pull=function(r,e,n){if(r=r,0===e)return r.splice(n,1),r;for(var i=0;i<r.length;i++)t.tens.pull(r[i],e-1,n);return r},r.push=function(r,e,n,i){if(r=r,0===e)return r.splice(n,0,i),r;for(var o=0;o<r.length;o++)t.tens.push(r[o],e-1,n,i[o]);return r},r.random=function(r,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];n=Array.isArray(n[0])?n[0]:n;var o=function(n){if(0===n.length)return t.numb.random(r,e);for(var i=n[0],a=n.slice(1),u=[],s=0;s<i;s++)u[s]=o(a);return u};return o(n)},r.rank=function(r){return t.tens.size(r).length},r.reciprocate=function(r){var e=t.tens.init();if(Array.isArray(r)){for(var n=0;n<r.length;n++)e[n]=t.tens.reciprocate(r[n]);return e}return 1/r},r.resize=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];i=Array.isArray(i[0])?i[0]:i;var a=(n=t.tens).fill.apply(n,e([0],i,!1)),u=function(t,r){for(var e=0;e<r.length;e++)Array.isArray(r[e])?u(t,r[e]):r[e]=t.length>0?t.shift():0};return u(t.tens.toArray(r),a),a},r.round=function(r){var e=t.tens.init();if(Array.isArray(r)){for(var n=0;n<r.length;n++)e[n]=t.tens.round(r[n]);return e}return Math.round(r)},r.scl=function(r,e){var n=t.tens.init();if(Array.isArray(r)){for(var i=0;i<r.length;i++)n[i]=t.tens.scl(r[i],e);return n}return r*e},r.size=function(r){if(Array.isArray(r)){var e=[r.length];return Array.isArray(r[0])&&(e=e.concat(t.tens.size(r[0]))),e}return[]},r.sub=function(r,e){var n=t.tens.init();if(Array.isArray(r)&&Array.isArray(e)){for(var i=0;i<Math.max(r.length,e.length);i++)n[i]=t.tens.sub(void 0!==r[i]?r[i]:0,void 0!==e[i]?e[i]:0);return n}return r-e},r.toArray=function(t){var r=[],e=function(t){for(var n=0;n<t.length;n++)Array.isArray(t[n])?e(t[n]):r.push(t[n])};return e(t),r},r.toMatrix=function(r){var e=t.matr.init(),n=function(t,r){for(var e=0;e<t.length;e++)Array.isArray(t[e])?n(t[e],r):r.push(t[e])},i=t.matr.init();n(r,i);for(var o=r.length||1,a=0;a<o;a++)e.push(i.slice(a*i.length/o,(a+1)*i.length/o));return e},r.toObject=function(r){if(Array.isArray(r)){for(var e={},n=0;n<r.length;n++)e["_"+(n+1)]=t.tens.toObject(r[n]);return e}return r},r.toSet=function(r){return t.abal.set(t.tens.toArray(r))},r.toString=function(r,e){if(void 0===e&&(e=0),Array.isArray(r[0])){for(var n="\t".repeat(e)+"[\n",i=0;i<r.length;i++)n+=t.tens.toString(r[i],e+1);return n+="\t".repeat(e)+"]\n"}for(n="\t".repeat(e)+"[ ",i=0;i<r.length;i++)n+=r[i].toString()+" ";return n+="]\n"},r.toVector=function(r,e,n){void 0===n&&(n=0);var i=t.tens.toArray(r);if(2===e)return t.vect.init(i[n],i[n+1]);if(3===e)return t.vect.init(i[n],i[n+1],i[n+2]);if(4===e)return t.vect.init(i[n],i[n+1],i[n+2],i[n+3]);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.transpose=function(r){var n;return(n=t.tens).resize.apply(n,e([r],t.tens.size(r).reverse(),!1))},r.zero=function(r){var e=t.tens.init();if(Array.isArray(r)){for(var n=0;n<r.length;n++)e[n]=t.tens.zero(r[n]);return e}return 0}}(t||(t={})),function(t){!function(r){r.arccos=function(r){return r>-1&&r<1?t.calc.fxdx(t.real.define("1 / (Math.sqrt(1 - x * x))"),r,1):1===r?0:-1===r?t.PI():void 0},r.arccosh=function(t){return t>=1?Math.log(t+Math.sqrt(t*t-1)):void 0},r.arccot=function(r){return t.calc.fxdx(t.real.define("1 / (1 + x * x)"),r,1e3)},r.arccoth=function(t){return t<-1||t>1?Math.log((t+1)/(t-1))/2:void 0},r.arccsc=function(r){return r>1?t.calc.fxdx(t.real.define("1 / (x * Math.sqrt(x * x - 1))"),r,1e3):1===r?t.PI()/2:-1===r?-t.PI()/2:r<1?-t.calc.fxdx(t.real.define("1 / (x * Math.sqrt(x * x - 1))"),Math.abs(r),1e3):void 0},r.arccsch=function(t){return 0!==t?Math.log(1/t+Math.sqrt(1/(t*t)+1)):void 0},r.arcsec=function(r){return r>1?t.calc.fxdx(t.real.define("1 / (x * Math.sqrt(x * x - 1))"),1.000001,r):1===r?0:-1===r?t.PI():void 0},r.arcsech=function(t){return t>0&&t<=1?Math.log(1/t+Math.sqrt(1/(t*t)-1)):void 0},r.arcsin=function(r){return r>-1&&r<1?t.calc.fxdx(t.real.define("1 / (Math.sqrt(1 - x * x))"),0,r):1===r?t.PI()/2:-1===r?-t.PI()/2:void 0},r.arcsinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},r.arctan=function(r){return t.calc.fxdx(t.real.define("1 / (1 + x * x)"),0,r)},r.arctanh=function(t){return t>-1&&t<1?Math.log((1+t)/(1-t))/2:void 0},r.arctan2=function(t,r){return 0===r?t>0?Math.PI/2:t<0?-Math.PI/2:0:r>0&&t>=0?Math.atan(Math.abs(t/r)):r<0&&t>=0?Math.PI-Math.atan(Math.abs(t/r)):r<0&&t<0?-Math.PI+Math.atan(Math.abs(t/r)):-Math.atan(Math.abs(t/r))},r.cos=function(r){return r=t.trig.coterminal(r),1-Math.pow(r,2)/t.numb.factorial(2)+Math.pow(r,4)/t.numb.factorial(4)-Math.pow(r,6)/t.numb.factorial(6)+Math.pow(r,8)/t.numb.factorial(8)-Math.pow(r,10)/t.numb.factorial(10)+Math.pow(r,12)/t.numb.factorial(12)-Math.pow(r,14)/t.numb.factorial(14)+Math.pow(r,16)/t.numb.factorial(16)-Math.pow(r,18)/t.numb.factorial(18)+Math.pow(r,20)/t.numb.factorial(20)-Math.pow(r,22)/t.numb.factorial(22)+Math.pow(r,24)/t.numb.factorial(24)-Math.pow(r,26)/t.numb.factorial(26)+Math.pow(r,28)/t.numb.factorial(28)},r.cosh=function(r){return(Math.pow(t.E(),r)+Math.pow(t.E(),-r))/2},r.cot=function(r){return 1/t.trig.tan(r)},r.coth=function(r){return 1/t.trig.tanh(r)},r.coterminal=function(r){return r%(2*t.PI())},r.csc=function(r){return 1/t.trig.sin(r)},r.csch=function(r){return 1/t.trig.sinh(r)},r.sec=function(r){return 1/t.trig.cos(r)},r.sech=function(r){return 1/t.trig.cosh(r)},r.sin=function(r){return(r=t.trig.coterminal(r))-Math.pow(r,3)/t.numb.factorial(3)+Math.pow(r,5)/t.numb.factorial(5)-Math.pow(r,7)/t.numb.factorial(7)+Math.pow(r,9)/t.numb.factorial(9)-Math.pow(r,11)/t.numb.factorial(11)+Math.pow(r,13)/t.numb.factorial(13)-Math.pow(r,15)/t.numb.factorial(15)+Math.pow(r,17)/t.numb.factorial(17)-Math.pow(r,19)/t.numb.factorial(19)+Math.pow(r,21)/t.numb.factorial(21)-Math.pow(r,23)/t.numb.factorial(23)+Math.pow(r,25)/t.numb.factorial(25)-Math.pow(r,27)/t.numb.factorial(27)+Math.pow(r,29)/t.numb.factorial(29)},r.sinh=function(r){return(Math.pow(t.E(),r)-Math.pow(t.E(),-r))/2},r.tan=function(r){return t.trig.sin(r)/t.trig.cos(r)},r.tanh=function(r){return t.trig.sinh(r)/t.trig.cosh(r)},r.toDeg=function(r){return r*(180/t.PI())},r.toRad=function(r){return r*(t.PI()/180)}}(t.trig||(t.trig={}))}(t||(t={})),function(t){var r;(r=t.vect||(t.vect={})).absolute=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(Math.abs(r.x),Math.abs(r.y));if(t.vect.isDimensionOf(r,3))return t.vect.init(Math.abs(r.x),Math.abs(r.y),Math.abs(r.z));if(t.vect.isDimensionOf(r,4))return t.vect.init(Math.abs(r.x),Math.abs(r.y),Math.abs(r.z),Math.abs(r.w));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.add=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return t.vect.init(r.x+e.x,r.y+e.y);if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return t.vect.init(r.x+e.x,r.y+e.y,r.z+e.z);if(t.vect.isDimensionOf(r,4)&&t.vect.isDimensionOf(e,4))return t.vect.init(r.x+e.x,r.y+e.y,r.z+e.z,r.w+e.w);throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.ang=function(r){if(t.vect.isDimensionOf(r,2))return t.trig.arctan2(r.y,r.x);if(t.vect.isDimensionOf(r,3))return[Math.acos(r.x/t.vect.mag(r)),Math.acos(r.y/t.vect.mag(r)),Math.acos(r.z/t.vect.mag(r))];if(t.vect.isDimensionOf(r,4))return[Math.acos(r.x/t.vect.mag(r)),Math.acos(r.y/t.vect.mag(r)),Math.acos(r.z/t.vect.mag(r)),Math.acos(r.w/t.vect.mag(r))];throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.angBetween=function(r,e){return Math.acos(t.vect.dot(r,e)/(t.vect.mag(r)*t.vect.mag(e)))},r.constrain=function(r,e){if(void 0===e&&(e=[0,1]),t.vect.isDimensionOf(r,2))return t.vect.init(t.numb.constrain(r.x,e),t.numb.constrain(r.y,e));if(t.vect.isDimensionOf(r,3))return t.vect.init(t.numb.constrain(r.x,e),t.numb.constrain(r.y,e),t.numb.constrain(r.z,e));if(t.vect.isDimensionOf(r,4))return t.vect.init(t.numb.constrain(r.x,e),t.numb.constrain(r.y,e),t.numb.constrain(r.z,e),t.numb.constrain(r.w,e));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.copy=function(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))},r.cross=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return t.vect.init(0,0,r.x*e.y-r.y*e.x);if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return t.vect.init(r.y*e.z-r.z*e.y,r.z*e.x-r.x*e.z,r.x*e.y-r.y*e.x);throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2 or 3 dimensions.')},r.dimension=function(t){var r=t,e=t;if("number"==typeof r.x&&"number"==typeof r.y&&void 0===r.z&&void 0===r.w||"string"==typeof e.p&&"string"==typeof e.q&&void 0===e.r&&void 0===e.s)return 2;if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&void 0===r.w||"string"==typeof e.p&&"string"==typeof e.q&&"string"==typeof e.r&&void 0===e.s)return 3;if("number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z&&"number"==typeof r.w||"string"==typeof e.p&&"string"==typeof e.q&&"string"==typeof e.r&&"string"==typeof e.s)return 4;throw new TypeError('Parameter "vectORvectfield" must be of type "ChalkboardVector" or "ChalkboardVectorField" with 2, 3, or 4 dimensions.')},r.dist=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return t.real.sqrt((e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y));if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return t.real.sqrt((e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y)+(e.z-r.z)*(e.z-r.z));if(t.vect.isDimensionOf(r,4)&&t.vect.isDimensionOf(e,4))return t.real.sqrt((e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y)+(e.z-r.z)*(e.z-r.z)+(e.w-r.w)*(e.w-r.w));throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.distsq=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return(e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y);if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return(e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y)+(e.z-r.z)*(e.z-r.z);if(t.vect.isDimensionOf(r,4)&&t.vect.isDimensionOf(e,4))return(e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y)+(e.z-r.z)*(e.z-r.z)+(e.w-r.w)*(e.w-r.w);throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.dot=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return r.x*e.x+r.y*e.y;if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return r.x*e.x+r.y*e.y+r.z*e.z;if(t.vect.isDimensionOf(r,4)&&t.vect.isDimensionOf(e,4))return r.x*e.x+r.y*e.y+r.z*e.z+r.w*e.w;throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.empty=function(r){if(2===r)return t.vect.init(null,null);if(3===r)return t.vect.init(null,null,null);if(4===r)return t.vect.init(null,null,null,null);throw new TypeError('Parameter "dimension" must be 2, 3, or 4.')},r.field=function(t,r,e,n){return void 0===e&&void 0===n?{p:t,q:r}:void 0===n?{p:t,q:r,r:e}:{p:t,q:r,r:e,s:n}},r.fill=function(r,e){if(2===e)return t.vect.init(r,r);if(3===e)return t.vect.init(r,r,r);if(4===e)return t.vect.init(r,r,r,r);throw new TypeError('Parameter "dimension" must be 2, 3, or 4.')},r.fromAlternateToCartesian=function(r,e){if("polar"===e&&t.vect.isDimensionOf(r,2))return t.vect.init(r.x*t.trig.cos(r.y),r.y*t.trig.sin(r.y));if("bipolar"===e&&t.vect.isDimensionOf(r,2))return t.vect.init((r.x*r.x-r.y*r.y)/4,t.real.sqrt(16*r.x*r.x-(r.x*r.x-r.y*r.y+4)*(r.x*r.x-r.y*r.y+4)));if("cylindrical"===e&&t.vect.isDimensionOf(r,3))return t.vect.init(r.x*t.trig.cos(r.y),r.x*t.trig.sin(r.y),r.z);if("spherical"===e&&t.vect.isDimensionOf(r,3))return t.vect.init(r.x*t.trig.sin(r.z)*t.trig.cos(r.y),r.x*t.trig.sin(r.z)*t.trig.sin(r.y),r.x*t.trig.cos(r.z));throw new TypeError('Parameter "type" must be "polar", "bipolar", "cylindrical", or "spherical".')},r.fromAngle=function(r,e){return void 0===e?t.vect.init(t.trig.cos(r),t.trig.sin(r)):t.vect.init(t.trig.cos(r)*t.trig.cos(e),t.trig.sin(r)*t.trig.cos(e),t.trig.sin(e))},r.fromCartesianToAlternate=function(r,e){if("polar"===e&&t.vect.isDimensionOf(r,2))return t.vect.init(t.vect.mag(r),t.vect.ang(r));if("bipolar"===e&&t.vect.isDimensionOf(r,2))return t.vect.init((r.x+1)*(r.x+1)+r.y*r.y,(r.x-1)*(r.x-1)+r.y*r.y);if("cylindrical"===e&&t.vect.isDimensionOf(r,3))return t.vect.init(t.vect.mag(t.vect.init(r.x,r.y)),t.vect.ang(t.vect.init(r.x,r.y)),r.z);if("spherical"===e&&t.vect.isDimensionOf(r,3))return t.vect.init(t.vect.mag(r),t.vect.ang(t.vect.init(r.x,r.y)),t.vect.ang(r)[2]);throw new TypeError('Parameter "type" must be "polar", "bipolar", "cylindrical", or "spherical".')},r.fromField=function(r,e){if(2===t.vect.dimension(r)&&t.vect.isDimensionOf(e,2)){var n=t.real.parse("(x, y) => "+r.p),i=t.real.parse("(x, y) => "+r.q);return t.vect.init(n(e.x,e.y),i(e.x,e.y))}if(3===t.vect.dimension(r)&&t.vect.isDimensionOf(e,3)){n=t.real.parse("(x, y, z) => "+r.p),i=t.real.parse("(x, y, z) => "+r.q);var o=t.real.parse("(x, y, z) => "+r.r);return t.vect.init(n(e.x,e.y,e.z),i(e.x,e.y,e.z),o(e.x,e.y,e.z))}if(4===t.vect.dimension(r)&&t.vect.isDimensionOf(e,4)){n=t.real.parse("(x, y, z, w) => "+r.p),i=t.real.parse("(x, y, z, w) => "+r.q),o=t.real.parse("(x, y, z, w) => "+r.r);var a=t.real.parse("(x, y, z, w) => "+r.s);return t.vect.init(n(e.x,e.y,e.z,e.w),i(e.x,e.y,e.z,e.w),o(e.x,e.y,e.z,e.w),a(e.x,e.y,e.z,e.w))}throw new TypeError('Parameters "vectfield" and "vect" must respectively be of type "ChalkboardVector" and "ChalkboardVectorField" with 2, 3, or 4 dimensions.')},r.fromVector=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(r.x,r.y,0);if(t.vect.isDimensionOf(r,3))return t.vect.init(r.x,r.y,r.z,0);if(t.vect.isDimensionOf(r,4))return t.vect.init(r.x,r.y);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.init=function(t,r,e,n){return void 0===e&&void 0===n?{x:t,y:r}:void 0===n?{x:t,y:r,z:e}:{x:t,y:r,z:e,w:n}},r.interp=function(r,e,n,i,o){if(t.vect.isDimensionOf(r,2)&&void 0===i&&void 0===o)return t.vect.init((e*r.x+n*r.y)/(e+n),(e*r.x+n*r.y)/(e+n));if(t.vect.isDimensionOf(r,3)&&"number"==typeof i&&void 0===o)return t.vect.init((e*r.x+n*r.y+i*r.z)/(e+n+i),(e*r.x+n*r.y+i*r.z)/(e+n+i),(e*r.x+n*r.y+i*r.z)/(e+n+i));if(t.vect.isDimensionOf(r,4)&&"number"==typeof i&&"number"==typeof o)return t.vect.init((e*r.x+n*r.y+i*r.z+o*r.w)/(e+n+i+o),(e*r.x+n*r.y+i*r.z+o*r.w)/(e+n+i+o),(e*r.x+n*r.y+i*r.z+o*r.w)/(e+n+i+o),(e*r.x+n*r.y+i*r.z+o*r.w)/(e+n+i+o));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.isDimensionEqual=function(r,e){return t.vect.dimension(r)===t.vect.dimension(e)},r.isDimensionOf=function(r,e){if(2===e)return 2===t.vect.dimension(r);if(3===e)return 3===t.vect.dimension(r);if(4===e)return 4===t.vect.dimension(r);throw new TypeError('Parameter "dimension" must be 2, 3, or 4.')},r.isEqual=function(r,e){if(t.vect.isDimensionEqual(r,e)){if(t.vect.isDimensionOf(r,2))return r.x===e.x&&r.y===e.y;if(t.vect.isDimensionOf(r,3))return r.x===e.x&&r.y===e.y&&r.z===e.z;if(t.vect.isDimensionOf(r,4))return r.x===e.x&&r.y===e.y&&r.z===e.z&&r.w===e.w;throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')}return!1},r.isNormalized=function(r){return 1===t.vect.magsq(r)},r.isOrthogonal=function(r,e){return 0===t.vect.dot(r,e)},r.isParallel=function(r,e){return t.numb.isApproxEqual(t.vect.dot(r,e),t.vect.mag(r)*t.vect.mag(e))},r.isZero=function(r){return t.vect.isEqual(r,t.vect.zero(r))},r.mag=function(r){if(t.vect.isDimensionOf(r,2))return t.real.sqrt(r.x*r.x+r.y*r.y);if(t.vect.isDimensionOf(r,3))return t.real.sqrt(r.x*r.x+r.y*r.y+r.z*r.z);if(t.vect.isDimensionOf(r,4))return t.real.sqrt(r.x*r.x+r.y*r.y+r.z*r.z+r.w*r.w);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.magset=function(r,e){return t.vect.scl(t.vect.normalize(r),e)},r.magsq=function(r){if(t.vect.isDimensionOf(r,2))return r.x*r.x+r.y*r.y;if(t.vect.isDimensionOf(r,3))return r.x*r.x+r.y*r.y+r.z*r.z;if(t.vect.isDimensionOf(r,4))return r.x*r.x+r.y*r.y+r.z*r.z+r.w*r.w;throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.negate=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(-r.x,-r.y);if(t.vect.isDimensionOf(r,3))return t.vect.init(-r.x,-r.y,-r.z);if(t.vect.isDimensionOf(r,4))return t.vect.init(-r.x,-r.y,-r.z,-r.w);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.normalize=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(r.x/t.vect.mag(r),r.y/t.vect.mag(r));if(t.vect.isDimensionOf(r,3))return t.vect.init(r.x/t.vect.mag(r),r.y/t.vect.mag(r),r.z/t.vect.mag(r));if(t.vect.isDimensionOf(r,4))return t.vect.init(r.x/t.vect.mag(r),r.y/t.vect.mag(r),r.z/t.vect.mag(r),r.w/t.vect.mag(r));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.oproj=function(r,e){return t.vect.sub(r,t.vect.proj(r,e))},r.print=function(r){console.log(t.vect.toString(r))},r.proj=function(r,e){return t.vect.scl(e,t.vect.dot(r,e)/t.vect.dot(e,e))},r.random=function(r,e,n){if(2===n)return t.vect.init(t.numb.random(r,e),t.numb.random(r,e));if(3===n)return t.vect.init(t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e));if(4===n)return t.vect.init(t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e),t.numb.random(r,e));throw new TypeError('Parameter "dimension" must be 2, 3, or 4.')},r.reciprocate=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(1/r.x,1/r.y);if(t.vect.isDimensionOf(r,3))return t.vect.init(1/r.x,1/r.y,1/r.z);if(t.vect.isDimensionOf(r,4))return t.vect.init(1/r.x,1/r.y,1/r.z,1/r.w);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.reflect=function(r,e){return t.vect.sub(r,t.vect.scl(e,2*t.vect.dot(r,e)))},r.refract=function(r,e,n){if(n>0){var i=t.vect.scl(t.vect.sub(r,t.vect.scl(e,t.vect.dot(r,e))),n),o=t.vect.scl(e,-t.real.sqrt(1-n*n*(1-t.vect.dot(r,e)*t.vect.dot(r,e))));return t.vect.add(i,o)}throw new RangeError('Parameter "refractiveIndex" must be of type "number" greater than 0.')},r.round=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(Math.round(r.x),Math.round(r.y));if(t.vect.isDimensionOf(r,3))return t.vect.init(Math.round(r.x),Math.round(r.y),Math.round(r.z));if(t.vect.isDimensionOf(r,4))return t.vect.init(Math.round(r.x),Math.round(r.y),Math.round(r.z),Math.round(r.w));throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.scalarQuadruple=function(r,e,n,i){return t.vect.dot(t.vect.cross(r,e),t.vect.cross(n,i))},r.scalarTriple=function(r,e,n){return t.vect.dot(r,t.vect.cross(e,n))},r.scl=function(r,e){if(t.vect.isDimensionOf(r,2))return t.vect.init(r.x*e,r.y*e);if(t.vect.isDimensionOf(r,3))return t.vect.init(r.x*e,r.y*e,r.z*e);if(t.vect.isDimensionOf(r,4))return t.vect.init(r.x*e,r.y*e,r.z*e,r.w*e);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.slope=function(r){if(t.vect.isDimensionOf(r,2))return r.y/r.x;if(t.vect.isDimensionOf(r,3))return r.z/t.real.sqrt(r.x*r.x+r.y*r.y);if(t.vect.isDimensionOf(r,4))return r.w/t.real.sqrt(r.x*r.x+r.y*r.y+r.z*r.z);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.sub=function(r,e){if(t.vect.isDimensionOf(r,2)&&t.vect.isDimensionOf(e,2))return t.vect.init(r.x-e.x,r.y-e.y);if(t.vect.isDimensionOf(r,3)&&t.vect.isDimensionOf(e,3))return t.vect.init(r.x-e.x,r.y-e.y,r.z-e.z);if(t.vect.isDimensionOf(r,4)&&t.vect.isDimensionOf(e,4))return t.vect.init(r.x-e.x,r.y-e.y,r.z-e.z,r.w-e.w);throw new TypeError('Parameters "vect1" and "vect2" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.toArray=function(r){if(t.vect.isDimensionOf(r,2))return[r.x,r.y];if(t.vect.isDimensionOf(r,3))return[r.x,r.y,r.z];if(t.vect.isDimensionOf(r,4))return[r.x,r.y,r.z,r.w];throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.toComplex=function(r){return t.comp.init(r.x,r.y)},r.toMatrix=function(r,e){if(void 0===e&&(e=0),t.vect.isDimensionOf(r,2)){if(0===e)return t.matr.init([r.x],[r.y]);if(1===e)return t.matr.init([r.x,r.y]);throw new TypeError('Parameter "axis" must be 0 or 1.')}if(t.vect.isDimensionOf(r,3)){if(0===e)return t.matr.init([r.x],[r.y],[r.z]);if(1===e)return t.matr.init([r.x,r.y,r.z]);throw new TypeError('Parameter "axis" must be 0 or 1.')}if(t.vect.isDimensionOf(r,4)){if(0===e)return t.matr.init([r.x],[r.y],[r.z],[r.w]);if(1===e)return t.matr.init([r.x,r.y,r.z,r.w]);throw new TypeError('Parameter "axis" must be 0 or 1.')}throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.toQuaternion=function(r){if(t.vect.isDimensionOf(r,2))return t.quat.init(r.x,r.y,0,0);if(t.vect.isDimensionOf(r,3))return t.quat.init(0,r.x,r.y,r.z);if(t.vect.isDimensionOf(r,4))return t.quat.init(r.x,r.y,r.z,r.w);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.toString=function(r){if(t.vect.isDimensionOf(r,2))return"("+r.x.toString()+", "+r.y.toString()+")";if(t.vect.isDimensionOf(r,3))return"("+r.x.toString()+", "+r.y.toString()+", "+r.z.toString()+")";if(t.vect.isDimensionOf(r,4))return"("+r.x.toString()+", "+r.y.toString()+", "+r.z.toString()+", "+r.w.toString()+")";throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')},r.toTensor=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return Array.isArray(i[0])&&(i=i[0]),(n=t.tens).resize.apply(n,e([t.vect.toMatrix(r)],i,!1))},r.vectorQuadruple=function(r,e,n,i){return t.vect.cross(t.vect.cross(r,e),t.vect.cross(n,i))},r.vectorTriple=function(r,e,n){return t.vect.cross(r,t.vect.cross(e,n))},r.zero=function(r){if(t.vect.isDimensionOf(r,2))return t.vect.init(0,0);if(t.vect.isDimensionOf(r,3))return t.vect.init(0,0,0);if(t.vect.isDimensionOf(r,4))return t.vect.init(0,0,0,0);throw new TypeError('Parameter "vect" must be of type "ChalkboardVector" with 2, 3, or 4 dimensions.')}}(t||(t={}))